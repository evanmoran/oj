<!DOCTYPE html>

<html>
<head>
  <title>oj.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>oj.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <p>oj.js v0.3.0
ojjs.org</p>
<p>Copyright 2013, Evan Moran
Released under the MIT License</p>
<p>===================================================================</p>

            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Unified templating for the people. Thirsty people.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>;(<span class="keyword">function</span>(root, factory){</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>CommonJS export for Node</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="keyword">if</span> (<span class="keyword">typeof</span> module === <span class="string">'object'</span> &amp;&amp; module.exports) {
    <span class="keyword">try</span> {$ = require(<span class="string">'jquery'</span>)} <span class="keyword">catch</span> (e){}
    module.exports = factory(root, $)</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>AMD export for RequireJS</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  }

  <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> define === <span class="string">'function'</span> &amp;&amp; define.amd)
    define([<span class="string">'jquery'</span>], <span class="keyword">function</span>($){<span class="keyword">return</span> factory(root, $) })</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Global export for client side</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="keyword">else</span>
    root.oj = factory(root, (root.jQuery || root.Zepto || root.ender || root.$))

}(<span class="keyword">this</span>, <span class="keyword">function</span>(root, $){

  <span class="keyword">var</span> ArrP = Array.prototype,
    FunP = Function.prototype,
    ObjP = Object.prototype,
    slice = ArrP.slice,
    unshift = ArrP.unshift,
    concat = ArrP.concat,
    pass = <span class="keyword">function</span>(v){<span class="keyword">return</span> v},
    _udf = <span class="string">'undefined'</span></pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>oj function: highest level of capture for tag functions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">oj</span><span class="params">()</span>{</span>
    <span class="keyword">return</span> oj.tag.apply(<span class="keyword">this</span>, [<span class="string">'oj'</span>].concat(slice.call(arguments)).concat([{__quiet__:<span class="number">1</span>}]))
  }

  oj.version = <span class="string">'0.3.0'</span>

  oj.isClient = !(<span class="keyword">typeof</span> process !== _udf &amp;&amp; process !== <span class="literal">null</span> ? process.versions != <span class="literal">null</span> ? process.versions.node : <span class="number">0</span> : <span class="number">0</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Detect jQuery globally or in required module</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="keyword">if</span> (<span class="keyword">typeof</span> $ != _udf)
    oj.$ = $</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Reference ourselves for template files to see</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.oj = oj</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>oj.load: load the page specified generating necessary html, css, and client side events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.load = <span class="keyword">function</span>(page, data){</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Defer dom manipulation until the page is ready</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">return</span> oj.$(<span class="keyword">function</span>(){</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Load through require and passing through template data</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">var</span> ojml = <span class="keyword">function</span>(){require(page).call(data, data)}
      oj.$.ojBody(ojml)</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Trigger events bound through onload</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">return</span> oj.onload()
    })
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>oj.onload: Enlist in onload action or run them.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="keyword">var</span> _onLoadQueue = {queue: [], loaded: <span class="literal">false</span>}
  oj.onload = <span class="keyword">function</span>(f){</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Call everything if no arguments</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (oj.isUndefined(f)){
      _onLoadQueue.loaded = <span class="literal">true</span>
      <span class="keyword">while</span> ((f = _onLoadQueue.queue.shift()))
        f()
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Call load if already loaded</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">else</span> <span class="keyword">if</span> (_onLoadQueue.loaded)
      f()</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Queue function for later</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">else</span>
      _onLoadQueue.queue.push(f)
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>oj.emit: Used by plugins to group multiple elements as if it is a single tag.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.emit = <span class="keyword">function</span>(){<span class="keyword">return</span> oj.tag.apply(oj, [<span class="string">'oj'</span>].concat(slice.call(arguments)))}</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Type Helpers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.isDefined = <span class="keyword">function</span>(a){<span class="keyword">return</span> <span class="keyword">typeof</span> a !== _udf}
  oj.isOJ = <span class="keyword">function</span>(obj){<span class="keyword">return</span> !!(obj != <span class="literal">null</span> ? obj.isOJ : <span class="keyword">void</span> <span class="number">0</span>)}
  oj.isOJType = <span class="keyword">function</span>(a){<span class="keyword">return</span> oj.isOJ(a) &amp;&amp; a.type === a}
  oj.isOJInstance = <span class="keyword">function</span>(a){<span class="keyword">return</span> oj.isOJ(a) &amp;&amp; !oj.isOJType(a)}
  oj.isEvented = <span class="keyword">function</span>(a){<span class="keyword">return</span> !!(a &amp;&amp; a.on &amp;&amp; a.off &amp;&amp; a.trigger)}
  oj.isDOM = <span class="keyword">function</span>(a){<span class="keyword">return</span> !!(a &amp;&amp; (a.nodeType != <span class="literal">null</span>))}
  oj.isDOMElement = <span class="keyword">function</span>(a){<span class="keyword">return</span> !!(a &amp;&amp; a.nodeType === <span class="number">1</span>)}
  oj.isDOMAttribute = <span class="keyword">function</span>(a){<span class="keyword">return</span> !!(a &amp;&amp; a.nodeType === <span class="number">2</span>)}
  oj.isDOMText = <span class="keyword">function</span>(a){<span class="keyword">return</span> !!(a &amp;&amp; a.nodeType === <span class="number">3</span>)}
  oj.isjQuery = <span class="keyword">function</span>(a){<span class="keyword">return</span> !!(a &amp;&amp; a.jquery)}
  oj.isUndefined = <span class="keyword">function</span>(a){<span class="keyword">return</span> a === <span class="keyword">void</span> <span class="number">0</span>}
  oj.isBoolean = <span class="keyword">function</span>(a){<span class="keyword">return</span> a === <span class="literal">true</span> || a === <span class="literal">false</span> || ObjP.toString.call(a) === <span class="string">'[object Boolean]'</span>}
  oj.isNumber = <span class="keyword">function</span>(a){<span class="keyword">return</span> !!(a === <span class="number">0</span> || (a &amp;&amp; a.toExponential &amp;&amp; a.toFixed))}
  oj.isString = <span class="keyword">function</span>(a){<span class="keyword">return</span> !!(a === <span class="string">''</span> || (a &amp;&amp; a.charCodeAt &amp;&amp; a.substr))}
  oj.isDate = <span class="keyword">function</span>(a){<span class="keyword">return</span> !!(a &amp;&amp; a.getTimezoneOffset &amp;&amp; a.setUTCFullYear)}
  oj.isPlainObject = <span class="keyword">function</span>(a){<span class="keyword">return</span> oj.$.isPlainObject(a) &amp;&amp; !oj.isOJ(a)}
  oj.isFunction = oj.$.isFunction
  oj.isArray = oj.$.isArray
  oj.isRegEx = <span class="keyword">function</span>(a){<span class="keyword">return</span> ObjP.toString.call(a) === <span class="string">'[object RegExp]'</span>}
  oj.isArguments = <span class="keyword">function</span>(a){<span class="keyword">return</span> ObjP.toString.call(a) === <span class="string">'[object Arguments]'</span>}
  oj.parse = <span class="keyword">function</span>(str){
    <span class="keyword">var</span> n, o = str
    <span class="keyword">if</span> (str === _udf)
      o = <span class="keyword">void</span> <span class="number">0</span>
    <span class="keyword">else</span> <span class="keyword">if</span> (str === <span class="string">'null'</span>)
      o = <span class="literal">null</span>
    <span class="keyword">else</span> <span class="keyword">if</span> (str === <span class="string">'true'</span>)
      o = <span class="literal">true</span>
    <span class="keyword">else</span> <span class="keyword">if</span> (str === <span class="string">'false'</span>)
      o = <span class="literal">false</span>
    <span class="keyword">else</span> <span class="keyword">if</span> (!isNaN(n = parseFloat(str)))
      o = n
    <span class="keyword">return</span> o
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>unionArguments: Union arguments into options and args</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.unionArguments = <span class="keyword">function</span>(argList){
    <span class="keyword">var</span> options = {}, args = [], v, ix = <span class="number">0</span>
    <span class="keyword">for</span> (; ix &lt; argList.length; ix++){
      v = argList[ix]
      <span class="keyword">if</span> (oj.isPlainObject(v))
        options = _extend(options, v)
      <span class="keyword">else</span>
        args.push(v)
    }
    <span class="keyword">return</span> {options: options, args: args}
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>argumentShift: Shift argument out of options with key</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.argumentShift = <span class="keyword">function</span>(options, key){
    <span class="keyword">var</span> value
    <span class="keyword">if</span> ((oj.isPlainObject(options)) &amp;&amp; (key != <span class="literal">null</span>) &amp;&amp; (options[key] != <span class="literal">null</span>)){
      value = options[key]
      <span class="keyword">delete</span> options[key]
    }
    <span class="keyword">return</span> value
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>Utility Helpers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="keyword">var</span> _keys = Object.keys,
    _extend = oj.$.extend

  <span class="function"><span class="keyword">function</span> <span class="title">_isCapitalLetter</span><span class="params">(c)</span>{</span><span class="keyword">return</span> !!(c.match(<span class="regexp">/[A-Z]/</span>))}

  <span class="function"><span class="keyword">function</span> <span class="title">_has</span><span class="params">(obj, key)</span>{</span><span class="keyword">return</span> ObjP.hasOwnProperty.call(obj, key)}

  <span class="function"><span class="keyword">function</span> <span class="title">_values</span><span class="params">(obj)</span>{</span>
    <span class="keyword">var</span> keys = _keys(obj),
      len = keys.length,
      values = <span class="keyword">new</span> Array(len),
      i = <span class="number">0</span>
    <span class="keyword">for</span> (; i &lt; len; i++)
      values[i] = obj[keys[i]]
    <span class="keyword">return</span> values
  }

  <span class="function"><span class="keyword">function</span> <span class="title">_toArray</span><span class="params">(obj)</span>{</span>
    <span class="keyword">if</span> (!obj)
      <span class="keyword">return</span> []
    <span class="keyword">if</span> (oj.isArray(obj))
      <span class="keyword">return</span> slice.call(obj)
    <span class="keyword">if</span> (oj.isArguments(obj))
      <span class="keyword">return</span> slice.call(obj)
    <span class="keyword">if</span> (obj.toArray &amp;&amp; oj.isFunction(obj.toArray))
      <span class="keyword">return</span> obj.toArray()
    <span class="keyword">return</span> _values(obj)
  }

  <span class="function"><span class="keyword">function</span> <span class="title">_isEmpty</span><span class="params">(o)</span>{</span>
    <span class="keyword">if</span> (oj.isArray(o))
      <span class="keyword">return</span> o.length === <span class="number">0</span>
    <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> o)
      <span class="keyword">if</span> (_has(o, k))
        <span class="keyword">return</span> <span class="literal">false</span>
    <span class="keyword">return</span> <span class="literal">true</span>
  }

  <span class="function"><span class="keyword">function</span> <span class="title">_clone</span><span class="params">(o)</span>{</span>
    <span class="keyword">if</span> (!(oj.isArray(o) || oj.isPlainObject(o)))
      <span class="keyword">return</span> o
    <span class="keyword">if</span> (oj.isArray(o))
      <span class="keyword">return</span> o.slice()
    <span class="keyword">else</span>
      <span class="keyword">return</span> _extend({}, o)
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>_setObject(obj, k1, k2, ..., value):
Set object deeply key by key ensure each part is an object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_setObject</span><span class="params">(obj)</span>{</span>
    <span class="keyword">var</span> args = arguments,
      o = obj,
      len = args.length,</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>keys are args ix: 1 to n-2</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      keys = <span class="number">3</span> &lt;= len ? slice.call(args, <span class="number">1</span>, len = len - <span class="number">1</span>) : (len = <span class="number">1</span>, []),</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>value is last arg</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      value = args[len++],
      ix, k

    <span class="keyword">for</span> (ix = <span class="number">0</span>; ix &lt; keys.length; ix++){
      k = keys[ix]</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>Initialize key to empty object if necessary</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (<span class="keyword">typeof</span> o[k] !== <span class="string">'object'</span>)
        o[k] = {}</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Set final value if this is the last key</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (ix === keys.length - <span class="number">1</span>)
        o[k] = value
      <span class="keyword">else</span></pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>Continue deeper</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        o = o[k]
    }
    <span class="keyword">return</span> obj
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>uniqueSort:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">uniqueSort</span><span class="params">(arr, isSorted)</span>{</span>
    <span class="keyword">if</span> (isSorted == <span class="literal">null</span>)
      isSorted = <span class="literal">false</span>

    <span class="keyword">if</span> (!isSorted)
      arr.sort()

    <span class="keyword">var</span> out = [], ix, item
    <span class="keyword">for</span> (ix = <span class="number">0</span>; ix &lt; arr.length; ix++){
      item = arr[ix]
      <span class="keyword">if</span> (ix &gt; <span class="number">0</span> &amp;&amp; arr[ix - <span class="number">1</span>] === arr[ix])
        <span class="keyword">continue</span>
      out.push(item)
    }
    <span class="keyword">return</span> out
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>_d(args...): initialization helper that returns first arg that isn&#39;t null</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_d</span><span class="params">()</span>{</span>
    <span class="keyword">for</span> (<span class="keyword">var</span> ix = <span class="number">0</span>;ix &lt; arguments.length; ix++)
      <span class="keyword">if</span> (arguments[ix] != <span class="literal">null</span>)
        <span class="keyword">return</span> arguments[ix]
    <span class="keyword">return</span> <span class="literal">null</span>
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>_e: error by throwing msg with optional fn name</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_e</span><span class="params">(fn, msg)</span>{</span>
    msg = _d(msg, fn, <span class="string">''</span>)
    fn = _d(fn, <span class="number">0</span>)
    <span class="keyword">var</span> pfx = <span class="string">"oj: "</span>
    <span class="keyword">if</span> (fn)
      pfx = <span class="string">"oj."</span> + fn + <span class="string">": "</span>
    <span class="keyword">throw</span> <span class="keyword">new</span> Error(pfx + msg)
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>_a: assert when cond is false with msg and with optional fn name</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_a</span><span class="params">(cond, fn, msg)</span>{</span><span class="keyword">if</span> (!cond) _e(fn,msg)}</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>_v: validate argument n with fn name and message</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_v</span><span class="params">(fn, n, v, type)</span>{</span>
    n = {<span class="number">1</span>:<span class="string">'first'</span>,<span class="number">2</span>:<span class="string">'second'</span>,<span class="number">3</span>: <span class="string">'third'</span>, <span class="number">4</span>: <span class="string">'fourth'</span>}[n]
    _a(!type || (<span class="keyword">typeof</span> v === type), fn, <span class="string">""</span> + type + <span class="string">" expected for "</span> + n + <span class="string">" argument"</span>)
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>_splitAndTrim: Split string by seperator and trim result</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_splitAndTrim</span><span class="params">(str, seperator, limit)</span>{</span>
    <span class="keyword">return</span> str.split(seperator, limit).map(<span class="keyword">function</span>(v){
      <span class="keyword">return</span> v.trim()
    })
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>_decamelize: Convert from camal case to underscore case</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_decamelize</span><span class="params">(str)</span>{</span><span class="keyword">return</span> str.replace(<span class="regexp">/([a-z])([A-Z])/g</span>, <span class="string">'$1_$2'</span>).toLowerCase()}</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>_dasherize: Convert from camal case or space seperated to dashes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_dasherize</span><span class="params">(str)</span>{</span><span class="keyword">return</span> _decamelize(str).replace(<span class="regexp">/[ _]/g</span>, <span class="string">'-'</span>)}</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>oj.addMethod: add multiple methods to an object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.addMethods = <span class="keyword">function</span>(obj, mapNameToMethod){
    <span class="keyword">for</span> (<span class="keyword">var</span> methodName <span class="keyword">in</span> mapNameToMethod)
      oj.addMethod(obj, methodName, mapNameToMethod[methodName])
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>oj.addMethod: Add method to object with name and fn</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.addMethod = <span class="keyword">function</span>(obj, name, fn){
    _v(<span class="string">'addMethod'</span>, <span class="number">2</span>, name, <span class="string">'string'</span>)
    _v(<span class="string">'addMethod'</span>, <span class="number">3</span>, fn, <span class="string">'function'</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>Methods are non-enumerable, non-writable properties</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Object.defineProperty(obj, name, {
      value: fn,
      enumerable: <span class="literal">false</span>,
      writable: <span class="literal">false</span>,
      configurable: <span class="literal">true</span>
    })
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>oj.removeMethod: Remove a method with name from an object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.removeMethod = <span class="keyword">function</span>(obj, name){
    _v(<span class="string">'removeMethod'</span>, <span class="number">2</span>, name, <span class="string">'string'</span>)
    <span class="keyword">delete</span> obj[name]
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>oj.addProperties: add multiple properties to an object
Properties can be specified by get/set methods or by a value
Optionally you can include writable or enumerable settings</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.addProperties = <span class="keyword">function</span>(obj, mapNameToInfo){</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>Iterate over properties</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> propInfo, propName

    <span class="keyword">for</span> (propName <span class="keyword">in</span> mapNameToInfo){
      propInfo = mapNameToInfo[propName]</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>Wrap the value if propInfo is not already a prop definition</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (((propInfo != <span class="literal">null</span> ? propInfo.get : <span class="keyword">void</span> <span class="number">0</span>) == <span class="literal">null</span>) &amp;&amp;
          ((propInfo != <span class="literal">null</span> ? propInfo.value : <span class="keyword">void</span> <span class="number">0</span>) == <span class="literal">null</span>))
        propInfo = {value: propInfo, writable: <span class="literal">true</span>}

      oj.addProperty(obj, propName, propInfo)
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>oj.addProperty: Add property to object with name and info</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.addProperty = <span class="keyword">function</span>(obj, name, info){
    _v(<span class="string">'addProperty'</span>, <span class="number">2</span>, name, <span class="string">'string'</span>)
    _v(<span class="string">'addProperty'</span>, <span class="number">3</span>, info, <span class="string">'object'</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>Default properties to enumerable and configurable</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    info = _extend({enumerable: <span class="literal">true</span>, configurable: <span class="literal">true</span>}, info)</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>Remove property if it already exists</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (Object.getOwnPropertyDescriptor(obj, name) != <span class="literal">null</span>)
      oj.removeProperty(obj, name)</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>Add the property</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Object.defineProperty(obj, name, info)
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>oj.removeProperty: remove property from object with name</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.removeProperty = <span class="keyword">function</span>(obj, name){
    _v(<span class="string">'removeProperty'</span>, <span class="number">2</span>, name, <span class="string">'string'</span>)
    <span class="keyword">delete</span> obj[name]
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>oj.isProperty: Determine property in object is a get/set property</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.isProperty = <span class="keyword">function</span>(obj, name){
    _v(<span class="string">'isProperty'</span>, <span class="number">2</span>, name, <span class="string">'string'</span>)
    <span class="keyword">return</span> Object.getOwnPropertyDescriptor(obj, name).get != <span class="literal">null</span>
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>oj.copyProperty: Copy source.propName to dest.propName</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.copyProperty = <span class="keyword">function</span>(dest, source, propName){
    <span class="keyword">var</span> info = Object.getOwnPropertyDescriptor(source, propName)
    info = _d(info, {value: [], enumerable: <span class="literal">false</span>, writable: <span class="literal">true</span>, configurable: <span class="literal">true</span> })
    <span class="keyword">if</span> (info.value != <span class="literal">null</span>)
      info.value = _clone(info.value)
    <span class="keyword">return</span> Object.defineProperty(dest, propName, info)
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>_argsStack: Abstraction to wrap global arguments stack.
This makes me sad but it is necessary for div -&gt; syntax</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="keyword">var</span> _argsStack = []</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>Access the top of the stack</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj._argsTop = <span class="keyword">function</span>(){
    <span class="keyword">if</span> (_argsStack.length)
      <span class="keyword">return</span> _argsStack[_argsStack.length - <span class="number">1</span>]
    <span class="keyword">else</span>
      <span class="keyword">return</span> <span class="literal">null</span>
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>Push scope onto arguments</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj._argsPush = <span class="keyword">function</span>(args){
    _argsStack.push(_d(args,[]))
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>Pop scope from arguments</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj._argsPop = <span class="keyword">function</span>(){
    <span class="keyword">if</span> (_argsStack.length)
      <span class="keyword">return</span> _argsStack.pop()
    <span class="keyword">return</span> <span class="literal">null</span>
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>Append argument</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj._argsAppend = <span class="keyword">function</span>(arg){
    <span class="keyword">var</span> top = oj._argsTop()
    <span class="keyword">if</span> (top != <span class="literal">null</span>)
      top.push(arg)
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>oj.tag (name, attributes, rest...)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.tag = <span class="keyword">function</span>(name){
    _v(<span class="string">'tag'</span>, <span class="number">1</span>, name, <span class="string">'string'</span>)

    <span class="keyword">var</span> rest = <span class="number">2</span> &lt;= arguments.length ? slice.call(arguments, <span class="number">1</span>) : [],
      u = oj.unionArguments(rest),
      args = u.args,
      attributes = u.options,
      isQuiet = attributes.__quiet__,
      arg, len, r, ix,</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <p>Build ojml starting with tag</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      ojml = [name]

    <span class="keyword">if</span> (isQuiet)
      <span class="keyword">delete</span> attributes.__quiet__</pre></div></div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <p>Add attributes to ojml if they exist</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (!_isEmpty(attributes))
      ojml.push(attributes)</pre></div></div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>Store current tag context</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    oj._argsPush(ojml)</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <p>Loop over attributes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">for</span> (ix = <span class="number">0</span>; ix &lt; args.length; ix++){
      arg = args[ix]

      <span class="keyword">if</span> (oj.isPlainObject(arg))
        <span class="keyword">continue</span>

      <span class="keyword">else</span> <span class="keyword">if</span> (oj.isFunction(arg)){
        len = oj._argsTop().length</pre></div></div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <p>Call the fn tags will append to oj._argsTop</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        r = arg()</pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <p>Use return value instead if oj._argsTop didn&#39;t change</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (len === oj._argsTop().length &amp;&amp; (r != <span class="literal">null</span>))
          oj._argsAppend(r)

      } <span class="keyword">else</span>
        oj._argsAppend(arg)
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <p>Restore previous tag context</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    oj._argsPop()</pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p>Append the final result to your parent&#39;s arguments
if there exists an argument to append to.
Do not emit when quiet is set,</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (!isQuiet)
      oj._argsAppend(ojml)

    <span class="keyword">return</span> ojml
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <p>Define all elements as closed or open</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.tag.elements = {
    closed: <span class="string">'a abbr acronym address applet article aside audio b bdo big blockquote body button canvas caption center cite code colgroup command datalist dd del details dfn dir div dl dt em embed fieldset figcaption figure font footer form frameset h1 h2 h3 h4 h5 h6 head header hgroup html i iframe ins keygen kbd label legend li map mark menu meter nav noframes noscript object ol optgroup option output p pre progress q rp rt ruby s samp script section select small source span strike strong style sub summary sup table tbody td textarea tfoot th thead time title tr tt u ul var video wbr xmp'</span>.split(<span class="string">' '</span>),
    open: <span class="string">'area base br col command css !DOCTYPE embed hr img input keygen link meta param source track wbr'</span>.split(<span class="string">' '</span>)
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-65">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              <p>Keep track of all valid elements</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.tag.elements.all = (oj.tag.elements.closed.concat(oj.tag.elements.open)).sort()</pre></div></div>
            
        </li>
        
        
        <li id="section-66">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              <p>tag.isClosed: Determine if an element is closed or open</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.tag.isClosed = <span class="keyword">function</span>(tag){<span class="keyword">return</span> oj.tag.elements.open.indexOf(tag) === -<span class="number">1</span>}</pre></div></div>
            
        </li>
        
        
        <li id="section-67">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>
              <p>_setTagName: Record tag name on a given tag function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_setTagName</span><span class="params">(tag, name)</span>{</span><span class="keyword">if</span> (tag != <span class="literal">null</span>) tag.tagName = name }</pre></div></div>
            
        </li>
        
        
        <li id="section-68">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>
              <p>_getTagName: Get a tag name on a given tag function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_getTagName</span><span class="params">(tag)</span>{</span><span class="keyword">return</span> tag.tagName}</pre></div></div>
            
        </li>
        
        
        <li id="section-69">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              <p>_getQuietTagName: Get quiet tag name</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_getQuietTagName</span><span class="params">(tag)</span>{</span><span class="keyword">return</span> <span class="string">'_'</span> + tag}</pre></div></div>
            
        </li>
        
        
        <li id="section-70">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>
              <p>_setInstanceOnElement: Record an oj instance on a given element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_setInstanceOnElement</span><span class="params">(el, inst)</span>{</span><span class="keyword">if</span> (el != <span class="literal">null</span>) el.oj = inst}</pre></div></div>
            
        </li>
        
        
        <li id="section-71">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-71">&#182;</a>
              </div>
              <p>_getInstanceOnElement: Get a oj instance on a given element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_getInstanceOnElement</span><span class="params">(el)</span>{</span>
    <span class="keyword">if</span> ((el != <span class="literal">null</span> ? el.oj : <span class="number">0</span>) != <span class="literal">null</span>)
      <span class="keyword">return</span> el.oj
    <span class="keyword">else</span>
      <span class="keyword">return</span> <span class="literal">null</span>
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-72">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-72">&#182;</a>
              </div>
              <p>Create tag methods for all elements</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="keyword">for</span> (<span class="keyword">var</span> ix = <span class="number">0</span>; ix &lt; oj.tag.elements.all.length; ix++){
    t = oj.tag.elements.all[ix]
    ;(<span class="keyword">function</span>(t){</pre></div></div>
            
        </li>
        
        
        <li id="section-73">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-73">&#182;</a>
              </div>
              <p>Define tag function named t</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      oj[t] = <span class="keyword">function</span>(){<span class="keyword">return</span> oj.tag.apply(oj, [t].concat(slice.call(arguments)))}</pre></div></div>
            
        </li>
        
        
        <li id="section-74">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-74">&#182;</a>
              </div>
              <p>Quiet tag functions do not emit
Define quiet tag function named qt</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">var</span> qt = _getQuietTagName(t)
      oj[qt] = <span class="keyword">function</span>(){<span class="keyword">return</span> oj.tag.apply(oj, [t, {__quiet__: <span class="number">1</span> }].concat(slice.call(arguments)))}</pre></div></div>
            
        </li>
        
        
        <li id="section-75">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-75">&#182;</a>
              </div>
              <p>Tag functions remember their name so the OJML syntax can use the function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      _setTagName(oj[t], t)
      _setTagName(oj[qt], t)
    })(t)
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-76">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-76">&#182;</a>
              </div>
              <p>oj.doctype: Method to define doctypes based on short names</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="keyword">var</span> dhp = <span class="string">'HTML PUBLIC "-//W3C//DTD HTML 4.01'</span>,
  w3 = <span class="string">'"http://www.w3.org/TR/html4/'</span>,
  strict5 = <span class="string">'html'</span>,
  strict4 = dhp + <span class="string">'//EN" '</span> + w3 + <span class="string">'strict.dtd"'</span>,
  _doctypes = {
    <span class="string">'5'</span>: strict5,
    <span class="string">'HTML 5'</span>: strict5,
    <span class="string">'4'</span>: strict4,
    <span class="string">'HTML 4.01 Strict'</span>: strict4,
    <span class="string">'HTML 4.01 Frameset'</span>: dhp + <span class="string">' Frameset//EN" '</span> + w3 + <span class="string">'frameset.dtd"'</span>,
    <span class="string">'HTML 4.01 Transitional'</span>: dhp + <span class="string">' Transitional//EN" '</span> + w3 + <span class="string">'loose.dtd"'</span>
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-77">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-77">&#182;</a>
              </div>
              <p>Define the method passing through to !DOCTYPE tag function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.doctype = <span class="keyword">function</span>(typeOrValue){
    typeOrValue = _d(typeOrValue,<span class="string">'5'</span>)
    <span class="keyword">return</span> oj[<span class="string">'!DOCTYPE'</span>](_d(_doctypes[typeOrValue], typeOrValue))
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-78">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-78">&#182;</a>
              </div>
              <p>oj.extendInto (context): Extend all OJ methods into a context.
Defaults to root, which is either <code>global</code> or <code>window</code></p>
<p>Methods that start with _ are not extended</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.useGlobally = oj.extendInto = <span class="keyword">function</span>(context){
    context = _d(context,root)

    <span class="keyword">var</span> o = {}, k, qn, v</pre></div></div>
            
        </li>
        
        
        <li id="section-79">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-79">&#182;</a>
              </div>
              <p>For all keys and values in oj</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">for</span> (k <span class="keyword">in</span> oj){
      v = oj[k]</pre></div></div>
            
        </li>
        
        
        <li id="section-80">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-80">&#182;</a>
              </div>
              <p>Extend into new object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (k[<span class="number">0</span>] !== <span class="string">'_'</span> &amp;&amp; k !== <span class="string">'extendInto'</span> &amp;&amp; k !== <span class="string">'useGlobally'</span>){
        o[k] = v</pre></div></div>
            
        </li>
        
        
        <li id="section-81">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-81">&#182;</a>
              </div>
              <p>Export _tag and _Type methods</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        qn = _getQuietTagName(k)
        <span class="keyword">if</span> (oj[qn])
          o[qn] = oj[qn]
      }
    }
    _extend(context, o)
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-82">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-82">&#182;</a>
              </div>
              <h2>oj.compile(options, ojml)</h2>

            </div>
            
        </li>
        
        
        <li id="section-83">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-83">&#182;</a>
              </div>
              <p>Compile ojml into meaningful parts
options:
<em> html - Compile to html
</em> dom - Compile to dom
<em> css - Compile to css
</em> cssMap - Record css as a javascript object
<em> styles -- Output css as style tags
</em> minify - Minify js and css
* ignore:{html:1} - Map of tags to ignore while compiling</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.compile = <span class="keyword">function</span>(options, ojml){</pre></div></div>
            
        </li>
        
        
        <li id="section-84">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-84">&#182;</a>
              </div>
              <p>Options is optional</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    ojml = _d(ojml, options)

    <span class="keyword">var</span> css, cssMap, dom, html,</pre></div></div>
            
        </li>
        
        
        <li id="section-85">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-85">&#182;</a>
              </div>
              <p>Default options to compile everything</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    options = _extend({html:<span class="number">1</span>, dom:<span class="number">0</span>, css:<span class="number">0</span>, cssMap:<span class="number">0</span>, minify:<span class="number">0</span>, ignore:{}}, options),</pre></div></div>
            
        </li>
        
        
        <li id="section-86">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-86">&#182;</a>
              </div>
              <p>Init accumulator</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    acc = _clone(options)

    acc.html = options.html ? [] : <span class="literal">null</span>
    acc.dom = options.dom &amp;&amp; (<span class="keyword">typeof</span> document !== <span class="string">"undefined"</span> &amp;&amp; document !== <span class="literal">null</span>) ? document.createElement(<span class="string">'OJ'</span>) : <span class="literal">null</span>
    acc.css = options.css || options.cssMap ? {} : <span class="literal">null</span>
    acc.indent = <span class="string">''</span>
    acc.data = options.data</pre></div></div>
            
        </li>
        
        
        <li id="section-87">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-87">&#182;</a>
              </div>
              <p>Accumulate insert events per element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    acc.inserts = []

    <span class="keyword">if</span> (options.dom)
      acc.types = []

    acc.tags = {}</pre></div></div>
            
        </li>
        
        
        <li id="section-88">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-88">&#182;</a>
              </div>
              <p>Always ignore oj and css tags</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _extend(options.ignore, {oj:<span class="number">1</span>, css:<span class="number">1</span>})</pre></div></div>
            
        </li>
        
        
        <li id="section-89">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-89">&#182;</a>
              </div>
              <p>Recursive compile to accumulator</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _compileAny(ojml, acc)</pre></div></div>
            
        </li>
        
        
        <li id="section-90">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-90">&#182;</a>
              </div>
              <p>Flatten CSS</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (acc.css != <span class="literal">null</span>)
      cssMap = _flattenCSSMap(acc.css)</pre></div></div>
            
        </li>
        
        
        <li id="section-91">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-91">&#182;</a>
              </div>
              <p>Generate css if necessary</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (options.css)
      css = _cssFromPluginObject(cssMap, {minify: options.minify, tags: <span class="number">0</span>})</pre></div></div>
            
        </li>
        
        
        <li id="section-92">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-92">&#182;</a>
              </div>
              <p>Output cssMap if necessary</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (!options.cssMap)
      cssMap = <span class="literal">undefined</span></pre></div></div>
            
        </li>
        
        
        <li id="section-93">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-93">&#182;</a>
              </div>
              <p>Generate HTML if necessary</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (options.html)
      html = acc.html.join(<span class="string">''</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-94">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-94">&#182;</a>
              </div>
              <p>Generate dom if necessary</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (options.dom){</pre></div></div>
            
        </li>
        
        
        <li id="section-95">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-95">&#182;</a>
              </div>
              <p>Remove the <oj> wrapping from the dom element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      dom = acc.dom.childNodes</pre></div></div>
            
        </li>
        
        
        <li id="section-96">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-96">&#182;</a>
              </div>
              <p>Cleanup inconsistencies of childNodes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (dom.length != <span class="literal">null</span>){</pre></div></div>
            
        </li>
        
        
        <li id="section-97">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-97">&#182;</a>
              </div>
              <p>Make dom a real array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        dom = _toArray(dom)</pre></div></div>
            
        </li>
        
        
        <li id="section-98">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-98">&#182;</a>
              </div>
              <p>Filter out anything that isn&#39;t a dom element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        dom = dom.filter(<span class="keyword">function</span>(v){<span class="keyword">return</span> oj.isDOM(v)})
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-99">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-99">&#182;</a>
              </div>
              <p>Ensure dom is null if empty</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (dom.length === <span class="number">0</span>)
        dom = <span class="literal">null</span></pre></div></div>
            
        </li>
        
        
        <li id="section-100">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-100">&#182;</a>
              </div>
              <p>Single elements are not returned as a list</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">else</span> <span class="keyword">if</span> (dom.length === <span class="number">1</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-101">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-101">&#182;</a>
              </div>
              <p>Reasoning: The common cases don&#39;t have multiple elements</p>
<p><html>,<body>, etc and this is abstracted for you anyway
with jQuery plugins</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        dom = dom[<span class="number">0</span>]
    }
    <span class="keyword">return</span> {
      html: html,
      dom: dom,
      css: css,
      cssMap: cssMap,
      types: acc.types,
      tags: acc.tags,
      inserts: acc.inserts
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-102">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-102">&#182;</a>
              </div>
              <p>_styleFromObject: Convert object to style string</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_styleFromObject</span><span class="params">(obj, options)</span>{</span>
    options = _extend({
      inline: <span class="literal">true</span>,
      indent: <span class="string">''</span>
    }, options)</pre></div></div>
            
        </li>
        
        
        <li id="section-103">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-103">&#182;</a>
              </div>
              <p>Trailing semi should only exist on when we aren&#39;t indenting</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    options.semi = !options.inline

    <span class="keyword">var</span> out = <span class="string">""</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-104">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-104">&#182;</a>
              </div>
              <p>Sort keys to create consistent output</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    keys = _keys(obj).sort(),</pre></div></div>
            
        </li>
        
        
        <li id="section-105">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-105">&#182;</a>
              </div>
              <p>Support indention and inlining</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    indent = options.indent != <span class="literal">null</span> ? options.indent : <span class="string">''</span>,
    newline = options.inline ? <span class="string">''</span> : <span class="string">'\n'</span>,
    ix, k, kFancy, semi

    <span class="keyword">for</span> (ix = <span class="number">0</span>; ix &lt; keys.length; ix++){
      kFancy = keys[ix]</pre></div></div>
            
        </li>
        
        
        <li id="section-106">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-106">&#182;</a>
              </div>
              <p>Add semi if it is not inline or it is not the last key</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      semi = options.semi || ix !== keys.length - <span class="number">1</span> ? <span class="string">";"</span> : <span class="string">''</span></pre></div></div>
            
        </li>
        
        
        <li id="section-107">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-107">&#182;</a>
              </div>
              <p>Allow keys to be camal case</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      k = _dasherize(kFancy)</pre></div></div>
            
        </li>
        
        
        <li id="section-108">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-108">&#182;</a>
              </div>
              <p>Collect css result for this key</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      out += <span class="string">""</span> + indent + k + <span class="string">":"</span> + obj[kFancy] + semi + newline
    }
    <span class="keyword">return</span> out
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-109">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-109">&#182;</a>
              </div>
              <p>_attributesFromObject: Convert object to attribute string with no special conversions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_attributesFromObject</span><span class="params">(obj)</span>{</span>
    <span class="keyword">if</span> (!oj.isPlainObject(obj))
      <span class="keyword">return</span> obj</pre></div></div>
            
        </li>
        
        
        <li id="section-110">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-110">&#182;</a>
              </div>
              <p>Pass through non objects</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> k, v, ix,
      out = <span class="string">''</span>,
      space = <span class="string">''</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-111">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-111">&#182;</a>
              </div>
              <p>Serialize attributes in order for consistent output</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      attrs = _keys(obj).sort()

    <span class="keyword">for</span> (ix = <span class="number">0</span>; ix &lt; attrs.length; ix++){
      k = attrs[ix]
      v = obj[k]</pre></div></div>
            
        </li>
        
        
        <li id="section-112">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-112">&#182;</a>
              </div>
              <p>Boolean attributes have no value</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (v === <span class="literal">true</span>)
        out += <span class="string">""</span> + space + k</pre></div></div>
            
        </li>
        
        
        <li id="section-113">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-113">&#182;</a>
              </div>
              <p>Other attributes have a value</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">else</span>
        out += <span class="string">""</span> + space + k + <span class="string">"=\""</span> + v + <span class="string">"\""</span>

      space = <span class="string">' '</span>
    }
    <span class="keyword">return</span> out
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-114">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-114">&#182;</a>
              </div>
              <p>_flattenCSSMap: Take an OJ cssMap and flatten it into the form
<code>&#39;plugin&#39; -&gt; &#39;@media query&#39; -&gt; &#39;selector&#39; -&gt;&#39;rulesMap&#39;</code></p>
<p>This method vastly simplifies <code>_cssFromPluginObject</code>
Nested, media, and comma definitions are resolved and merged</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_flattenCSSMap</span><span class="params">(cssMap)</span>{</span>
    <span class="keyword">var</span> flatMap = {}, plugin, cssMap_
    <span class="keyword">for</span> (plugin <span class="keyword">in</span> cssMap){
      cssMap_ = cssMap[plugin]
      _flattenCSSMap_(cssMap_, flatMap, [<span class="string">''</span>], [<span class="string">''</span>], plugin)
    }
    <span class="keyword">return</span> flatMap
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-115">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-115">&#182;</a>
              </div>
              <p>Recursive helper with accumulators (it outputs flatMapAcc)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_flattenCSSMap_</span><span class="params">(cssMap, flatMapAcc, selectorsAcc, mediasAcc, plugin)</span>{</span></pre></div></div>
            
        </li>
        
        
        <li id="section-116">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-116">&#182;</a>
              </div>
              <p>Built in media helpers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> acc, cur, inner, isMedia, mediaJoined, mediasNext, next, outer, parts, rules, selector, selectorJoined, selectorsNext, o, i,

    medias = {
      <span class="string">'widescreen'</span>: <span class="string">'only screen and (min-width: 1200px)'</span>,
      <span class="string">'monitor'</span>: <span class="string">''</span>,
      <span class="string">'tablet'</span>: <span class="string">'only screen and (min-width: 768px) and (max-width: 959px)'</span>,
      <span class="string">'phone'</span>: <span class="string">'only screen and (max-width: 767px)'</span>
    }

    <span class="keyword">for</span> (selector <span class="keyword">in</span> cssMap){
      rules = cssMap[selector]</pre></div></div>
            
        </li>
        
        
        <li id="section-117">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-117">&#182;</a>
              </div>
              <p>Base Case: Record our selector when <code>rules</code> is a value</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (<span class="keyword">typeof</span> rules !== <span class="string">'object'</span>){</pre></div></div>
            
        </li>
        
        
        <li id="section-118">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-118">&#182;</a>
              </div>
              <p>Join selectors and media accumulators with commas</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        selectorJoined = selectorsAcc.sort().join(<span class="string">','</span>)
        mediaJoined = mediasAcc.sort().join(<span class="string">','</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-119">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-119">&#182;</a>
              </div>
              <p>Prepend @media as that was removed previously when spliting into parts</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (mediaJoined !== <span class="string">''</span>)
          mediaJoined = <span class="string">"@media "</span> + mediaJoined</pre></div></div>
            
        </li>
        
        
        <li id="section-120">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-120">&#182;</a>
              </div>
              <p>Record the rule deeply in <code>flatMapAcc</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        _setObject(flatMapAcc, plugin, mediaJoined, selectorJoined, selector, rules)</pre></div></div>
            
        </li>
        
        
        <li id="section-121">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-121">&#182;</a>
              </div>
              <p>Recursive Case: Recurse on <code>rules</code> when it is an object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      } <span class="keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-122">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-122">&#182;</a>
              </div>
              <p>(r1) Media Query found: Generate the next media queries</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (selector.indexOf(<span class="string">'@media'</span>) === <span class="number">0</span>){
          isMedia = <span class="literal">true</span>
          mediasNext = next = []
          selectorsNext = selectorsAcc
          selector = (selector.slice(<span class="string">'@media'</span>.length)).trim()
          acc = mediasAcc</pre></div></div>
            
        </li>
        
        
        <li id="section-123">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-123">&#182;</a>
              </div>
              <p>(r2) Selector found: Generate the next selectors</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        } <span class="keyword">else</span> {
          isMedia = <span class="literal">false</span>
          selectorsNext = next = []
          mediasNext = mediasAcc
          acc = selectorsAcc
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-124">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-124">&#182;</a>
              </div>
              <p>Media queries and Selectors can be comma seperated</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        parts = _splitAndTrim(selector, <span class="string">','</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-125">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-125">&#182;</a>
              </div>
              <p>Media queries have convience substitutions like &#39;phone&#39;, &#39;tablet&#39;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (isMedia){
          parts = parts.map(<span class="keyword">function</span>(v){
            <span class="keyword">return</span> _d(medias[v], v)
          })
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-126">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-126">&#182;</a>
              </div>
              <p>Determine the next selectors or media queries</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">for</span> (o = <span class="number">0</span>; o &lt; acc.length; o++){
          outer = acc[o]

          <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; parts.length; i++){
            inner = parts[i]</pre></div></div>
            
        </li>
        
        
        <li id="section-127">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-127">&#182;</a>
              </div>
              <p>When <code>&amp;</code> is not present just insert in front with the correct join operator</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            cur = inner
            <span class="keyword">if</span> ((inner.indexOf(<span class="string">'&amp;'</span>)) === -<span class="number">1</span> &amp;&amp; outer !== <span class="string">''</span>)
              cur = (isMedia ? <span class="string">'&amp; and '</span> : <span class="string">'&amp; '</span>) + cur

            next.push(cur.replace(<span class="regexp">/&amp;/g</span>, outer))
          }
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-128">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-128">&#182;</a>
              </div>
              <p>Recurse through objects after calculating the next selectors</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        _flattenCSSMap_(
          rules, flatMapAcc, selectorsNext, mediasNext, plugin
        )
      }
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-129">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-129">&#182;</a>
              </div>
              <p>_styleClassFromPlugin: Abstract plugin <style> naming</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_styleClassFromPlugin</span><span class="params">(plugin)</span>{</span><span class="keyword">return</span> <span class="string">""</span> + plugin + <span class="string">"-style"</span>}</pre></div></div>
            
        </li>
        
        
        <li id="section-130">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-130">&#182;</a>
              </div>
              <p>_styleTagFromMediaObject: Abstract creating <style> tag</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj._styleTagFromMediaObject = <span class="keyword">function</span>(plugin, mediaMap, options){
    <span class="keyword">var</span> newline = (options != <span class="literal">null</span> ? options.minify : <span class="keyword">void</span> <span class="number">0</span>) ? <span class="string">''</span> : <span class="string">'\n'</span>,
      css = _cssFromMediaObject(mediaMap, options)
    <span class="keyword">return</span> <span class="string">"&lt;style class=\""</span> + (_styleClassFromPlugin(plugin)) + <span class="string">"\"&gt;"</span> + newline + css + <span class="string">"&lt;/style&gt;"</span>
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-131">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-131">&#182;</a>
              </div>
              <p>_cssFromMediaObject: Convert css from a flattened mediaMap rule object.
The rule object is of the form:
mediaQuery =&gt; selector =&gt; rulesObject</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_cssFromMediaObject</span><span class="params">(mediaMap, options)</span>{</span>
    options = _d(options, {})

    <span class="keyword">var</span> indent, indentRule, media, rules, selector, selectorMap, space, styles,

      minify = options.minify != <span class="literal">null</span> ? options.minify : <span class="number">0</span>,
      tags = options.tags != <span class="literal">null</span> ? options.tags : <span class="number">0</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-132">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-132">&#182;</a>
              </div>
              <p>Deterine what output characters are needed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      newline = minify ? <span class="string">''</span> : <span class="string">'\n'</span>,
      space = minify ? <span class="string">''</span> : <span class="string">' '</span>,
      inline = minify,
      css = <span class="string">''</span></pre></div></div>
            
        </li>
        
        
        <li id="section-133">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-133">&#182;</a>
              </div>
              <p>Build css for media =&gt; selector =&gt;  rules</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">for</span> (media <span class="keyword">in</span> mediaMap){
      selectorMap = mediaMap[media]</pre></div></div>
            
        </li>
        
        
        <li id="section-134">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-134">&#182;</a>
              </div>
              <p>Serialize media query</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (media){
        media = media.replace(<span class="regexp">/,/g</span>, <span class="string">","</span> + space)
        css += <span class="string">""</span> + media + space + <span class="string">"{"</span> + newline
      }

      <span class="keyword">for</span> (selector <span class="keyword">in</span> selectorMap){
        styles = selectorMap[selector]
        indent = (!minify) &amp;&amp; media ? <span class="string">'\t'</span> : <span class="string">''</span></pre></div></div>
            
        </li>
        
        
        <li id="section-135">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-135">&#182;</a>
              </div>
              <p>Serialize selector</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        selector = selector.replace(<span class="regexp">/,/g</span>, <span class="string">","</span> + newline)
        css += <span class="string">""</span> + indent + selector + space + <span class="string">"{"</span> + newline</pre></div></div>
            
        </li>
        
        
        <li id="section-136">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-136">&#182;</a>
              </div>
              <p>Serialize style rules</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        indentRule = !minify ? indent + <span class="string">'\t'</span> : indent
        rules = _styleFromObject(styles, {
          inline: inline,
          indent: indentRule
        })
        css += rules + indent + <span class="string">'}'</span> + newline
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-137">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-137">&#182;</a>
              </div>
              <p>End media query</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (media !== <span class="string">''</span>)
        css += <span class="string">'}'</span> + newline

    }
    <span class="keyword">try</span> {
      css = oj._minifyCSS(css, options)
    } <span class="keyword">catch</span> (e){
      <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">"css minification error: "</span> + e.message + <span class="string">"\nCould not minify:\n"</span> + css)
    }
    <span class="keyword">return</span> css
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-138">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-138">&#182;</a>
              </div>
              <p>_cssFromPluginObject: Convert flattened css selectors and rules to a string
pluginMaps are of the form:
pluginName =&gt; mediaQuery =&gt; selector =&gt; rulesObject
minify:false will output newlines
tags:true will output the css in <code>&lt;style&gt;</code> tags</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_cssFromPluginObject</span><span class="params">(flatCSSMap, options)</span>{</span>
    options = _d(options, {})

    <span class="keyword">var</span> mediaMap, plugin,
      minify = options.minify != <span class="literal">null</span> ? options.minify : <span class="number">0</span>,
      tags = options.tags != <span class="literal">null</span> ? options.tags : <span class="number">0</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-139">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-139">&#182;</a>
              </div>
              <p>Deterine what output characters are needed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      newline = minify ? <span class="string">''</span> : <span class="string">'\n'</span>,
      space = minify ? <span class="string">''</span> : <span class="string">' '</span>,
      inline = minify,
      css = <span class="string">''</span>

    <span class="keyword">for</span> (plugin <span class="keyword">in</span> flatCSSMap){
      mediaMap = flatCSSMap[plugin]
      <span class="keyword">if</span> (tags)
        css += <span class="string">"&lt;style class=\""</span> + plugin + <span class="string">"-style\"&gt;"</span> + newline</pre></div></div>
            
        </li>
        
        
        <li id="section-140">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-140">&#182;</a>
              </div>
              <p>Serialize CSS with potential minification</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      css += _cssFromMediaObject(mediaMap, options)
      <span class="keyword">if</span> (tags)
        css += <span class="string">""</span> + newline + <span class="string">"&lt;/style&gt;"</span> + newline
    }
    <span class="keyword">return</span> css
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-141">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-141">&#182;</a>
              </div>
              <p>_compileDeeper: Recursive helper for compiling that wraps indention</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_compileDeeper</span><span class="params">(method, ojml, options)</span>{</span>
    <span class="keyword">var</span> i = options.indent
    options.indent += <span class="string">'\t'</span>
    method(ojml, options)
    options.indent = i
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-142">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-142">&#182;</a>
              </div>
              <p>_compileAny Recursive helper for compiling ojml or any type</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_compileAny</span><span class="params">(any, options)</span>{</span></pre></div></div>
            
        </li>
        
        
        <li id="section-143">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-143">&#182;</a>
              </div>
              <p>Array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (oj.isArray(any))
      _compileTag(any, options)</pre></div></div>
            
        </li>
        
        
        <li id="section-144">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-144">&#182;</a>
              </div>
              <p>String</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">else</span> <span class="keyword">if</span> (oj.isString(any)){
      <span class="keyword">if</span> (options.html != <span class="literal">null</span>)
        options.html.push(any)

      <span class="keyword">if</span> (any.length &gt; <span class="number">0</span> &amp;&amp; any[<span class="number">0</span>] === <span class="string">'&lt;'</span>){
        <span class="keyword">var</span> root = document.createElement(<span class="string">'div'</span>)
        root.innerHTML = any
        <span class="keyword">if</span> (options.dom != <span class="literal">null</span>)
          options.dom.appendChild(root)
      } <span class="keyword">else</span> {
        <span class="keyword">if</span> (options.dom != <span class="literal">null</span>)
          options.dom.appendChild(document.createTextNode(any))
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-145">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-145">&#182;</a>
              </div>
              <p>Boolean or Number</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    } <span class="keyword">else</span> <span class="keyword">if</span> (oj.isBoolean(any) || oj.isNumber(any)){
      <span class="keyword">if</span> (options.html != <span class="literal">null</span>)
        options.html.push(<span class="string">""</span> + any)

      <span class="keyword">if</span> (options.dom != <span class="literal">null</span>)
        options.dom.appendChild(document.createTextNode(<span class="string">""</span> + any))</pre></div></div>
            
        </li>
        
        
        <li id="section-146">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-146">&#182;</a>
              </div>
              <p>Function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    } <span class="keyword">else</span> <span class="keyword">if</span> (oj.isFunction(any)){</pre></div></div>
            
        </li>
        
        
        <li id="section-147">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-147">&#182;</a>
              </div>
              <p>Wrap function call to allow full oj generation within any</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">var</span> data = options.data || {};
      _compileAny(oj(<span class="keyword">function</span>(){any.call(data, data)}), options);</pre></div></div>
            
        </li>
        
        
        <li id="section-148">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-148">&#182;</a>
              </div>
              <p>Date</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    } <span class="keyword">else</span> <span class="keyword">if</span> (oj.isDate(any)){
      <span class="keyword">if</span> (options.html != <span class="literal">null</span>)
        options.html.push(<span class="string">""</span> + (any.toLocaleString()))

      <span class="keyword">if</span> (options.dom != <span class="literal">null</span>)
        options.dom.appendChild(document.createTextNode(<span class="string">""</span> + (any.toLocaleString())))</pre></div></div>
            
        </li>
        
        
        <li id="section-149">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-149">&#182;</a>
              </div>
              <p>OJ Type or Instance</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    } <span class="keyword">else</span> <span class="keyword">if</span> (oj.isOJ(any)){
      <span class="keyword">if</span> (options.types != <span class="literal">null</span>)
        options.types.push(any)

      <span class="keyword">if</span> (options.html != <span class="literal">null</span>)
        options.html.push(any.toHTML(options))

      <span class="keyword">if</span> (options.dom != <span class="literal">null</span>)
        options.dom.appendChild(any.toDOM(options))

      <span class="keyword">if</span> (options.css != <span class="literal">null</span>)
        _extend(options.css, any.toCSSMap(options))
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-150">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-150">&#182;</a>
              </div>
              <p>Do nothing for: null, undefined, object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  }</pre></div></div>
            
        </li>
        
        
        <li id="section-151">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-151">&#182;</a>
              </div>
              <p>_compileTag: Recursive helper for compiling ojml tags</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_compileTag</span><span class="params">(ojml, options)</span>{</span></pre></div></div>
            
        </li>
        
        
        <li id="section-152">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-152">&#182;</a>
              </div>
              <p>Empty list compiles to undefined</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (ojml.length === <span class="number">0</span>) <span class="keyword">return</span></pre></div></div>
            
        </li>
        
        
        <li id="section-153">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-153">&#182;</a>
              </div>
              <p>The first part of ojml is the tag</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> tag = ojml[<span class="number">0</span>],
      tagType = <span class="keyword">typeof</span> tag,
      u = oj.unionArguments(ojml.slice(<span class="number">1</span>)),
      attributes = u.options,
      children = u.args,
      styles,
      selector</pre></div></div>
            
        </li>
        
        
        <li id="section-154">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-154">&#182;</a>
              </div>
              <p>Allow the tag parameter to be &#39;table&#39; (string) or oj.table (function) or oj.Table (object)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> ((tagType === <span class="string">'function'</span> || tagType === <span class="string">'object'</span>))
      tag = _d(_getTagName(tag), tag)</pre></div></div>
            
        </li>
        
        
        <li id="section-155">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-155">&#182;</a>
              </div>
              <p>Fail if no tag found</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (!(oj.isString(tag) &amp;&amp; tag.length &gt; <span class="number">0</span>))
      _e(<span class="string">'compile'</span>, <span class="string">'tag name is missing'</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-156">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-156">&#182;</a>
              </div>
              <p>Record tag as encountered</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    options.tags[tag] = <span class="literal">true</span></pre></div></div>
            
        </li>
        
        
        <li id="section-157">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-157">&#182;</a>
              </div>
              <p>Instance oj object if tag is capitalized</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (_isCapitalLetter(tag[<span class="number">0</span>]))
      <span class="keyword">return</span> _compileDeeper(_compileAny, <span class="keyword">new</span> oj[tag](ojml.slice(<span class="number">1</span>)), options)</pre></div></div>
            
        </li>
        
        
        <li id="section-158">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-158">&#182;</a>
              </div>
              <p>Compile to css if requested</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (options.css &amp;&amp; tag === <span class="string">'css'</span>){</pre></div></div>
            
        </li>
        
        
        <li id="section-159">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-159">&#182;</a>
              </div>
              <p>Extend options.css with rules</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">for</span> (selector <span class="keyword">in</span> attributes){
        styles = attributes[selector]
        options.css[<span class="string">'oj'</span>] = _d(options.css[<span class="string">'oj'</span>], {})
        options.css[<span class="string">'oj'</span>][selector] = _d(options.css[<span class="string">'oj'</span>][selector], {})
        _extend(options.css[<span class="string">'oj'</span>][selector], styles)
      }
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-160">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-160">&#182;</a>
              </div>
              <p>Compile DOCTYPE as special case because it is not really an element
It has attributes with spaces and cannot be created by dom manipulation
In this way it is HTML generation only.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (tag === <span class="string">'!DOCTYPE'</span>){
      _v(<span class="string">'compile'</span>, <span class="number">1</span>, ojml[<span class="number">1</span>], <span class="string">'string'</span>)
      <span class="keyword">if</span> (!options.ignore[tag]){
        <span class="keyword">if</span> (options.html)
          options.html.push(<span class="string">"&lt;"</span> + tag + <span class="string">" "</span> + ojml[<span class="number">1</span>] + <span class="string">"&gt;"</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-161">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-161">&#182;</a>
              </div>
              <p>options.dom is purposely ignored</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      }
      <span class="keyword">return</span>
    }
    <span class="keyword">if</span> (!options.ignore[tag]){
      <span class="keyword">var</span> events = _attributesProcessedForOJ(attributes), el</pre></div></div>
            
        </li>
        
        
        <li id="section-162">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-162">&#182;</a>
              </div>
              <p>Compile to dom if requested
Add dom element with attributes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (options.dom &amp;&amp; (<span class="keyword">typeof</span> document !== _udf &amp;&amp; document !== <span class="literal">null</span>)){</pre></div></div>
            
        </li>
        
        
        <li id="section-163">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-163">&#182;</a>
              </div>
              <p>Create element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        el = document.createElement(tag)</pre></div></div>
            
        </li>
        
        
        <li id="section-164">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-164">&#182;</a>
              </div>
              <p>Add self to parent</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (oj.isDOMElement(options.dom))
          options.dom.appendChild(el)</pre></div></div>
            
        </li>
        
        
        <li id="section-165">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-165">&#182;</a>
              </div>
              <p>Push ourselves on the dom stack (to handle children)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        options.dom = el</pre></div></div>
            
        </li>
        
        
        <li id="section-166">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-166">&#182;</a>
              </div>
              <p>Set attributes in sorted order for consistency</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (oj.isPlainObject(attributes)){
          <span class="keyword">var</span> keys = _keys(attributes).sort(), ix, attrName, attrValue
          <span class="keyword">for</span> (ix = <span class="number">0</span>; ix &lt; keys.length; ix++){
            attrName = keys[ix]
            attrValue = attributes[attrName]</pre></div></div>
            
        </li>
        
        
        <li id="section-167">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-167">&#182;</a>
              </div>
              <p>Boolean attributes have no value</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="keyword">if</span> (attrValue === <span class="literal">true</span>)
              el.setAttributeNode(document.createAttribute(attrName))
            <span class="keyword">else</span>
              el.setAttribute(attrName, attrValue)
          }
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-168">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-168">&#182;</a>
              </div>
              <p>Bind events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        _attributesBindEventsToDOM(events, el, options.inserts)
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-169">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-169">&#182;</a>
              </div>
              <p>Compile to html if requested
Add tag with attributes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (options.html){
        <span class="keyword">var</span> attr = _d(_attributesFromObject(attributes), <span class="string">''</span>),
          space = attr === <span class="string">''</span> ? <span class="string">''</span> : <span class="string">' '</span>
        options.html.push(<span class="string">"&lt;"</span> + tag + space + attr + <span class="string">"&gt;"</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-170">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-170">&#182;</a>
              </div>
              <p>Recurse through children if this tag isn&#39;t ignored deeply</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      }
    }
    <span class="keyword">if</span> (options.ignore[tag] !== <span class="string">'deep'</span>){
      <span class="keyword">for</span> (ix = <span class="number">0</span>; ix &lt; children.length; ix++){
        <span class="keyword">var</span> child = children[ix]</pre></div></div>
            
        </li>
        
        
        <li id="section-171">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-171">&#182;</a>
              </div>
              <p>Skip indention if there is only one child</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (options.html != <span class="literal">null</span> &amp;&amp; !options.minify &amp;&amp; children.length &gt; <span class="number">1</span>)
          options.html.push(<span class="string">"\n\t"</span> + options.indent)
        _compileDeeper(_compileAny, child, options)
      }
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-172">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-172">&#182;</a>
              </div>
              <p>Skip indention if there is only one child</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (options.html != <span class="literal">null</span> &amp;&amp; !options.minify &amp;&amp; children.length &gt; <span class="number">1</span>)
      options.html.push(<span class="string">"\n"</span> + options.indent)</pre></div></div>
            
        </li>
        
        
        <li id="section-173">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-173">&#182;</a>
              </div>
              <p>End html tag if you have children or your tag closes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (!options.ignore[tag]){</pre></div></div>
            
        </li>
        
        
        <li id="section-174">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-174">&#182;</a>
              </div>
              <p>Close tag if html</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (options.html != <span class="literal">null</span> &amp;&amp; (children.length &gt; <span class="number">0</span> || oj.tag.isClosed(tag)))
        options.html.push(<span class="string">"&lt;/"</span> + tag + <span class="string">"&gt;"</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-175">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-175">&#182;</a>
              </div>
              <p>Pop ourselves if dom</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (options.dom)
        options.dom = options.dom.parentNode
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-176">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-176">&#182;</a>
              </div>
              <p>_attributesProcessedForOJ: Process attributes to make them easier to use</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_attributesProcessedForOJ</span><span class="params">(attr)</span>{</span>
    <span class="keyword">var</span> jqEvents = {bind:<span class="number">1</span>, on:<span class="number">1</span>, off:<span class="number">1</span>, live:<span class="number">1</span>, blur:<span class="number">1</span>, change:<span class="number">1</span>, click:<span class="number">1</span>, dblclick:<span class="number">1</span>, focus:<span class="number">1</span>, focusin:<span class="number">1</span>, focusout:<span class="number">1</span>, hover:<span class="number">1</span>, keydown:<span class="number">1</span>, keypress:<span class="number">1</span>, keyup:<span class="number">1</span>, mousedown:<span class="number">1</span>, mouseenter:<span class="number">1</span>, mouseleave:<span class="number">1</span>, mousemove:<span class="number">1</span>, mouseout:<span class="number">1</span>, mouseup:<span class="number">1</span>, ready:<span class="number">1</span>, resize:<span class="number">1</span>, scroll:<span class="number">1</span>, select:<span class="number">1</span>, insert:<span class="number">1</span>},
    events, k, v</pre></div></div>
            
        </li>
        
        
        <li id="section-177">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-177">&#182;</a>
              </div>
              <p>Allow attributes to alias c to class and use arrays instead of space seperated strings
Convert to c and class from arrays to strings</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (oj.isArray(attr != <span class="literal">null</span> ? attr.c : <span class="keyword">void</span> <span class="number">0</span>))
      attr.c = attr.c.join(<span class="string">' '</span>)

    <span class="keyword">if</span> (oj.isArray(attr != <span class="literal">null</span> ? attr[<span class="string">"class"</span>] : <span class="keyword">void</span> <span class="number">0</span>))
      attr[<span class="string">"class"</span>] = attr[<span class="string">"class"</span>].join(<span class="string">' '</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-178">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-178">&#182;</a>
              </div>
              <p>Move c to class</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> ((attr != <span class="literal">null</span> ? attr.c : <span class="keyword">void</span> <span class="number">0</span>) != <span class="literal">null</span>){
      <span class="keyword">if</span> ((attr != <span class="literal">null</span> ? attr[<span class="string">"class"</span>] : <span class="keyword">void</span> <span class="number">0</span>) != <span class="literal">null</span>)
        attr[<span class="string">"class"</span>] += <span class="string">' '</span> + attr.c
      <span class="keyword">else</span>
        attr[<span class="string">"class"</span>] = attr.c
      <span class="keyword">delete</span> attr.c
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-179">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-179">&#182;</a>
              </div>
              <p>Allow attributes to take style as an object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (oj.isPlainObject(attr != <span class="literal">null</span> ? attr.style : <span class="keyword">void</span> <span class="number">0</span>)){
      attr.style = _styleFromObject(attr.style, {
        inline: <span class="literal">true</span>
      })
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-180">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-180">&#182;</a>
              </div>
              <p>Omit attributes with values of false, null, or undefined</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (oj.isPlainObject(attr)){
      <span class="keyword">for</span> (k <span class="keyword">in</span> attr){
        v = attr[k]
        <span class="keyword">if</span> (v === <span class="literal">null</span> || v === <span class="keyword">void</span> <span class="number">0</span> || v === <span class="literal">false</span>)
          <span class="keyword">delete</span> attr[k]
      }
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-181">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-181">&#182;</a>
              </div>
              <p>Filter out jquery events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    events = {}
    <span class="keyword">if</span> (oj.isPlainObject(attr)){</pre></div></div>
            
        </li>
        
        
        <li id="section-182">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-182">&#182;</a>
              </div>
              <p>Filter out attributes that are jquery events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">for</span> (k <span class="keyword">in</span> attr){
        v = attr[k]</pre></div></div>
            
        </li>
        
        
        <li id="section-183">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-183">&#182;</a>
              </div>
              <p>If this attribute (k) is an event</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (jqEvents[k] != <span class="literal">null</span>){
          events[k] = v
          <span class="keyword">delete</span> attr[k]
        }
      }
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-184">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-184">&#182;</a>
              </div>
              <p>Returns bindable events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">return</span> events
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-185">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-185">&#182;</a>
              </div>
              <p>Bind events to dom</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_attributesBindEventsToDOM</span><span class="params">(events, el, inserts)</span>{</span>
    <span class="keyword">var</span> ek, ev, _results = []
    <span class="keyword">for</span> (ek <span class="keyword">in</span> events){
      ev = events[ek]
      _a(oj.$ != <span class="literal">null</span>, <span class="string">"jquery is missing when binding a '"</span> + ek + <span class="string">"' event"</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-186">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-186">&#182;</a>
              </div>
              <p>accumulate insert events manually since DOMNodeInserted is slow and depreciated</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (ek == <span class="string">'insert'</span> &amp;&amp; inserts)
        inserts.push(<span class="keyword">function</span>(){ev.call(el,el)})
      <span class="keyword">else</span> <span class="keyword">if</span> (oj.isArray(ev))
        _results.push(oj.$(el)[ek].apply(<span class="keyword">this</span>, ev))
      <span class="keyword">else</span>
        _results.push(oj.$(el)[ek](ev))
    }
    <span class="keyword">return</span> _results
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-187">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-187">&#182;</a>
              </div>
              <p>oj.toHTML: Compile directly to HTML only</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.toHTML = <span class="keyword">function</span>(options, ojml){</pre></div></div>
            
        </li>
        
        
        <li id="section-188">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-188">&#182;</a>
              </div>
              <p>Options is optional</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (!oj.isPlainObject(options)){
      ojml = options
      options = {}
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-189">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-189">&#182;</a>
              </div>
              <p>Create html only</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _extend(options, {dom: <span class="number">0</span>, js: <span class="number">0</span>, html: <span class="number">1</span>, css: <span class="number">0</span>})
    <span class="keyword">return</span> (oj.compile(options, ojml)).html
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-190">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-190">&#182;</a>
              </div>
              <p>oj.toCSS: Compile directly to CSS only</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.toCSS = <span class="keyword">function</span>(options, ojml){</pre></div></div>
            
        </li>
        
        
        <li id="section-191">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-191">&#182;</a>
              </div>
              <p>Options is optional</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (!oj.isPlainObject(options)){
      ojml = options
      options = {}
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-192">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-192">&#182;</a>
              </div>
              <p>Create css only</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _extend(options, {dom: <span class="number">0</span>, js: <span class="number">0</span>, html: <span class="number">0</span>, css: <span class="number">1</span>})
    <span class="keyword">return</span> (oj.compile(options, ojml)).css
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-193">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-193">&#182;</a>
              </div>
              <p>_inherit: Inherit Child from Parent
Based on, but sadly incompatable with, coffeescript inheritance</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_inherit</span><span class="params">(Child, Parent)</span>{</span>
    <span class="keyword">var</span> Ctor, prop</pre></div></div>
            
        </li>
        
        
        <li id="section-194">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-194">&#182;</a>
              </div>
              <p>Copy class properties and methods</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">for</span> (prop <span class="keyword">in</span> Parent)
      oj.copyProperty(Child, Parent, prop)

    Ctor = <span class="keyword">function</span>(){}
    Ctor.prototype = Parent.prototype
    Child.prototype = <span class="keyword">new</span> Ctor()</pre></div></div>
            
        </li>
        
        
        <li id="section-195">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-195">&#182;</a>
              </div>
              <p>Provide easy access for base class methods
Example: Parent.base.methodName(arguments...)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Child.base = Child.__super__ = Parent.prototype
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-196">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-196">&#182;</a>
              </div>
              <p>_construct(Type, arg1, arg2, ...): Construct type as if using call</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_construct</span><span class="params">(Type)</span>{</span><span class="keyword">return</span> <span class="keyword">new</span> (FunP.bind.apply(Type, arguments))}</pre></div></div>
            
        </li>
        
        
        <li id="section-197">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-197">&#182;</a>
              </div>
              <p>oj.createType: Create OJ type with args object supporting:
base, constructor, properties, and methods</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.createType = <span class="keyword">function</span>(name, args){

    args = _d(args, {})
    args.methods = _d(args.methods, {})
    args.properties = _d(args.properties, {})

    _v(<span class="string">'createType'</span>, <span class="number">1</span>, name, <span class="string">'string'</span>)
    _v(<span class="string">'createType'</span>, <span class="number">2</span>, args, <span class="string">'object'</span>)

    <span class="keyword">var</span> methodKeys, propKeys, typeProps,</pre></div></div>
            
        </li>
        
        
        <li id="section-198">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-198">&#182;</a>
              </div>
              <p>When auto newing you need to delay construct the properties
or they will be constructed twice.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      delay = <span class="string">'__DELAYED__'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-199">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-199">&#182;</a>
              </div>
              <p>Constructor to return</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      Out = <span class="keyword">new</span> Function(<span class="string">"return function "</span> + name + <span class="string">"(){\n  var _t = this;\n  if ( !(this instanceof "</span> + name + <span class="string">") ){\n    _t = new "</span> + name + <span class="string">"('"</span> + delay + <span class="string">"');\n    _t.__autonew__ = true;\n  }\n\n  if (arguments &amp;&amp; arguments[0] != '"</span> + delay + <span class="string">"')\n    "</span> + name + <span class="string">".prototype.constructor.apply(_t, arguments);\n\n  return _t;\n}"</span>)()</pre></div></div>
            
        </li>
        
        
        <li id="section-200">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-200">&#182;</a>
              </div>
              <p>Default the constructor to call its base</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (args.base != <span class="literal">null</span> &amp;&amp; (args.constructor == <span class="literal">null</span> || (!args.hasOwnProperty(<span class="string">'constructor'</span>)))){
      args.constructor = <span class="keyword">function</span>(){
        <span class="keyword">return</span> Out.base != <span class="literal">null</span> ?  Out.base.constructor.apply(<span class="keyword">this</span>, arguments) : <span class="keyword">void</span> <span class="number">0</span>
      }
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-201">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-201">&#182;</a>
              </div>
              <p>Inherit if necessary</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (args.base != <span class="literal">null</span>)
      _inherit(Out, args.base)</pre></div></div>
            
        </li>
        
        
        <li id="section-202">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-202">&#182;</a>
              </div>
              <p>Add the constructor as a method</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    oj.addMethod(Out.prototype, <span class="string">'constructor'</span>, args.constructor)</pre></div></div>
            
        </li>
        
        
        <li id="section-203">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-203">&#182;</a>
              </div>
              <p>Mark new type and its instances with a non-enumerable type and isOJ properties</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    typeProps = {
      type: {
        value: Out,
        writable: <span class="literal">false</span>,
        enumerable: <span class="literal">false</span>
      },
      typeName: {
        value: name,
        writable: <span class="literal">false</span>,
        enumerable: <span class="literal">false</span>
      },
      isOJ: {
        value: <span class="literal">true</span>,
        writable: <span class="literal">false</span>,
        enumerable: <span class="literal">false</span>
      }
    }
    oj.addProperties(Out, typeProps)
    oj.addProperties(Out.prototype, typeProps)</pre></div></div>
            
        </li>
        
        
        <li id="section-204">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-204">&#182;</a>
              </div>
              <p>Add properties all oj Types have</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    propKeys = (_keys(args.properties)).sort()
    <span class="keyword">if</span> (Out.prototype.properties != <span class="literal">null</span>)
      propKeys = uniqueSort(Out.prototype.properties.concat(propKeys))

    oj.addProperty(Out.prototype, <span class="string">'properties'</span>, {
      value: propKeys,
      writable: <span class="literal">false</span>,
      enumerable: <span class="literal">false</span>
    })</pre></div></div>
            
        </li>
        
        
        <li id="section-205">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-205">&#182;</a>
              </div>
              <p>Add methods helper to instance</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    methodKeys = (_keys(args.methods)).sort()
    <span class="keyword">if</span> (Out.prototype.methods != <span class="literal">null</span>)
      methodKeys = uniqueSort(Out.prototype.methods.concat(methodKeys))

    oj.addProperty(Out.prototype, <span class="string">'methods'</span>, {
      value: methodKeys,
      writable: <span class="literal">false</span>,
      enumerable: <span class="literal">false</span>
    })</pre></div></div>
            
        </li>
        
        
        <li id="section-206">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-206">&#182;</a>
              </div>
              <p>Add methods all oj Types have</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _extend(args.methods, {</pre></div></div>
            
        </li>
        
        
        <li id="section-207">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-207">&#182;</a>
              </div>
              <p>get: Get property by key or get all properties</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      get: <span class="keyword">function</span>(k){</pre></div></div>
            
        </li>
        
        
        <li id="section-208">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-208">&#182;</a>
              </div>
              <p>get specific property</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (oj.isString(k)){
          <span class="keyword">if</span> (<span class="keyword">this</span>.has(k))
            <span class="keyword">return</span> <span class="keyword">this</span>[k]</pre></div></div>
            
        </li>
        
        
        <li id="section-209">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-209">&#182;</a>
              </div>
              <p>get all properties</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        } <span class="keyword">else</span> {
          <span class="keyword">var</span> out = {}, ix, p
          <span class="keyword">for</span> (ix = <span class="number">0</span>; ix &lt; <span class="keyword">this</span>.properties.length; ix++){
            p = <span class="keyword">this</span>.properties[ix]
            out[p] = <span class="keyword">this</span>[p]
          }
          <span class="keyword">return</span> out
        }
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-210">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-210">&#182;</a>
              </div>
              <p>set: Set property by key, or set all properties with object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      set: <span class="keyword">function</span>(k, v){
        <span class="keyword">var</span> key, obj = k, value</pre></div></div>
            
        </li>
        
        
        <li id="section-211">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-211">&#182;</a>
              </div>
              <p>Optionally take key, value instead of object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (!oj.isPlainObject(k)){
          obj = {}
          obj[k] = v
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-212">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-212">&#182;</a>
              </div>
              <p>Set all keys that are valid properties</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">for</span> (key <span class="keyword">in</span> obj){
          value = obj[key]
          <span class="keyword">if</span> (<span class="keyword">this</span>.has(key)){
            <span class="keyword">this</span>[key] = value
          }
        }
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-213">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-213">&#182;</a>
              </div>
              <p>has: Determine if property exists</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      has: <span class="keyword">function</span>(k){<span class="keyword">return</span> <span class="keyword">this</span>.properties.some(<span class="keyword">function</span>(v){<span class="keyword">return</span> v === k})},</pre></div></div>
            
        </li>
        
        
        <li id="section-214">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-214">&#182;</a>
              </div>
              <p>can: Determine if method exists</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      can: <span class="keyword">function</span>(k){<span class="keyword">return</span> <span class="keyword">this</span>.methods.some(<span class="keyword">function</span>(v){<span class="keyword">return</span> v === k})},</pre></div></div>
            
        </li>
        
        
        <li id="section-215">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-215">&#182;</a>
              </div>
              <p>toJSON: Use properties to generate json</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      toJSON: <span class="keyword">function</span>(){
        <span class="keyword">var</span> json = {},
          prop,
          ix = <span class="number">0</span>
        <span class="keyword">for</span> (;ix &lt; <span class="keyword">this</span>.properties.length; ix++){
          prop = <span class="keyword">this</span>.properties[ix]
          json[prop] = <span class="keyword">this</span>[prop]
        }
        <span class="keyword">return</span> json
      }
    })</pre></div></div>
            
        </li>
        
        
        <li id="section-216">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-216">&#182;</a>
              </div>
              <p>Add methods</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    oj.addMethods(Out.prototype, args.methods)</pre></div></div>
            
        </li>
        
        
        <li id="section-217">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-217">&#182;</a>
              </div>
              <p>Add the properties</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    oj.addProperties(Out.prototype, args.properties)
    <span class="keyword">return</span> Out
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-218">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-218">&#182;</a>
              </div>
              <p>_createQuietType: Takes an OJ Type and creates the _Type that doesn&#39;t emit</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _createQuietType = <span class="keyword">function</span>(typeName){
    <span class="keyword">return</span> oj[_getQuietTagName(typeName)] = <span class="keyword">function</span>(){
      <span class="keyword">return</span> _construct.apply(<span class="literal">null</span>, [oj[typeName]].concat(slice.call(arguments), [{
        __quiet__: <span class="number">1</span>
      }]))
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-219">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-219">&#182;</a>
              </div>
              <p>oj.createEnum</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.createEnum = <span class="keyword">function</span>(name, args){_e(<span class="string">'createEnum'</span>, <span class="string">'NYI'</span>)}</pre></div></div>
            
        </li>
        
        
        <li id="section-220">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-220">&#182;</a>
              </div>
              <p>oj.View</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.View = oj.createType(<span class="string">'View'</span>, {</pre></div></div>
            
        </li>
        
        
        <li id="section-221">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-221">&#182;</a>
              </div>
              <p>Views are special objects map properties together. This is a union of arguments
With the remaining arguments becoming a list</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    constructor: <span class="keyword">function</span>(){
      _a(oj.isDOM(<span class="keyword">this</span>.el), <span class="keyword">this</span>.typeName, <span class="string">'constructor did not set this.el'</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-222">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-222">&#182;</a>
              </div>
              <p>Set instance on @el</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      _setInstanceOnElement(<span class="keyword">this</span>.el, <span class="keyword">this</span>)

      <span class="keyword">var</span> u = oj.unionArguments(arguments),
        options = u.options,
        args = u.args</pre></div></div>
            
        </li>
        
        
        <li id="section-223">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-223">&#182;</a>
              </div>
              <p>Emit as a tag if it isn&#39;t quiet or used new keyword</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (<span class="keyword">this</span>.__autonew__ &amp;&amp; !options.__quiet__)
        <span class="keyword">this</span>.emit()</pre></div></div>
            
        </li>
        
        
        <li id="section-224">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-224">&#182;</a>
              </div>
              <p>Remove quiet flag as it has served its purpose</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (options.__quiet__ != <span class="literal">null</span>)
        <span class="keyword">delete</span> options.__quiet__</pre></div></div>
            
        </li>
        
        
        <li id="section-225">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-225">&#182;</a>
              </div>
              <p>Add class oj-typeName</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">this</span>.$el.addClass(<span class="string">"oj-"</span> + <span class="keyword">this</span>.typeName)</pre></div></div>
            
        </li>
        
        
        <li id="section-226">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-226">&#182;</a>
              </div>
              <p>Views automatically set all options to their properties
arguments directly to properties</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">this</span>.set(options)</pre></div></div>
            
        </li>
        
        
        <li id="section-227">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-227">&#182;</a>
              </div>
              <p>Remove options that were set</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      options = _clone(options)
      <span class="keyword">this</span>.properties.forEach(<span class="keyword">function</span>(v){<span class="keyword">return</span> <span class="keyword">delete</span> options[v]})</pre></div></div>
            
        </li>
        
        
        <li id="section-228">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-228">&#182;</a>
              </div>
              <p>Views pass through remaining options to be attributes on the root element
This can include jquery events and interpreted arguments</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">this</span>.addAttributes(options)</pre></div></div>
            
        </li>
        
        
        <li id="section-229">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-229">&#182;</a>
              </div>
              <p>Record if view is fully constructed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">return</span> <span class="keyword">this</span>._isConstructed = <span class="literal">true</span>
    },
    properties: {</pre></div></div>
            
        </li>
        
        
        <li id="section-230">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-230">&#182;</a>
              </div>
              <p>The element backing the View</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      el: {
        get: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>._el},
        set: <span class="keyword">function</span>(v){</pre></div></div>
            
        </li>
        
        
        <li id="section-231">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-231">&#182;</a>
              </div>
              <p>Set the element directly if this is a dom element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="keyword">if</span> (oj.isDOMElement(v)){
            <span class="keyword">this</span>._el = v</pre></div></div>
            
        </li>
        
        
        <li id="section-232">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-232">&#182;</a>
              </div>
              <p>Clear cache of $el</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="keyword">this</span>._$el = <span class="literal">null</span>
          } <span class="keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-233">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-233">&#182;</a>
              </div>
              <p>Generate the dom element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="keyword">this</span>._el = oj.compile({dom:<span class="number">1</span>, css:<span class="number">0</span>, cssMap:<span class="number">0</span>, html:<span class="number">0</span>}, v).dom
          }
        }
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-234">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-234">&#182;</a>
              </div>
              <p>Get and cache jquery-enabled element (readonly)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $el: {
        get: <span class="keyword">function</span>(){
          <span class="keyword">return</span> <span class="keyword">this</span>._$el != <span class="literal">null</span> ? <span class="keyword">this</span>._$el : (<span class="keyword">this</span>._$el = oj.$(<span class="keyword">this</span>.el))
        }
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-235">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-235">&#182;</a>
              </div>
              <p>Get and set id attribute of view</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      id: {
        get: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.$el.attr(<span class="string">'id'</span>)},
        set: <span class="keyword">function</span>(v){<span class="keyword">return</span> <span class="keyword">this</span>.$el.attr(<span class="string">'id'</span>, v)}
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-236">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-236">&#182;</a>
              </div>
              <p>class:
get: -&gt; @$el.attr &#39;class&#39;
set: (v) -&gt;</p>
<h1>Join arrays with spaces</h1>
<p>  if oj.isArray v
    v = v.join &#39; &#39;
  @$el.attr &#39;class&#39;, v
  return
Alias for classes
c:
get: -&gt; @class
set: (v) -&gt; @class = v; return
Get all currently set attributes (readonly)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      attributes: {
        get: <span class="keyword">function</span>(){
          <span class="keyword">var</span> out = {}
          slice.call(<span class="keyword">this</span>.el.attributes).forEach(<span class="keyword">function</span>(attr){
            <span class="keyword">return</span> out[attr.name] = attr.value
          })
          <span class="keyword">return</span> out
        }
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-237">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-237">&#182;</a>
              </div>
              <p>Get all classes as an array (readwrite)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      classes: {
        get: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.$el.attr(<span class="string">'class'</span>).split(<span class="regexp">/\s+/</span>)},
        set: <span class="keyword">function</span>(v){<span class="keyword">this</span>.$el.attr(<span class="string">'class'</span>, v.join(<span class="string">' '</span>))}
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-238">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-238">&#182;</a>
              </div>
              <p>Get / set all currently set themes (readwrite)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      themes: {
        get: <span class="keyword">function</span>(){
          <span class="keyword">var</span> thms = [],
            prefix = <span class="string">'theme-'</span>,
            ix = <span class="number">0</span>,
            cls
          <span class="keyword">for</span> (; ix &lt; <span class="keyword">this</span>.classes.length; ix++){
            cls = <span class="keyword">this</span>.classes[ix]
            <span class="keyword">if</span> (cls.indexOf(prefix) === <span class="number">0</span>)
              thms.push(cls.slice(prefix.length))
          }
          <span class="keyword">return</span> thms
        },
        set: <span class="keyword">function</span>(v){
          <span class="keyword">if</span> (!oj.isArray(v))
            v = [v]
          <span class="keyword">this</span>.clearThemes()
          <span class="keyword">var</span> theme, ix = <span class="number">0</span>
          <span class="keyword">for</span> (;ix &lt; v.length; ix++){
            theme = v[ix]
            <span class="keyword">this</span>.addTheme(theme)
          }
        }
      },
      theme: {
        get: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.themes},
        set: <span class="keyword">function</span>(v){<span class="keyword">this</span>.themes = v}
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-239">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-239">&#182;</a>
              </div>
              <p>Determine if this view has been fully constructed (readonly)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      isConstructed: {get: <span class="keyword">function</span>(){<span class="keyword">return</span> _d(<span class="keyword">this</span>._isConstructed, <span class="literal">false</span>)}},</pre></div></div>
            
        </li>
        
        
        <li id="section-240">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-240">&#182;</a>
              </div>
              <p>Determine if this view has been fully inserted (readonly)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      isInserted: {get: <span class="keyword">function</span>(){<span class="keyword">return</span> _d(<span class="keyword">this</span>._isInserted, <span class="literal">false</span>)}}
    },
    methods: {</pre></div></div>
            
        </li>
        
        
        <li id="section-241">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-241">&#182;</a>
              </div>
              <p>$: Find element from within root</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.$el.find.apply(<span class="keyword">this</span>.$el, arguments)},</pre></div></div>
            
        </li>
        
        
        <li id="section-242">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-242">&#182;</a>
              </div>
              <p>addAttribute: Add a single attribute</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      addAttribute: <span class="keyword">function</span>(name, value){
        <span class="keyword">var</span> attr = {}
        attr[name] = value
        <span class="keyword">this</span>.addAttributes(attr)
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-243">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-243">&#182;</a>
              </div>
              <p>addAttributes: Add attributes and apply the oj magic with jquery binding</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      addAttributes: <span class="keyword">function</span>(attributes){
        <span class="keyword">var</span> attr = _clone(attributes),
          events = _attributesProcessedForOJ(attr),
          k, v</pre></div></div>
            
        </li>
        
        
        <li id="section-244">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-244">&#182;</a>
              </div>
              <p>Add attributes as object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (oj.isPlainObject(attr)){
          <span class="keyword">for</span> (k <span class="keyword">in</span> attr){
            v = attr[k]
            <span class="keyword">if</span> (k === <span class="string">'class'</span>)
              <span class="keyword">this</span>.addClass(v)
            <span class="keyword">else</span> <span class="keyword">if</span> (v === <span class="literal">true</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-245">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-245">&#182;</a>
              </div>
              <p>Boolean attributes have no value</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>              <span class="keyword">this</span>.el.setAttributeNode(document.createAttribute(k))
            <span class="keyword">else</span></pre></div></div>
            
        </li>
        
        
        <li id="section-246">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-246">&#182;</a>
              </div>
              <p>Otherwise add it normally</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>              <span class="keyword">this</span>.$el.attr(k, v)
          }
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-247">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-247">&#182;</a>
              </div>
              <p>Bind events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (events != <span class="literal">null</span>)
          _attributesBindEventsToDOM(events, <span class="keyword">this</span>.el)
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-248">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-248">&#182;</a>
              </div>
              <p>Remove a single attribute</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      removeAttribute: <span class="keyword">function</span>(name){<span class="keyword">this</span>.$el.removeAttr(name)},</pre></div></div>
            
        </li>
        
        
        <li id="section-249">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-249">&#182;</a>
              </div>
              <p>Remove multiple attributes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      removeAttributes: <span class="keyword">function</span>(list){<span class="keyword">var</span> _t = <span class="keyword">this</span>; list.forEach(<span class="keyword">function</span>(v){_t.removeAttribute(v)})},</pre></div></div>
            
        </li>
        
        
        <li id="section-250">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-250">&#182;</a>
              </div>
              <p>Add a single class</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      addClass: <span class="keyword">function</span>(name){<span class="keyword">this</span>.$el.addClass(name)},</pre></div></div>
            
        </li>
        
        
        <li id="section-251">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-251">&#182;</a>
              </div>
              <p>Remove a single class</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      removeClass: <span class="keyword">function</span>(name){<span class="keyword">this</span>.$el.removeClass(name)},</pre></div></div>
            
        </li>
        
        
        <li id="section-252">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-252">&#182;</a>
              </div>
              <p>Determine if class is applied</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      hasClass: <span class="keyword">function</span>(name){<span class="keyword">return</span> <span class="keyword">this</span>.$el.hasClass(name)},</pre></div></div>
            
        </li>
        
        
        <li id="section-253">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-253">&#182;</a>
              </div>
              <p>Add a single theme</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      addTheme: <span class="keyword">function</span>(name){<span class="keyword">this</span>.addClass(<span class="string">"theme-"</span> + name)},</pre></div></div>
            
        </li>
        
        
        <li id="section-254">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-254">&#182;</a>
              </div>
              <p>Remove a single theme</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      removeTheme: <span class="keyword">function</span>(name){<span class="keyword">this</span>.removeClass(<span class="string">"theme-"</span> + name)},</pre></div></div>
            
        </li>
        
        
        <li id="section-255">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-255">&#182;</a>
              </div>
              <p>Determine if theme is applied</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      hasTheme: <span class="keyword">function</span>(name){<span class="keyword">return</span> <span class="keyword">this</span>.hasClass(<span class="string">"theme-"</span> + name)},</pre></div></div>
            
        </li>
        
        
        <li id="section-256">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-256">&#182;</a>
              </div>
              <p>Clear all themes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      clearThemes: <span class="keyword">function</span>(){<span class="keyword">var</span> _t = <span class="keyword">this</span>; <span class="keyword">this</span>.themes.forEach(<span class="keyword">function</span>(t){_t.removeTheme(t)}) },</pre></div></div>
            
        </li>
        
        
        <li id="section-257">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-257">&#182;</a>
              </div>
              <p>emit: Emit instance as a tag function would do</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      emit: <span class="keyword">function</span>(){oj._argsAppend(<span class="keyword">this</span>)},</pre></div></div>
            
        </li>
        
        
        <li id="section-258">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-258">&#182;</a>
              </div>
              <p>Convert View to html</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      toHTML: <span class="keyword">function</span>(options){
        <span class="keyword">return</span> <span class="keyword">this</span>.el.outerHTML + ((options != <span class="literal">null</span> ? options.minify : <span class="keyword">void</span> <span class="number">0</span>) ? <span class="string">''</span> : <span class="string">'\n'</span>)
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-259">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-259">&#182;</a>
              </div>
              <p>Convert View to dom (for compiling)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      toDOM: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.el},</pre></div></div>
            
        </li>
        
        
        <li id="section-260">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-260">&#182;</a>
              </div>
              <p>Convert</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      toCSS: <span class="keyword">function</span>(options){
        <span class="keyword">return</span> _cssFromPluginObject(_flattenCSSMap(<span class="keyword">this</span>.cssMap), _extend({}, {
          minify: options.minify,
          tags: <span class="number">0</span>
        }))
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-261">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-261">&#182;</a>
              </div>
              <p>Convert</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      toCSSMap: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.type.cssMap},</pre></div></div>
            
        </li>
        
        
        <li id="section-262">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-262">&#182;</a>
              </div>
              <p>Convert View to string (for debugging)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      toString: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.toHTML()},</pre></div></div>
            
        </li>
        
        
        <li id="section-263">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-263">&#182;</a>
              </div>
              <p>detach: -&gt; throw &#39;detach nyi&#39;
The implementation is to set el manipulate it, and remember how to set it back</p>
<p>attach: -&gt; throw &#39;attach nyi&#39;
The implementation is to unset el from detach
inserted is called the instance is inserted in the dom (override)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      inserted: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>._isInserted = <span class="literal">true</span>}
    }
  })</pre></div></div>
            
        </li>
        
        
        <li id="section-264">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-264">&#182;</a>
              </div>
              <p>oj.View.cssMap: remember css for this View</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.View.cssMap = {}</pre></div></div>
            
        </li>
        
        
        <li id="section-265">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-265">&#182;</a>
              </div>
              <p>oj.View.css: set view&#39;s css with css object mapping, or raw css string</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.View.css = <span class="keyword">function</span>(css){
    _a(oj.isString(css) || oj.isPlainObject(css), <span class="keyword">this</span>.typeName, <span class="string">'object or string expected for first argument'</span>)

    <span class="keyword">var</span> cssMap, _base, _base1, _name, _name1, _ref2, _ref3

    <span class="keyword">if</span> (oj.isString(css)){
      <span class="keyword">if</span> ((_ref2 = (_base = <span class="keyword">this</span>.cssMap)[_name = <span class="string">"oj-"</span> + <span class="keyword">this</span>.typeName]) == <span class="literal">null</span>){
        _base[_name] = <span class="string">""</span>
      }
      <span class="keyword">this</span>.cssMap[<span class="string">"oj-"</span> + <span class="keyword">this</span>.typeName] += css
    } <span class="keyword">else</span> {
      <span class="keyword">if</span> ((_ref3 = (_base1 = <span class="keyword">this</span>.cssMap)[_name1 = <span class="string">"oj-"</span> + <span class="keyword">this</span>.typeName]) == <span class="literal">null</span>){
        _base1[_name1] = {}
      }
      cssMap = _setObject({}, <span class="string">".oj-"</span> + <span class="keyword">this</span>.typeName, css)
      _extend(<span class="keyword">this</span>.cssMap[<span class="string">"oj-"</span> + <span class="keyword">this</span>.typeName], cssMap)
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-266">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-266">&#182;</a>
              </div>
              <p>oj.View.themes: Remember themes for this View</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.View.themes = []</pre></div></div>
            
        </li>
        
        
        <li id="section-267">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-267">&#182;</a>
              </div>
              <p>oj.View.theme: create a View specific theme with css object mapping</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.View.theme = <span class="keyword">function</span>(name, css){
    _v(<span class="keyword">this</span>.typeName, <span class="number">1</span>, name, <span class="string">'string'</span>)
    _v(<span class="keyword">this</span>.typeName, <span class="number">2</span>, css, <span class="string">'object'</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-268">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-268">&#182;</a>
              </div>
              <p>Calculate styleName</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> dashName = _dasherize(name),
      styleName = <span class="string">"oj-"</span> + <span class="keyword">this</span>.typeName,</pre></div></div>
            
        </li>
        
        
        <li id="section-269">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-269">&#182;</a>
              </div>
              <p>Wrap css in plugin name</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      cssMap = _setObject({}, <span class="string">".oj-"</span> + <span class="keyword">this</span>.typeName + <span class="string">".theme-"</span> + dashName, css)</pre></div></div>
            
        </li>
        
        
        <li id="section-270">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-270">&#182;</a>
              </div>
              <p>Extend into this views cssMap</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">this</span>.cssMap[styleName] = _d(<span class="keyword">this</span>.cssMap[styleName], {})
      _extend(<span class="keyword">this</span>.cssMap[<span class="string">"oj-"</span> + <span class="keyword">this</span>.typeName], cssMap)</pre></div></div>
            
        </li>
        
        
        <li id="section-271">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-271">&#182;</a>
              </div>
              <p>Remember the theme item</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">this</span>.themes.push(dashName)
    <span class="keyword">this</span>.themes = uniqueSort(<span class="keyword">this</span>.themes)
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-272">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-272">&#182;</a>
              </div>
              <p>oj.CollectionView: Inheritable base type that enables two-way collection binding</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.CollectionView = oj.createType(<span class="string">'CollectionView'</span>, {
    base: oj.View,
    constructor: <span class="keyword">function</span>(options){
      <span class="keyword">if</span> ((options != <span class="literal">null</span> ? options.each : <span class="keyword">void</span> <span class="number">0</span>) != <span class="literal">null</span>)
        <span class="keyword">this</span>.each = oj.argumentShift(options, <span class="string">'each'</span>)

      <span class="keyword">if</span> ((options != <span class="literal">null</span> ? options.models : <span class="keyword">void</span> <span class="number">0</span>) != <span class="literal">null</span>)
        <span class="keyword">this</span>.models = oj.argumentShift(options, <span class="string">'models'</span>)

      oj.CollectionView.base.constructor.apply(<span class="keyword">this</span>, arguments)</pre></div></div>
            
        </li>
        
        
        <li id="section-273">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-273">&#182;</a>
              </div>
              <p>Once everything is constructed call make precisely once.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">return</span> <span class="keyword">this</span>.make()
    },
    properties: {
      each: {
        get: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>._each},
        set: <span class="keyword">function</span>(v){
          <span class="keyword">this</span>._each = v
          <span class="keyword">if</span> (<span class="keyword">this</span>.isConstructed)
            <span class="keyword">this</span>.make()
        }
      },
      collection: {
        get: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.models},
        set: <span class="keyword">function</span>(v){<span class="keyword">return</span> <span class="keyword">this</span>.models = v}
      },
      models: {
        get: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>._models},
        set: <span class="keyword">function</span>(v){</pre></div></div>
            
        </li>
        
        
        <li id="section-274">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-274">&#182;</a>
              </div>
              <p>Unbind events if collection</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="keyword">if</span> (oj.isFunction(<span class="keyword">this</span>._models != <span class="literal">null</span> ? <span class="keyword">this</span>._models.off : <span class="keyword">void</span> <span class="number">0</span>))
            <span class="keyword">this</span>._models.off(<span class="string">'add remove change reset destroy'</span>, <span class="literal">null</span>, <span class="keyword">this</span>)

          <span class="keyword">this</span>._models = v</pre></div></div>
            
        </li>
        
        
        <li id="section-275">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-275">&#182;</a>
              </div>
              <p>Bind events if collection</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="keyword">if</span> (oj.isFunction(<span class="keyword">this</span>._models != <span class="literal">null</span> ? <span class="keyword">this</span>._models.on : <span class="keyword">void</span> <span class="number">0</span>)){
            <span class="keyword">this</span>._models.on(<span class="string">'add'</span>, <span class="keyword">this</span>.collectionModelAdded, <span class="keyword">this</span>)
            <span class="keyword">this</span>._models.on(<span class="string">'remove'</span>, <span class="keyword">this</span>.collectionModelRemoved, <span class="keyword">this</span>)
            <span class="keyword">this</span>._models.on(<span class="string">'change'</span>, <span class="keyword">this</span>.collectionModelChanged, <span class="keyword">this</span>)
            <span class="keyword">this</span>._models.on(<span class="string">'destroy'</span>, <span class="keyword">this</span>.collectionModelDestroyed, <span class="keyword">this</span>)
            <span class="keyword">this</span>._models.on(<span class="string">'reset'</span>, <span class="keyword">this</span>.collectionReset, <span class="keyword">this</span>)
          }
          <span class="keyword">if</span> (<span class="keyword">this</span>.isConstructed)
            <span class="keyword">this</span>.make()
        }
      }
    },
    methods: {</pre></div></div>
            
        </li>
        
        
        <li id="section-276">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-276">&#182;</a>
              </div>
              <p>Override make to create your view</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      make: <span class="keyword">function</span>(){_e(<span class="keyword">this</span>.typeName, <span class="string">'`make` method not implemented by custom view'</span>)},</pre></div></div>
            
        </li>
        
        
        <li id="section-277">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-277">&#182;</a>
              </div>
              <p>Override these events to minimally update on change</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      collectionModelAdded: <span class="keyword">function</span>(mod, cols){<span class="keyword">return</span> <span class="keyword">this</span>.make()},
      collectionModelRemoved: <span class="keyword">function</span>(mod, cols, opt){<span class="keyword">return</span> <span class="keyword">this</span>.make()},
      collectionModelChanged: <span class="keyword">function</span>(mod, cols, opt){},
      collectionModelDestroyed: <span class="keyword">function</span>(cols, opt){<span class="keyword">return</span> <span class="keyword">this</span>.make()},
      collectionReset: <span class="keyword">function</span>(cols, opt){<span class="keyword">return</span> <span class="keyword">this</span>.make()}
    }
  })</pre></div></div>
            
        </li>
        
        
        <li id="section-278">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-278">&#182;</a>
              </div>
              <p>oj.ModelView: Inheritable base type that enables two-way model binding</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.ModelView = oj.createType(<span class="string">'ModelView'</span>, {
    base: oj.View,
    constructor: <span class="keyword">function</span>(options){
      <span class="keyword">if</span> ((options != <span class="literal">null</span> ? options.value : <span class="keyword">void</span> <span class="number">0</span>) != <span class="literal">null</span>)
        <span class="keyword">this</span>.value = oj.argumentShift(options, <span class="string">'value'</span>)

      <span class="keyword">if</span> ((options != <span class="literal">null</span> ? options.model : <span class="keyword">void</span> <span class="number">0</span>) != <span class="literal">null</span>)
        <span class="keyword">this</span>.model = oj.argumentShift(options, <span class="string">'model'</span>)

      <span class="keyword">return</span> oj.ModelView.base.constructor.apply(<span class="keyword">this</span>, arguments)
    },
    properties: {
      model: {
        get: <span class="keyword">function</span>(){
          <span class="keyword">return</span> <span class="keyword">this</span>._model
        },
        set: <span class="keyword">function</span>(v){</pre></div></div>
            
        </li>
        
        
        <li id="section-279">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-279">&#182;</a>
              </div>
              <p>Unbind events on the old model</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="keyword">if</span> (oj.isEvented(<span class="keyword">this</span>._model))
            <span class="keyword">this</span>._model.off(<span class="string">'change'</span>, <span class="literal">null</span>, <span class="keyword">this</span>)

          <span class="keyword">this</span>._model = v</pre></div></div>
            
        </li>
        
        
        <li id="section-280">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-280">&#182;</a>
              </div>
              <p>Bind events on the new model</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="keyword">if</span> (oj.isEvented(<span class="keyword">this</span>._model))
            <span class="keyword">this</span>._model.on(<span class="string">'change'</span>, <span class="keyword">this</span>.modelChanged, <span class="keyword">this</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-281">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-281">&#182;</a>
              </div>
              <p>Trigger change manually when settings new model</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="keyword">this</span>.modelChanged()
        }
      }
    },
    methods: {</pre></div></div>
            
        </li>
        
        
        <li id="section-282">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-282">&#182;</a>
              </div>
              <p>Override modelChanged if you don&#39;t want a full remake</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      modelChanged: <span class="keyword">function</span>(){
        <span class="keyword">var</span> _t = <span class="keyword">this</span>
        <span class="keyword">return</span> <span class="keyword">this</span>.$el.oj(<span class="keyword">function</span>(){
          <span class="keyword">return</span> _t.make(_t.mode)
        })
      },
      make: <span class="keyword">function</span>(model){
        <span class="keyword">return</span> _e(<span class="keyword">this</span>.typeName, <span class="string">'`make` method not implemented by custom view'</span>)
      }
    }
  })</pre></div></div>
            
        </li>
        
        
        <li id="section-283">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-283">&#182;</a>
              </div>
              <p>oj.ModelViewView: Inheritable base type that enables two-way model binding to a specific key</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.ModelKeyView = oj.createType(<span class="string">'ModelKeyView'</span>, {</pre></div></div>
            
        </li>
        
        
        <li id="section-284">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-284">&#182;</a>
              </div>
              <p>Inherit ModelView to handle model and bindings</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    base: oj.ModelView,
    constructor: <span class="keyword">function</span>(options){

      <span class="keyword">if</span> ((options != <span class="literal">null</span> ? options.key : <span class="keyword">void</span> <span class="number">0</span>) != <span class="literal">null</span>)
        <span class="keyword">this</span>.key = oj.argumentShift(options, <span class="string">'key'</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-285">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-285">&#182;</a>
              </div>
              <p>Call super to bind model and value</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">return</span> oj.ModelKeyView.base.constructor.apply(<span class="keyword">this</span>, arguments)
    },
    properties: {</pre></div></div>
            
        </li>
        
        
        <li id="section-286">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-286">&#182;</a>
              </div>
              <p>Key used to access model</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      key: <span class="literal">null</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-287">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-287">&#182;</a>
              </div>
              <p>Override this property and call this.viewChanged when appropriate</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      value: {
        get: <span class="keyword">function</span>(){_e(<span class="keyword">this</span>.typeName, <span class="string">'value getter not implemented'</span>)},
        set: <span class="keyword">function</span>(v){_e(<span class="keyword">this</span>.typeName, <span class="string">'value setter not implemented'</span>)}
      }
    },

    methods: {</pre></div></div>
            
        </li>
        
        
        <li id="section-288">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-288">&#182;</a>
              </div>
              <p>modelChanged: called by model binding code to
automatically set this.value when the model changes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      modelChanged: <span class="keyword">function</span>(){
        <span class="keyword">if</span> ((<span class="keyword">this</span>.model != <span class="literal">null</span>) &amp;&amp; (<span class="keyword">this</span>.key != <span class="literal">null</span>)){</pre></div></div>
            
        </li>
        
        
        <li id="section-289">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-289">&#182;</a>
              </div>
              <p>Update the view if necessary</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="keyword">if</span> (!<span class="keyword">this</span>._viewUpdatedModel)
            <span class="keyword">this</span>.value = <span class="keyword">this</span>.model.get(<span class="keyword">this</span>.key)
        }
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-290">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-290">&#182;</a>
              </div>
              <p>viewChanged: Will set the model whenever this.value is set</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      viewChanged: <span class="keyword">function</span>(){
        <span class="keyword">var</span> _t = <span class="keyword">this</span></pre></div></div>
            
        </li>
        
        
        <li id="section-291">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-291">&#182;</a>
              </div>
              <p>Briefly delay view changes because they often change before
the controls visually update</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        setTimeout((<span class="keyword">function</span>(){
          <span class="keyword">if</span> ((_t.model != <span class="literal">null</span>) &amp;&amp; (_t.key != <span class="literal">null</span>)){</pre></div></div>
            
        </li>
        
        
        <li id="section-292">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-292">&#182;</a>
              </div>
              <p>Ensure view changes aren&#39;t triggered twice</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            _t._viewUpdatedModel = <span class="literal">true</span>
            _t.model.set(_t.key, _t.value)
            _t._viewUpdatedModel = <span class="literal">false</span>
          }
        }), <span class="number">10</span>)
      }
    }
  })</pre></div></div>
            
        </li>
        
        
        <li id="section-293">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-293">&#182;</a>
              </div>
              <p>oj.TextBox</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.TextBox = oj.createType(<span class="string">'TextBox'</span>, {
    base: oj.ModelKeyView,
    constructor: <span class="keyword">function</span>(){
      <span class="keyword">var</span> _t = <span class="keyword">this</span>,
        u = oj.unionArguments(arguments),
        options = u.options,
        args = u.args

      <span class="keyword">this</span>.el = oj(<span class="keyword">function</span>(){
        oj.input({type: <span class="string">'text'</span>}, {</pre></div></div>
            
        </li>
        
        
        <li id="section-294">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-294">&#182;</a>
              </div>
              <p>When live changes are set indicate change on every keypress
Delay change events slighty as value is visually updated after key presses</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          keydown: <span class="keyword">function</span>(){
            <span class="keyword">if</span> (_t.live)
              setTimeout((<span class="keyword">function</span>(){<span class="keyword">return</span> _t.$el.change()}), <span class="number">10</span>)
          },
          keyup: <span class="keyword">function</span>(){
            <span class="keyword">if</span> (_t.live)
              setTimeout((<span class="keyword">function</span>(){<span class="keyword">return</span> _t.$el.change()}), <span class="number">10</span>)
          },
          change: <span class="keyword">function</span>(){_t.viewChanged()}
        })
      })</pre></div></div>
            
        </li>
        
        
        <li id="section-295">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-295">&#182;</a>
              </div>
              <p>Value can be set by argument</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (args.length &gt; <span class="number">0</span>)
        <span class="keyword">this</span>.value = args[<span class="number">0</span>]</pre></div></div>
            
        </li>
        
        
        <li id="section-296">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-296">&#182;</a>
              </div>
              <p>Set live if it exists</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> ((options != <span class="literal">null</span> ? options.live : <span class="keyword">void</span> <span class="number">0</span>) != <span class="literal">null</span>)
        <span class="keyword">this</span>.live = oj.argumentShift(options, <span class="string">'live'</span>)

      <span class="keyword">return</span> oj.TextBox.base.constructor.apply(<span class="keyword">this</span>, [options])
    },
    properties: {
      value: {
        get: <span class="keyword">function</span>(){
          <span class="keyword">var</span> v = <span class="keyword">this</span>.el.value
          <span class="keyword">if</span> ((v == <span class="literal">null</span>) || v === _udf)
            v = <span class="string">''</span>
          <span class="keyword">return</span> v
        },
        set: <span class="keyword">function</span>(v){<span class="keyword">this</span>.el.value = v}
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-297">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-297">&#182;</a>
              </div>
              <p>Live update model as text changes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      live: <span class="literal">true</span>
    }
  })</pre></div></div>
            
        </li>
        
        
        <li id="section-298">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-298">&#182;</a>
              </div>
              <p>oj.CheckBox</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.CheckBox = oj.createType(<span class="string">'CheckBox'</span>, {
    base: oj.ModelKeyView,
    constructor: <span class="keyword">function</span>(){
      <span class="keyword">var</span> _t = <span class="keyword">this</span>,
        u = oj.unionArguments(arguments),
        options = u.options,
        args = u.args

      <span class="keyword">this</span>.el = oj(<span class="keyword">function</span>(){
        oj.input({type: <span class="string">'checkbox'</span>}, {
          change: <span class="keyword">function</span>(){_t.viewChanged()}
        })
      })</pre></div></div>
            
        </li>
        
        
        <li id="section-299">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-299">&#182;</a>
              </div>
              <p>Value can be set by argument</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (args.length &gt; <span class="number">0</span>)
        <span class="keyword">this</span>.value = args[<span class="number">0</span>]

      <span class="keyword">return</span> oj.CheckBox.base.constructor.call(<span class="keyword">this</span>, options)
    },
    properties: {
      value: {
        get: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.el.checked},
        set: <span class="keyword">function</span>(v){
          <span class="keyword">this</span>.el.checked = v = !!v
          <span class="keyword">if</span> (v)
            <span class="keyword">this</span>.$el.attr(<span class="string">'checked'</span>, <span class="string">'checked'</span>)
          <span class="keyword">else</span>
            <span class="keyword">this</span>.$el.removeAttr(<span class="string">'checked'</span>)
        }
      }
    }
  })</pre></div></div>
            
        </li>
        
        
        <li id="section-300">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-300">&#182;</a>
              </div>
              <p>oj.Text</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.Text = oj.createType(<span class="string">'Text'</span>, {
    base: oj.ModelKeyView,
    constructor: <span class="keyword">function</span>(){
      <span class="keyword">var</span> _t = <span class="keyword">this</span>,
        u = oj.unionArguments(arguments),
        options = u.options,
        args = u.args</pre></div></div>
            
        </li>
        
        
        <li id="section-301">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-301">&#182;</a>
              </div>
              <p>Get tag name if provided</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">this</span>._tagName = oj.argumentShift(options, <span class="string">'tagName'</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-302">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-302">&#182;</a>
              </div>
              <p>Create element with tagName</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">this</span>.el = oj(<span class="keyword">function</span>(){
        <span class="keyword">return</span> oj[_t.tagName]()
      })</pre></div></div>
            
        </li>
        
        
        <li id="section-303">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-303">&#182;</a>
              </div>
              <p>Value can be set by argument</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (args.length &gt; <span class="number">0</span>)
        <span class="keyword">this</span>.value = args[<span class="number">0</span>]

      <span class="keyword">return</span> oj.Text.base.constructor.call(<span class="keyword">this</span>, options)
    },

    properties: {</pre></div></div>
            
        </li>
        
        
        <li id="section-304">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-304">&#182;</a>
              </div>
              <p>value: text value of this object (readwrite)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      value: {
        get: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.$el.ojValue()},
        set: <span class="keyword">function</span>(v){<span class="keyword">this</span>.$el.oj(v)}
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-305">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-305">&#182;</a>
              </div>
              <p>tagName: name of root tag (writeonce)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      tagName: {get: <span class="keyword">function</span>(){<span class="keyword">return</span> _d(<span class="keyword">this</span>._tagName, <span class="string">'div'</span>)}}
    }
  })</pre></div></div>
            
        </li>
        
        
        <li id="section-306">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-306">&#182;</a>
              </div>
              <p>oj.TextArea</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.TextArea = oj.createType(<span class="string">'TextArea'</span>, {
    base: oj.ModelKeyView,
    constructor: <span class="keyword">function</span>(){
      <span class="keyword">var</span> _t = <span class="keyword">this</span>,
        u = oj.unionArguments(arguments),
        options = u.options,
        args = u.args

      <span class="keyword">this</span>.el = oj(<span class="keyword">function</span>(){
        <span class="keyword">return</span> oj.textarea({</pre></div></div>
            
        </li>
        
        
        <li id="section-307">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-307">&#182;</a>
              </div>
              <p>When live changes are set indicate change on every keypress
Delay change events slighty as value is visually updated after key presses</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          keydown: <span class="keyword">function</span>(){
            <span class="keyword">if</span> (_t.live)
              setTimeout((<span class="keyword">function</span>(){<span class="keyword">return</span> _t.$el.change()}), <span class="number">10</span>)
          },
          keyup: <span class="keyword">function</span>(){
            <span class="keyword">if</span> (_t.live)
              setTimeout((<span class="keyword">function</span>(){<span class="keyword">return</span> _t.$el.change()}), <span class="number">10</span>)
          },
          change: <span class="keyword">function</span>(){
            _t.viewChanged()
          }
        })
      })</pre></div></div>
            
        </li>
        
        
        <li id="section-308">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-308">&#182;</a>
              </div>
              <p>Value can be set by argument</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">this</span>.value = oj.argumentShift(options, <span class="string">'value'</span>) || args.join(<span class="string">'\n'</span>)
      <span class="keyword">return</span> oj.TextArea.base.constructor.call(<span class="keyword">this</span>, options)
    },
    properties: {
      value: {
        get: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.el.value},
        set: <span class="keyword">function</span>(v){<span class="keyword">this</span>.el.value = v}
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-309">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-309">&#182;</a>
              </div>
              <p>Live update model as text changes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      live: <span class="literal">true</span>
    }
  })</pre></div></div>
            
        </li>
        
        
        <li id="section-310">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-310">&#182;</a>
              </div>
              <p>oj.ListBox</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.ListBox = oj.createType(<span class="string">'ListBox'</span>, {
    base: oj.ModelKeyView,
    constructor: <span class="keyword">function</span>(){
      <span class="keyword">var</span> _t = <span class="keyword">this</span>,
        u = oj.unionArguments(arguments),
        options = u.options,
        args = u.args

      <span class="keyword">this</span>.el = oj(<span class="keyword">function</span>(){
        <span class="keyword">return</span> oj.select({
          change: <span class="keyword">function</span>(){_t.viewChanged()}
        })
      })</pre></div></div>
            
        </li>
        
        
        <li id="section-311">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-311">&#182;</a>
              </div>
              <p>@options is a list of elements</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">this</span>.options = oj.argumentShift(options, <span class="string">'options'</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-312">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-312">&#182;</a>
              </div>
              <p>Value can be set by argument</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (args.length &gt; <span class="number">0</span>)
        <span class="keyword">this</span>.value = args[<span class="number">0</span>]

      <span class="keyword">return</span> oj.ListBox.base.constructor.apply(<span class="keyword">this</span>, [options])
    },
    properties: {
      value: {
        get: <span class="keyword">function</span>(){
          <span class="keyword">return</span> <span class="keyword">this</span>.$el.val()
        },
        set: <span class="keyword">function</span>(v){
          <span class="keyword">this</span>.$el.val(v)
        }
      },
      options: {
        get: <span class="keyword">function</span>(){
          <span class="keyword">return</span> <span class="keyword">this</span>._options
        },
        set: <span class="keyword">function</span>(v){
          <span class="keyword">if</span> (!oj.isArray(v)){
            <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">"oj."</span> + <span class="keyword">this</span>.typeName + <span class="string">".options array is missing"</span>)
          }
          <span class="keyword">this</span>._options = v
          <span class="keyword">this</span>.$el.oj(<span class="keyword">function</span>(){
            <span class="keyword">var</span> op, _j, _len1

            <span class="keyword">for</span> (_j = <span class="number">0</span>, _len1 = v.length; _j &lt; _len1; _j++){
              op = v[_j]
              oj.option(op)
            }
          })
        }
      }
    }
  })</pre></div></div>
            
        </li>
        
        
        <li id="section-313">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-313">&#182;</a>
              </div>
              <p>oj.Button</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.Button = oj.createType(<span class="string">'Button'</span>, {
    base: oj.View,
    constructor: <span class="keyword">function</span>(){
      <span class="keyword">var</span> _t = <span class="keyword">this</span>,
      u = oj.unionArguments(arguments),
      options = u.options,
      args = u.args,</pre></div></div>
            
        </li>
        
        
        <li id="section-314">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-314">&#182;</a>
              </div>
              <p>Label is first argument</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      title = <span class="string">''</span>
      <span class="keyword">if</span> (args.length &gt; <span class="number">0</span>)
        title = args[<span class="number">0</span>]</pre></div></div>
            
        </li>
        
        
        <li id="section-315">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-315">&#182;</a>
              </div>
              <p>Label is specified as option</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (options.title != <span class="literal">null</span>)
        title = oj.argumentShift(options, <span class="string">'title'</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-316">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-316">&#182;</a>
              </div>
              <p>Create element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">this</span>.el = oj(<span class="keyword">function</span>(){<span class="keyword">return</span> oj.button(title)})

      oj.Button.base.constructor.apply(<span class="keyword">this</span>, [options])
      <span class="keyword">return</span> <span class="keyword">this</span>.title = title
    },
    properties: {
      title: {
        get: <span class="keyword">function</span>(){<span class="keyword">return</span> _d(<span class="keyword">this</span>._title, <span class="string">''</span>)},
        set: <span class="keyword">function</span>(v){<span class="keyword">this</span>.$el.oj((<span class="keyword">this</span>._title = v))}
      }
    },
    methods: {
      click: <span class="keyword">function</span>(){
        <span class="keyword">if</span> (arguments.length &gt; <span class="number">0</span>)
          <span class="keyword">return</span> <span class="keyword">this</span>.$el.click.apply(<span class="keyword">this</span>.$el, arguments)
        <span class="keyword">else</span>
          <span class="keyword">return</span> <span class="keyword">this</span>.$el.click()
      }
    }
  })</pre></div></div>
            
        </li>
        
        
        <li id="section-317">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-317">&#182;</a>
              </div>
              <p>oj.List: List control with two-way collection binding</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.List = oj.createType(<span class="string">'List'</span>, {
    base: oj.CollectionView,
    constructor: <span class="keyword">function</span>(){
      <span class="keyword">var</span> _t = <span class="keyword">this</span>,
        u = oj.unionArguments(arguments),
        options = u.options,
        args = u.args,
        items</pre></div></div>
            
        </li>
        
        
        <li id="section-318">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-318">&#182;</a>
              </div>
              <p>tagName is write-once</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">this</span>._tagName = oj.argumentShift(options, <span class="string">'tagName'</span>)
      <span class="keyword">this</span>.itemTagName = oj.argumentShift(options, <span class="string">'itemTagName'</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-319">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-319">&#182;</a>
              </div>
              <p>Create the root element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">this</span>.el = oj(<span class="keyword">function</span>(){<span class="keyword">return</span> oj[_t.tagName]()})</pre></div></div>
            
        </li>
        
        
        <li id="section-320">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-320">&#182;</a>
              </div>
              <p>Use el if it was passed in</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (options.el != <span class="literal">null</span>)
        <span class="keyword">this</span>.el = oj.argumentShift(options, <span class="string">'el'</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-321">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-321">&#182;</a>
              </div>
              <p>Default @each function to pass through values</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (options.each == <span class="literal">null</span>){
        options.each = <span class="keyword">function</span>(model){
          <span class="keyword">if</span> (oj.isString(model) || oj.isNumber(model) || oj.isBoolean(model))
            <span class="keyword">return</span> model
          <span class="keyword">else</span>
            <span class="keyword">return</span> JSON.stringify(model)
        }
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-322">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-322">&#182;</a>
              </div>
              <p>Args have been handled so don&#39;t pass them on</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      oj.List.base.constructor.apply(<span class="keyword">this</span>, [options])</pre></div></div>
            
        </li>
        
        
        <li id="section-323">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-323">&#182;</a>
              </div>
              <p>Set @items to options or args if they exist</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      items = args.length &gt; <span class="number">0</span> ? args : <span class="literal">null</span>
      <span class="keyword">return</span> <span class="keyword">this</span>.items = options.items != <span class="literal">null</span> ? oj.argumentShift(options, <span class="string">'items'</span>) : items
    },

    properties: {</pre></div></div>
            
        </li>
        
        
        <li id="section-324">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-324">&#182;</a>
              </div>
              <p>items: get or set all items at once (readwrite)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      items: {
        get: <span class="keyword">function</span>(){</pre></div></div>
            
        </li>
        
        
        <li id="section-325">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-325">&#182;</a>
              </div>
              <p>Found in cache</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="keyword">if</span> (<span class="keyword">this</span>._items != <span class="literal">null</span>)
            <span class="keyword">return</span> <span class="keyword">this</span>._items</pre></div></div>
            
        </li>
        
        
        <li id="section-326">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-326">&#182;</a>
              </div>
              <p>Calc from ojValues</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="keyword">return</span> <span class="keyword">this</span>.$items.ojValues()
        },
        set: <span class="keyword">function</span>(v){
          <span class="keyword">this</span>._items = v
          <span class="keyword">this</span>.make()
        }
      },
      count: {get: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.$items.length}},</pre></div></div>
            
        </li>
        
        
        <li id="section-327">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-327">&#182;</a>
              </div>
              <p>tagName: name of root tag (writeonce)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      tagName: {get: <span class="keyword">function</span>(){<span class="keyword">return</span> _d(<span class="keyword">this</span>._tagName, <span class="string">'div'</span>)}},</pre></div></div>
            
        </li>
        
        
        <li id="section-328">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-328">&#182;</a>
              </div>
              <p>itemTagName: name of item tags (readwrite)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      itemTagName: {
        get: <span class="keyword">function</span>(){<span class="keyword">return</span> _d(<span class="keyword">this</span>._itemTagName, <span class="string">'div'</span>)},
        set: <span class="keyword">function</span>(v){<span class="keyword">this</span>._itemTagName = v; <span class="keyword">this</span>.make()}
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-329">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-329">&#182;</a>
              </div>
              <p>$items: list of <code>&lt;li&gt;</code> elements (readonly)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $items: {
        get: <span class="keyword">function</span>(){</pre></div></div>
            
        </li>
        
        
        <li id="section-330">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-330">&#182;</a>
              </div>
              <p>Get from cache or cache the recalculated list</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="keyword">return</span> <span class="keyword">this</span>._$items != <span class="literal">null</span> ? <span class="keyword">this</span>._$items : <span class="keyword">this</span>._$items = <span class="keyword">this</span>.$(<span class="string">"&gt; "</span> + <span class="keyword">this</span>.itemTagName)
        }
      }
    },

    methods: {</pre></div></div>
            
        </li>
        
        
        <li id="section-331">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-331">&#182;</a>
              </div>
              <p>item: get or set item value at item ix</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      item: <span class="keyword">function</span>(ix, ojml){
        ix = <span class="keyword">this</span>._bound(ix, <span class="keyword">this</span>.count, <span class="string">".item: index"</span>)
        <span class="keyword">if</span> (ojml != <span class="literal">null</span>)
          <span class="keyword">this</span>.$item(ix).oj(ojml)
        <span class="keyword">else</span>
          <span class="keyword">return</span> <span class="keyword">this</span>.$item(ix).ojValue()
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-332">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-332">&#182;</a>
              </div>
              <p>$item: <code>&lt;li&gt;</code> element for a given item ix. The tag name may change.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $item: <span class="keyword">function</span>(ix){<span class="keyword">return</span> <span class="keyword">this</span>.$items.eq(<span class="keyword">this</span>._bound(ix, <span class="keyword">this</span>.count, <span class="string">".$item: index"</span>))},</pre></div></div>
            
        </li>
        
        
        <li id="section-333">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-333">&#182;</a>
              </div>
              <p>make: Remake view from model data using each</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      make: <span class="keyword">function</span>(){</pre></div></div>
            
        </li>
        
        
        <li id="section-334">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-334">&#182;</a>
              </div>
              <p>Do nothing until fully constructed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (!<span class="keyword">this</span>.isConstructed)
          <span class="keyword">return</span></pre></div></div>
            
        </li>
        
        
        <li id="section-335">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-335">&#182;</a>
              </div>
              <p>Some properties call make before construction completes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">var</span> _t = <span class="keyword">this</span>, ix, model, models, views, out</pre></div></div>
            
        </li>
        
        
        <li id="section-336">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-336">&#182;</a>
              </div>
              <p>Convert models to views using each</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> ((<span class="keyword">this</span>.models != <span class="literal">null</span>) &amp;&amp; (<span class="keyword">this</span>.each != <span class="literal">null</span>)){</pre></div></div>
            
        </li>
        
        
        <li id="section-337">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-337">&#182;</a>
              </div>
              <p>Get list of models from collection or array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          models = oj.isEvented(<span class="keyword">this</span>.models) ? <span class="keyword">this</span>.models.models : <span class="keyword">this</span>.models</pre></div></div>
            
        </li>
        
        
        <li id="section-338">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-338">&#182;</a>
              </div>
              <p>Add view item for every model</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          views = models.map(<span class="keyword">function</span>(model){<span class="keyword">return</span> _t._itemFromModel(model)})</pre></div></div>
            
        </li>
        
        
        <li id="section-339">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-339">&#182;</a>
              </div>
              <p>Items are already views so just use them</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.items != <span class="literal">null</span>) {
          views = <span class="keyword">this</span>.items
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-340">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-340">&#182;</a>
              </div>
              <p>Render the views</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">this</span>.$el.oj(<span class="keyword">function</span>(){<span class="keyword">return</span> views.map(<span class="keyword">function</span>(view){_t._itemElFromItem(view)}) })</pre></div></div>
            
        </li>
        
        
        <li id="section-341">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-341">&#182;</a>
              </div>
              <p>Indicate to CollectionView the items changed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">this</span>.itemsChanged()
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-342">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-342">&#182;</a>
              </div>
              <p>collectionModelAdded: Model add occurred, add the item</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      collectionModelAdded: <span class="keyword">function</span>(m, c){<span class="keyword">this</span>.add(c.indexOf(m), <span class="keyword">this</span>._itemFromModel(m))},</pre></div></div>
            
        </li>
        
        
        <li id="section-343">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-343">&#182;</a>
              </div>
              <p>collectionModelRemoved: Model remove occured, delete the item</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      collectionModelRemoved: <span class="keyword">function</span>(m, c, o){<span class="keyword">this</span>.remove(o.index)},</pre></div></div>
            
        </li>
        
        
        <li id="section-344">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-344">&#182;</a>
              </div>
              <p>collectionModelRemoved: Model reset occured, full rebuild</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      collectionReset: <span class="keyword">function</span>(){<span class="keyword">this</span>.make()},</pre></div></div>
            
        </li>
        
        
        <li id="section-345">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-345">&#182;</a>
              </div>
              <p>Helper Methods
_itemFromModel: Helper to map model to item</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      _itemFromModel: <span class="keyword">function</span>(model){
        <span class="keyword">var</span> _t = <span class="keyword">this</span>
        <span class="keyword">return</span> oj(<span class="keyword">function</span>(){<span class="keyword">return</span> _t.each(model)})
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-346">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-346">&#182;</a>
              </div>
              <p>_itemElFromItem: Helper to create itemTagName wrapped item</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      _itemElFromItem: <span class="keyword">function</span>(item){
        <span class="keyword">return</span> oj[<span class="keyword">this</span>.itemTagName](item)
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-347">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-347">&#182;</a>
              </div>
              <p>_bound: Bound index to allow negatives, throw when out of range</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      _bound: <span class="keyword">function</span>(ix, count, message){
        <span class="keyword">var</span> ixNew = ix &lt; <span class="number">0</span> ? ix + count : ix
        <span class="keyword">if</span> (!(<span class="number">0</span> &lt;= ixNew &amp;&amp; ixNew &lt; count))
          _e(<span class="keyword">this</span>.typeName, message + <span class="string">" is out of bounds ("</span> + ix + <span class="string">" in [0,"</span> + (count - <span class="number">1</span>) + <span class="string">"])"</span>)
        <span class="keyword">return</span> ixNew
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-348">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-348">&#182;</a>
              </div>
              <p>itemsChanged: Model changed occured, clear relevant cached values</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      itemsChanged: <span class="keyword">function</span>(){<span class="keyword">this</span>._items = <span class="literal">null</span>; <span class="keyword">this</span>._$items = <span class="literal">null</span>},</pre></div></div>
            
        </li>
        
        
        <li id="section-349">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-349">&#182;</a>
              </div>
              <p>Manipulation Methods</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      add: <span class="keyword">function</span>(ix, ojml){</pre></div></div>
            
        </li>
        
        
        <li id="section-350">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-350">&#182;</a>
              </div>
              <p>ix defaults to -1 and is optional</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (ojml == <span class="literal">null</span>){
          ojml = ix
          ix = -<span class="number">1</span>
        }

        ix = <span class="keyword">this</span>._bound(ix, <span class="keyword">this</span>.count + <span class="number">1</span>, <span class="string">".add: index"</span>)
        <span class="keyword">var</span> tag = <span class="keyword">this</span>.itemTagName</pre></div></div>
            
        </li>
        
        
        <li id="section-351">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-351">&#182;</a>
              </div>
              <p>Empty</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (<span class="keyword">this</span>.count === <span class="number">0</span>)
          <span class="keyword">this</span>.$el.oj(<span class="keyword">function</span>(){<span class="keyword">return</span> oj[tag](ojml)})</pre></div></div>
            
        </li>
        
        
        <li id="section-352">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-352">&#182;</a>
              </div>
              <p>Last</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">else</span> <span class="keyword">if</span> (ix === <span class="keyword">this</span>.count)
          <span class="keyword">this</span>.$item(ix - <span class="number">1</span>).ojAfter(<span class="keyword">function</span>(){<span class="keyword">return</span> oj[tag](ojml)})</pre></div></div>
            
        </li>
        
        
        <li id="section-353">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-353">&#182;</a>
              </div>
              <p>Not last</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">else</span>
          <span class="keyword">this</span>.$item(ix).ojBefore(<span class="keyword">function</span>(){<span class="keyword">return</span> oj[tag](ojml)})

        <span class="keyword">this</span>.itemsChanged()
      },

      remove: <span class="keyword">function</span>(ix){
        ix = _d(ix,-<span class="number">1</span>)
        ix = <span class="keyword">this</span>._bound(ix, <span class="keyword">this</span>.count, <span class="string">".remove: index"</span>)
        <span class="keyword">var</span> out = <span class="keyword">this</span>.item(ix)
        <span class="keyword">this</span>.$item(ix).remove()
        <span class="keyword">this</span>.itemsChanged()
        <span class="keyword">return</span> out
      },

      move: <span class="keyword">function</span>(ixFrom, ixTo){
        ixTo = _d(ixTo, -<span class="number">1</span>)
        <span class="keyword">if</span> (ixFrom === ixTo)
          <span class="keyword">return</span>
        ixFrom = <span class="keyword">this</span>._bound(ixFrom, <span class="keyword">this</span>.count, <span class="string">".move: fromIndex"</span>)
        ixTo = <span class="keyword">this</span>._bound(ixTo, <span class="keyword">this</span>.count, <span class="string">".move: toIndex"</span>)
        <span class="keyword">if</span> (ixTo &gt; ixFrom)
          <span class="keyword">this</span>.$item(ixFrom).insertAfter(<span class="keyword">this</span>.$item(ixTo))
        <span class="keyword">else</span>
          <span class="keyword">this</span>.$item(ixFrom).insertBefore(<span class="keyword">this</span>.$item(ixTo))
        <span class="keyword">this</span>.itemsChanged()
      },
      swap: <span class="keyword">function</span>(ix1, ix2){
        <span class="keyword">if</span> (ix1 === ix2)
          <span class="keyword">return</span>
        ix1 = <span class="keyword">this</span>._bound(ix1, <span class="keyword">this</span>.count, <span class="string">".swap: firstIndex"</span>)
        ix2 = <span class="keyword">this</span>._bound(ix2, <span class="keyword">this</span>.count, <span class="string">".swap: secondIndex"</span>)
        <span class="keyword">if</span> (Math.abs(ix1 - ix2) === <span class="number">1</span>)
          <span class="keyword">this</span>.move(ix1, ix2)
        <span class="keyword">else</span> {
          <span class="keyword">var</span> ixMin = Math.min(ix1, ix2),
            ixMax = Math.max(ix1, ix2)
          <span class="keyword">this</span>.move(ixMax, ixMin)
          <span class="keyword">this</span>.move(ixMin + <span class="number">1</span>, ixMax)
        }
        <span class="keyword">this</span>.itemsChanged()
      },
      unshift: <span class="keyword">function</span>(v){<span class="keyword">this</span>.add(<span class="number">0</span>, v)},
      shift: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.remove(<span class="number">0</span>)},
      push: <span class="keyword">function</span>(v){<span class="keyword">this</span>.add(<span class="keyword">this</span>.count, v)},
      pop: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.remove(-<span class="number">1</span>)},
      clear: <span class="keyword">function</span>(){<span class="keyword">this</span>.$items.remove(); <span class="keyword">this</span>.itemsChanged()}
    }
  })</pre></div></div>
            
        </li>
        
        
        <li id="section-354">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-354">&#182;</a>
              </div>
              <p>oj.NumberList: NumberList is a <code>List</code> specialized with <code>&lt;ol&gt;</code> and <code>&lt;li&gt;</code> tags</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.NumberList = oj.createType(<span class="string">'NumberList'</span>, {
    base: oj.List,
    constructor: <span class="keyword">function</span>(){
      <span class="keyword">var</span> args = [{tagName:<span class="string">'ol'</span>, itemTagName:<span class="string">'li'</span>}].concat(slice.call(arguments))
      <span class="keyword">return</span> oj.NumberList.base.constructor.apply(<span class="keyword">this</span>, args)
    }
  })</pre></div></div>
            
        </li>
        
        
        <li id="section-355">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-355">&#182;</a>
              </div>
              <p>oj.BulletList: BulletList is a <code>List</code> specialized with <code>&lt;ul&gt;</code> and <code>&lt;li&gt;</code> tags</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.BulletList = oj.createType(<span class="string">'BulletList'</span>, {
    base: oj.List,
    constructor: <span class="keyword">function</span>(){
      <span class="keyword">var</span> args = [{tagName:<span class="string">'ul'</span>, itemTagName:<span class="string">'li'</span>}].concat(slice.call(arguments))
      <span class="keyword">return</span> oj.BulletList.base.constructor.apply(<span class="keyword">this</span>, args)
    }
  })</pre></div></div>
            
        </li>
        
        
        <li id="section-356">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-356">&#182;</a>
              </div>
              <p>oj.Table</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.Table = oj.createType(<span class="string">'Table'</span>, {
    base: oj.CollectionView,
    constructor: <span class="keyword">function</span>(){
      <span class="keyword">var</span> _t = <span class="keyword">this</span>,
        u = oj.unionArguments(arguments),
        options = u.options,
        args = u.args,
        rows, ix</pre></div></div>
            
        </li>
        
        
        <li id="section-357">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-357">&#182;</a>
              </div>
              <p>Generate root</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">this</span>.el = oj(<span class="keyword">function</span>(){<span class="keyword">return</span> oj.table()})</pre></div></div>
            
        </li>
        
        
        <li id="section-358">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-358">&#182;</a>
              </div>
              <p>Use el if it was passed in</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (options.el != <span class="literal">null</span>)
        <span class="keyword">this</span>.el = oj.argumentShift(options, <span class="string">'el'</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-359">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-359">&#182;</a>
              </div>
              <p>Default @each function to pass through values</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (options.each == <span class="literal">null</span>){
        options.each = <span class="keyword">function</span>(model, cell){
          <span class="keyword">var</span> values = (oj.isString(model)) || (oj.isNumber(model)) || (oj.isBoolean(model)) ? [model] : (oj.isEvented(model)) &amp;&amp; <span class="keyword">typeof</span> model.attributes === <span class="string">'object'</span> ? _values(model.attributes) : _values(model)
          <span class="keyword">return</span> values.map(<span class="keyword">function</span>(v){cell(v)})
        }
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-360">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-360">&#182;</a>
              </div>
              <p>Args have been handled so don&#39;t pass them on</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      oj.Table.base.constructor.apply(<span class="keyword">this</span>, [options])</pre></div></div>
            
        </li>
        
        
        <li id="section-361">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-361">&#182;</a>
              </div>
              <p>Validate args as arrays</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">for</span>(ix = <span class="number">0</span>; ix &lt; args.length; ix++)
        _a(oj.isArray(args[ix]), <span class="string">'Table'</span>, <span class="string">'array expected for row arguments'</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-362">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-362">&#182;</a>
              </div>
              <p>Set @rows to options or args if they exist</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      rows = _d(oj.argumentShift(options, <span class="string">'rows'</span>), args)
      <span class="keyword">if</span> (rows.length &gt; <span class="number">0</span>)
        <span class="keyword">return</span> <span class="keyword">this</span>.rows = rows
    },
    properties: {</pre></div></div>
            
        </li>
        
        
        <li id="section-363">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-363">&#182;</a>
              </div>
              <p>rowCount: The number of rows (readonly)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      rowCount: {get: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.$trs.length}},</pre></div></div>
            
        </li>
        
        
        <li id="section-364">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-364">&#182;</a>
              </div>
              <p>columnCount: The number of columns (readonly)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      columnCount: {get: <span class="keyword">function</span>(){</pre></div></div>
            
        </li>
        
        
        <li id="section-365">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-365">&#182;</a>
              </div>
              <p>The number of columns is number of <code>&lt;tr&gt;</code> in rows, header, or footer</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">var</span> tflen, thlen, trlen
        <span class="keyword">if</span> ((trlen = <span class="keyword">this</span>.$tr(<span class="number">0</span>).find(<span class="string">'&gt; td'</span>).length) &gt; <span class="number">0</span>)
          <span class="keyword">return</span> trlen
        <span class="keyword">else</span> <span class="keyword">if</span> ((thlen = <span class="keyword">this</span>.$theadTR.find(<span class="string">'&gt; th'</span>).length) &gt; <span class="number">0</span>)
          <span class="keyword">return</span> thlen
        <span class="keyword">else</span> <span class="keyword">if</span> ((tflen = <span class="keyword">this</span>.$tfootTR.find(<span class="string">'&gt; td'</span>).length) &gt; <span class="number">0</span>)
          <span class="keyword">return</span> tflen
        <span class="keyword">return</span> <span class="number">0</span>
      }},</pre></div></div>
            
        </li>
        
        
        <li id="section-366">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-366">&#182;</a>
              </div>
              <p>rows: Row values as a list of lists as interpreted by ojValue plugin (readwrite)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      rows: {
        get: <span class="keyword">function</span>(){</pre></div></div>
            
        </li>
        
        
        <li id="section-367">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-367">&#182;</a>
              </div>
              <p>Get cached result</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="keyword">if</span> (<span class="keyword">this</span>._rows != <span class="literal">null</span>)
            <span class="keyword">return</span> <span class="keyword">this</span>._rows</pre></div></div>
            
        </li>
        
        
        <li id="section-368">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-368">&#182;</a>
              </div>
              <p>Calculate rows by mapping from td to ojValue</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="keyword">var</span> r, rx = <span class="number">0</span>
          <span class="keyword">this</span>._rows = []
          <span class="keyword">for</span> (; rx &lt; <span class="keyword">this</span>.rowCount; rx++){
            r = <span class="keyword">this</span>.$tdsRow(rx).toArray().map(<span class="keyword">function</span>(el){<span class="keyword">return</span> $(el).ojValue()})
            <span class="keyword">this</span>._rows.push(r)
          }
          <span class="keyword">return</span> <span class="keyword">this</span>._rows
        },
        set: <span class="keyword">function</span>(list){
          <span class="keyword">if</span> (!((list != <span class="literal">null</span>) &amp;&amp; list.length &gt; <span class="number">0</span>))
            <span class="keyword">return</span> <span class="keyword">this</span>.clearBody()
          <span class="keyword">this</span>._rows = list
          <span class="keyword">this</span>.make()
        }
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-369">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-369">&#182;</a>
              </div>
              <p>header: Array of header values as interpreted by ojValue plugin (readwrite)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      header: {
        get: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.$theadTR.find(<span class="string">'&gt; th'</span>).ojValues()},
        set: <span class="keyword">function</span>(list){
          _a(oj.isArray(list), <span class="keyword">this</span>.typeName + <span class="string">'.header'</span>, <span class="string">'array expected for first argument'</span>)

          <span class="keyword">if</span> (!((list != <span class="literal">null</span>) &amp;&amp; list.length &gt; <span class="number">0</span>))
            <span class="keyword">return</span> <span class="keyword">this</span>.clearHeader()

          <span class="keyword">return</span> <span class="keyword">this</span>.$theadTRMake.oj(<span class="keyword">function</span>(){
            <span class="keyword">return</span> list.map(<span class="keyword">function</span>(ojml){oj.th(ojml)})
          })
        }
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-370">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-370">&#182;</a>
              </div>
              <p>footer: Array of footer values as interpreted by ojValue plugin (readwrite)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      footer: {
        get: <span class="keyword">function</span>(){
          <span class="keyword">return</span> <span class="keyword">this</span>.$tfootTR.find(<span class="string">'&gt; td'</span>).ojValues()
        },
        set: <span class="keyword">function</span>(list){
          <span class="keyword">var</span> _t = <span class="keyword">this</span>

          <span class="keyword">if</span> (!oj.isArray(list)){
            <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">'oj.Table.footer: array expected for first argument'</span>)
          }
          <span class="keyword">if</span> (!((list != <span class="literal">null</span>) &amp;&amp; list.length &gt; <span class="number">0</span>)){
            <span class="keyword">return</span> <span class="keyword">this</span>.clearFooter()
          }
          <span class="keyword">return</span> <span class="keyword">this</span>.$tfootTRMake.oj(<span class="keyword">function</span>(){
            <span class="keyword">var</span> ojml, _j, _len1, _results

            _results = []
            <span class="keyword">for</span> (_j = <span class="number">0</span>, _len1 = list.length; _j &lt; _len1; _j++){
              ojml = list[_j]
              _results.push(oj.td(ojml))
            }
            <span class="keyword">return</span> _results
          })
        }
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-371">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-371">&#182;</a>
              </div>
              <p>caption: The table caption (readwrite)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      caption: {
        get: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.$caption.ojValue()},
        set: <span class="keyword">function</span>(v){<span class="keyword">this</span>.$captionMake.oj(v)}
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-372">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-372">&#182;</a>
              </div>
              <p>Element accessors</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $table: {get: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.$el}},
      $caption: {get: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.$(<span class="string">'&gt; caption'</span>)}},
      $colgroup: {get: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.$(<span class="string">'&gt; colgroup'</span>)}},
      $thead: {get: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.$(<span class="string">'&gt; thead'</span>)}},
      $tfoot: {get: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.$(<span class="string">'&gt; tfoot'</span>)}},
      $tbody: {get: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.$(<span class="string">'&gt; tbody'</span>)}},
      $theadTR: {get: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.$thead.find(<span class="string">'&gt; tr'</span>)}},
      $tfootTR: {get: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.$tfoot.find(<span class="string">'&gt; tr'</span>)}},
      $ths: {get: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.$theadTR.find(<span class="string">'&gt; th'</span>)}},
      $trs: {get: <span class="keyword">function</span>(){</pre></div></div>
            
        </li>
        
        
        <li id="section-373">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-373">&#182;</a>
              </div>
              <p>Cache or calculate</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">return</span> <span class="keyword">this</span>._$trs != <span class="literal">null</span> ? <span class="keyword">this</span>._$trs : <span class="keyword">this</span>._$trs = <span class="keyword">this</span>.$(<span class="string">"&gt; tbody &gt; tr"</span>)
      }},</pre></div></div>
            
        </li>
        
        
        <li id="section-374">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-374">&#182;</a>
              </div>
              <p>Table tags must have an order: <code>&lt;caption&gt;</code> <code>&lt;colgroup&gt;</code> <code>&lt;thead&gt;</code> <code>&lt;tfoot&gt;</code> <code>&lt;tbody&gt;</code>
These accessors create table tags and preserve this order very carefully
$colgroupMake: get or create <code>&lt;colgroup&gt;</code> after <code>&lt;caption&gt;</code> or prepended to <code>&lt;table&gt;</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $colgroupMake: {get: <span class="keyword">function</span>(){
        <span class="keyword">if</span> (<span class="keyword">this</span>.$colgroup.length &gt; <span class="number">0</span>)
          <span class="keyword">return</span> <span class="keyword">this</span>.$colgroup
        t = <span class="string">'&lt;colgroup&gt;&lt;/colgroup&gt;'</span>
        <span class="keyword">if</span> (<span class="keyword">this</span>.$caption.length &gt; <span class="number">0</span>)
          <span class="keyword">this</span>.$caption.insertAfter(t)
        <span class="keyword">else</span>
          <span class="keyword">this</span>.$table.append(t)
        <span class="keyword">return</span> <span class="keyword">this</span>.$tbody
      }},</pre></div></div>
            
        </li>
        
        
        <li id="section-375">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-375">&#182;</a>
              </div>
              <p>$captionMake: get or create <code>&lt;caption&gt;</code> prepended to <code>&lt;table&gt;</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $captionMake: {
        get: <span class="keyword">function</span>(){
          <span class="keyword">if</span> (<span class="keyword">this</span>.$caption.length &gt; <span class="number">0</span>)
            <span class="keyword">return</span> <span class="keyword">this</span>.$caption
          <span class="keyword">this</span>.$table.prepend(<span class="string">'&lt;caption&gt;&lt;/caption&gt;'</span>)
          <span class="keyword">return</span> <span class="keyword">this</span>.$caption
        }
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-376">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-376">&#182;</a>
              </div>
              <p>$tfootMake: get or create <code>&lt;tfoot&gt;</code> before <code>&lt;tbody&gt;</code> or appended to <code>&lt;table&gt;</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $tfootMake: {
        get: <span class="keyword">function</span>(){
          <span class="keyword">if</span> (<span class="keyword">this</span>.$tfoot.length &gt; <span class="number">0</span>)
            <span class="keyword">return</span> <span class="keyword">this</span>.$tfoot
          t = <span class="string">'&lt;tfoot&gt;&lt;/tfoot&gt;'</span>
          <span class="keyword">if</span> (<span class="keyword">this</span>.$tfoot.length &gt; <span class="number">0</span>)
            <span class="keyword">this</span>.$tfoot.insertBefore(t)
          <span class="keyword">else</span>
            <span class="keyword">this</span>.$table.append(t)

          <span class="keyword">return</span> <span class="keyword">this</span>.$tfoot
        }
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-377">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-377">&#182;</a>
              </div>
              <p>$theadMake: get or create <code>&lt;thead&gt;</code> after <code>&lt;colgroup&gt;</code> or after <code>&lt;caption&gt;</code>, or prepended to <code>&lt;table&gt;</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $theadMake: {
        get: <span class="keyword">function</span>(){
          <span class="keyword">if</span> (<span class="keyword">this</span>.$thead.length &gt; <span class="number">0</span>)
            <span class="keyword">return</span> <span class="keyword">this</span>.$thead
          t = <span class="string">'&lt;thead&gt;&lt;/thead&gt;'</span>
          <span class="keyword">if</span> (<span class="keyword">this</span>.$colgroup.length &gt; <span class="number">0</span>)
            <span class="keyword">this</span>.$colgroup.insertAfter(t)
          <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.$caption.length &gt; <span class="number">0</span>)
            <span class="keyword">this</span>.$caption.insertAfter(t)
          <span class="keyword">else</span>
            <span class="keyword">this</span>.$table.prepend(t)
          <span class="keyword">return</span> <span class="keyword">this</span>.$thead
        }
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-378">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-378">&#182;</a>
              </div>
              <p>$tbodyMake: get or create <code>&lt;tbody&gt;</code> appened to <code>&lt;table&gt;</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $tbodyMake: {
        get: <span class="keyword">function</span>(){
          <span class="keyword">if</span> (<span class="keyword">this</span>.$tbody.length &gt; <span class="number">0</span>)
            <span class="keyword">return</span> <span class="keyword">this</span>.$tbody
          <span class="keyword">this</span>.$table.append(<span class="string">'&lt;tbody&gt;&lt;/tbody&gt;'</span>)
          <span class="keyword">return</span> <span class="keyword">this</span>.$tbody
        }
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-379">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-379">&#182;</a>
              </div>
              <p>$theadTRMake: get or create <code>&lt;tr&gt;</code> inside of <code>&lt;thead&gt;</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $theadTRMake: {
        get: <span class="keyword">function</span>(){
          <span class="keyword">if</span> (<span class="keyword">this</span>.$theadTR.length &gt; <span class="number">0</span>)
            <span class="keyword">return</span> <span class="keyword">this</span>.$theadTR
          <span class="keyword">this</span>.$theadMake.html(<span class="string">'&lt;tr&gt;&lt;/tr&gt;'</span>)
          <span class="keyword">return</span> <span class="keyword">this</span>.$theadTR
        }
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-380">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-380">&#182;</a>
              </div>
              <p>$tfootTRMake: get or create <code>&lt;tr&gt;</code> inside of <code>&lt;tfoot&gt;</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $tfootTRMake: {
        get: <span class="keyword">function</span>(){
          <span class="keyword">if</span> (<span class="keyword">this</span>.$tfootTR.length &gt; <span class="number">0</span>)
            <span class="keyword">return</span> <span class="keyword">this</span>.$tfootTR
          <span class="keyword">this</span>.$tfootMake.html(<span class="string">'&lt;tr&gt;&lt;/tr&gt;'</span>)
          <span class="keyword">return</span> <span class="keyword">this</span>.$tfootTR
        }
      }
    },

    methods: {</pre></div></div>
            
        </li>
        
        
        <li id="section-381">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-381">&#182;</a>
              </div>
              <p>make: Remake everything (override)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      make: <span class="keyword">function</span>(){
        <span class="keyword">if</span> (!<span class="keyword">this</span>.isConstructed)
          <span class="keyword">return</span></pre></div></div>
            
        </li>
        
        
        <li id="section-382">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-382">&#182;</a>
              </div>
              <p>Some properties call make before construction completes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">var</span> _t = <span class="keyword">this</span>, models, rowViews = []</pre></div></div>
            
        </li>
        
        
        <li id="section-383">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-383">&#182;</a>
              </div>
              <p>Convert models to views if model/each exists</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> ((<span class="keyword">this</span>.models != <span class="literal">null</span>) &amp;&amp; (<span class="keyword">this</span>.each != <span class="literal">null</span>)){
          models = oj.isEvented(<span class="keyword">this</span>.models) ? <span class="keyword">this</span>.models.models : <span class="keyword">this</span>._models
          rowViews = models.map(<span class="keyword">function</span>(model){<span class="keyword">return</span> _t._rowFromModel(model)})</pre></div></div>
            
        </li>
        
        
        <li id="section-384">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-384">&#182;</a>
              </div>
              <p>Convert rows to views</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.rows != <span class="literal">null</span>){
          rowViews = <span class="keyword">this</span>.rows.map(<span class="keyword">function</span>(row){
            <span class="keyword">return</span> oj(<span class="keyword">function</span>(){
              row.forEach(<span class="keyword">function</span>(cell){oj.td(cell)})
            })
          })
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-385">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-385">&#182;</a>
              </div>
              <p>Render rows into tbody</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (rowViews.length &gt; <span class="number">0</span>)
          <span class="keyword">this</span>.$tbodyMake.oj(<span class="keyword">function</span>(){
            rowViews.forEach(<span class="keyword">function</span>(r){
              oj.tr(r)
            })
          })

        <span class="keyword">this</span>.bodyChanged()
      },

      collectionModelAdded: <span class="keyword">function</span>(m, c){
        <span class="keyword">var</span> rx = c.indexOf(m),
          row = <span class="keyword">this</span>._rowFromModel(m)
        <span class="keyword">this</span>._addRowTR(rx, oj(<span class="keyword">function</span>(){
          <span class="keyword">return</span> oj.tr(row)
        }))
      },

      collectionModelRemoved: <span class="keyword">function</span>(m, c, o){<span class="keyword">this</span>.removeRow(o.index)},

      collectionReset: <span class="keyword">function</span>(){<span class="keyword">this</span>.make()},</pre></div></div>
            
        </li>
        
        
        <li id="section-386">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-386">&#182;</a>
              </div>
              <p>$tr: Get <code>&lt;tr&gt;</code> jquery element at row rx</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $tr: <span class="keyword">function</span>(rx){
        rx = rx &lt; <span class="number">0</span> ? rx + count : rx
        <span class="keyword">return</span> <span class="keyword">this</span>.$trs.eq(rx)
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-387">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-387">&#182;</a>
              </div>
              <p>$tdsRow: Get list of <code>&lt;td&gt;</code>s in row rx</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $tdsRow: <span class="keyword">function</span>(rx){
        rx = rx &lt; <span class="number">0</span> ? rx + count : rx
        <span class="keyword">return</span> <span class="keyword">this</span>.$tr(rx).find(<span class="string">'&gt; td'</span>)
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-388">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-388">&#182;</a>
              </div>
              <p>$td: Get <code>&lt;td&gt;</code> row rx, column cx</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $td: <span class="keyword">function</span>(rx, cx){
        rx = rx &lt; <span class="number">0</span> ? rx + <span class="keyword">this</span>.rowCount : rx
        cx = cx &lt; <span class="number">0</span> ? cx + <span class="keyword">this</span>.columnCount : cx
        <span class="keyword">return</span> <span class="keyword">this</span>.$tdsRow(rx).eq(cx)
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-389">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-389">&#182;</a>
              </div>
              <p>row: Get values at a given row</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      row: <span class="keyword">function</span>(rx, listOJML){
        rx = <span class="keyword">this</span>._bound(rx, <span class="keyword">this</span>.rowCount, <span class="string">".row: rx"</span>)

        <span class="keyword">if</span> (listOJML != <span class="literal">null</span>){
          _a(listOJML.length === cellCount(rx), <span class="keyword">this</span>.typeName, <span class="string">"array expected for second argument with length ("</span> + rx + <span class="string">")"</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-390">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-390">&#182;</a>
              </div>
              <p>Set tds</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          listOJML.forEach(<span class="keyword">function</span>(ojml,cx){
            <span class="keyword">this</span>.$td(rx, cx).oj(ojml)
          })

        } <span class="keyword">else</span> {
          <span class="keyword">return</span> <span class="keyword">this</span>.$tdsRow(rx).ojValues()
        }
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-391">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-391">&#182;</a>
              </div>
              <p>cell: Get or set value at row rx, column cx</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      cell: <span class="keyword">function</span>(rx, cx, ojml){
        <span class="keyword">if</span> (ojml != <span class="literal">null</span>)
          <span class="keyword">return</span> <span class="keyword">this</span>.$td(rx, cx).oj(ojml)
        <span class="keyword">else</span>
          <span class="keyword">return</span> <span class="keyword">this</span>.$td(rx, cx).ojValue()
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-392">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-392">&#182;</a>
              </div>
              <p>addRow: Add row to index rx</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      addRow: <span class="keyword">function</span>(rx, listOJML){

        <span class="keyword">if</span> (listOJML == <span class="literal">null</span>){
          listOJML = rx
          rx = -<span class="number">1</span>
        }
        rx = <span class="keyword">this</span>._bound(rx, <span class="keyword">this</span>.rowCount + <span class="number">1</span>, <span class="string">".addRow: rx"</span>)
        _a(oj.isArray(listOJML), <span class="string">'addRow'</span>, <span class="string">'expected array for row content'</span>)

        <span class="keyword">this</span>._addRowTR(rx, <span class="keyword">function</span>(){
          oj.tr(<span class="keyword">function</span>(){
            listOJML.forEach(<span class="keyword">function</span>(cell){
              oj.td(cell)
            })
          })
        })
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-393">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-393">&#182;</a>
              </div>
              <p>_addRowTR: Helper to add row directly with <code>&lt;tr&gt;</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      _addRowTR: <span class="keyword">function</span>(rx, tr){</pre></div></div>
            
        </li>
        
        
        <li id="section-394">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-394">&#182;</a>
              </div>
              <p>Empty</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (<span class="keyword">this</span>.rowCount === <span class="number">0</span>)
          <span class="keyword">this</span>.$el.oj(tr)</pre></div></div>
            
        </li>
        
        
        <li id="section-395">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-395">&#182;</a>
              </div>
              <p>Last</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">else</span> <span class="keyword">if</span> (rx === <span class="keyword">this</span>.rowCount)
          <span class="keyword">this</span>.$tr(rx - <span class="number">1</span>).ojAfter(tr)</pre></div></div>
            
        </li>
        
        
        <li id="section-396">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-396">&#182;</a>
              </div>
              <p>Not last</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">else</span>
          <span class="keyword">this</span>.$tr(rx).ojBefore(tr)

        <span class="keyword">this</span>.bodyChanged()
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-397">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-397">&#182;</a>
              </div>
              <p>removeRow: Remove row at index rx (defaults to end)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      removeRow: <span class="keyword">function</span>(rx){
        <span class="keyword">if</span> (rx == <span class="literal">null</span>)
          rx = -<span class="number">1</span>
        rx = <span class="keyword">this</span>._bound(rx, <span class="keyword">this</span>.rowCount, <span class="string">".removeRow: index"</span>)
        <span class="keyword">var</span> out = <span class="keyword">this</span>.row(rx)
        <span class="keyword">this</span>.$tr(rx).remove()
        <span class="keyword">this</span>.bodyChanged()
        <span class="keyword">return</span> out
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-398">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-398">&#182;</a>
              </div>
              <p>moveRow: Move row at index rx (defaults to end)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      moveRow: <span class="keyword">function</span>(rxFrom, rxTo){
        <span class="keyword">if</span> (rxFrom === rxTo)
          <span class="keyword">return</span>

        rxFrom = <span class="keyword">this</span>._bound(rxFrom, <span class="keyword">this</span>.rowCount, <span class="string">".moveRow: fromIndex"</span>)
        rxTo = <span class="keyword">this</span>._bound(rxTo, <span class="keyword">this</span>.rowCount, <span class="string">".moveRow: toIndex"</span>)
        <span class="keyword">var</span> insert = rxTo &gt; rxFrom ? <span class="string">'insertAfter'</span> : <span class="string">'insertBefore'</span>
        <span class="keyword">this</span>.$tr(rxFrom)[insert](<span class="keyword">this</span>.$tr(rxTo))
        <span class="keyword">this</span>.bodyChanged()
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-399">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-399">&#182;</a>
              </div>
              <p>swapRow: Swap row rx1 and rx2</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      swapRow: <span class="keyword">function</span>(rx1, rx2){
        <span class="keyword">if</span> (rx1 === rx2)
          <span class="keyword">return</span>
        rx1 = <span class="keyword">this</span>._bound(rx1, <span class="keyword">this</span>.rowCount, <span class="string">".swap: firstIndex"</span>)
        rx2 = <span class="keyword">this</span>._bound(rx2, <span class="keyword">this</span>.rowCount, <span class="string">".swap: secondIndex"</span>)
        <span class="keyword">if</span> (Math.abs(rx1 - rx2) === <span class="number">1</span>)
          <span class="keyword">this</span>.moveRow(rx1, rx2)
        <span class="keyword">else</span> {
          <span class="keyword">var</span> rxMin = Math.min(rx1, rx2),
            rxMax = Math.max(rx1, rx2)
          <span class="keyword">this</span>.moveRow(rxMax, rxMin)
          <span class="keyword">this</span>.moveRow(rxMin + <span class="number">1</span>, rxMax)
        }
        <span class="keyword">this</span>.bodyChanged()
      },
      unshiftRow: <span class="keyword">function</span>(v){<span class="keyword">this</span>.addRow(<span class="number">0</span>, v)},
      shiftRow: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.removeRow(<span class="number">0</span>)},
      pushRow: <span class="keyword">function</span>(v){<span class="keyword">this</span>.addRow(<span class="keyword">this</span>.rowCount, v)},
      popRow: <span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.removeRow(-<span class="number">1</span>)},
      clearColgroup: <span class="keyword">function</span>(){<span class="keyword">this</span>.$colgroup.remove()},
      clearBody: <span class="keyword">function</span>(){
        <span class="keyword">this</span>.$tbody.remove()
        <span class="keyword">this</span>.bodyChanged()
      },
      clearHeader: <span class="keyword">function</span>(){
        <span class="keyword">this</span>.$thead.remove()
        <span class="keyword">this</span>.headerChanged()
      },
      clearFooter: <span class="keyword">function</span>(){
        <span class="keyword">this</span>.$tfoot.remove()
        <span class="keyword">this</span>.footerChanged()
      },
      clearCaption: <span class="keyword">function</span>(){
        <span class="keyword">this</span>.$caption.remove();
      },
      clear: <span class="keyword">function</span>(){
        <span class="keyword">this</span>.clearBody()
        <span class="keyword">this</span>.clearHeader()
        <span class="keyword">this</span>.clearFooter()
        <span class="keyword">return</span> <span class="keyword">this</span>.$caption.remove()
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-400">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-400">&#182;</a>
              </div>
              <p>When body changes clear relevant cached values</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      bodyChanged: <span class="keyword">function</span>(){<span class="keyword">this</span>._rows = <span class="literal">null</span>; <span class="keyword">this</span>._columns = <span class="literal">null</span>; <span class="keyword">this</span>._$trs = <span class="literal">null</span>},</pre></div></div>
            
        </li>
        
        
        <li id="section-401">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-401">&#182;</a>
              </div>
              <p>When header changes clear relevant cached values</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      headerChanged: <span class="keyword">function</span>(){<span class="keyword">this</span>._header = <span class="literal">null</span>},</pre></div></div>
            
        </li>
        
        
        <li id="section-402">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-402">&#182;</a>
              </div>
              <p>When footer changes clear relevant cached values</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      footerChanged: <span class="keyword">function</span>(){<span class="keyword">this</span>._footer = <span class="literal">null</span>},</pre></div></div>
            
        </li>
        
        
        <li id="section-403">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-403">&#182;</a>
              </div>
              <p>_rowFromModel: Helper to map model to row</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      _rowFromModel: <span class="keyword">function</span>(model){
        <span class="keyword">var</span> _t = <span class="keyword">this</span>
        <span class="keyword">return</span> oj(<span class="keyword">function</span>(){
          <span class="keyword">return</span> _t.each(model, oj.td)
        })
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-404">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-404">&#182;</a>
              </div>
              <p>_bound: Bound index to allow negatives, throw when out of range</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      _bound: <span class="keyword">function</span>(ix, count, message){
        <span class="keyword">var</span> ixNew = ix &lt; <span class="number">0</span> ? ix + count : ix
        <span class="keyword">if</span> (!(<span class="number">0</span> &lt;= ixNew &amp;&amp; ixNew &lt; count)){
          <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">"oj."</span> + <span class="keyword">this</span>.typeName + message + <span class="string">" is out of bounds ("</span> + ix + <span class="string">" in [0,"</span> + (count - <span class="number">1</span>) + <span class="string">"])"</span>)
        }
        <span class="keyword">return</span> ixNew
      }
    }
  })</pre></div></div>
            
        </li>
        
        
        <li id="section-405">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-405">&#182;</a>
              </div>
              <p>Create Quiet _Types</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="keyword">for</span> (<span class="keyword">var</span> typeName <span class="keyword">in</span> oj){</pre></div></div>
            
        </li>
        
        
        <li id="section-406">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-406">&#182;</a>
              </div>
              <p>Type with captital first letter that doesn&#39;t end in &quot;View&quot;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (_isCapitalLetter(typeName[<span class="number">0</span>]) &amp;&amp; typeName.slice(typeName.length - <span class="number">4</span>) !== <span class="string">'View'</span>){
      oj[_getQuietTagName(typeName)] = _createQuietType(typeName)
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-407">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-407">&#182;</a>
              </div>
              <p>oj.sandbox: The sandbox is a readonly version of oj exposed to the user when templating server-side</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.sandbox = {}
  _keys(oj).forEach(<span class="keyword">function</span>(key){
    <span class="keyword">if</span> ((key.length &gt; <span class="number">0</span> &amp;&amp; key[<span class="number">0</span>] !== <span class="string">'_'</span>) || (key.length &gt; <span class="number">0</span> &amp;&amp; key[<span class="number">0</span>] === <span class="string">'_'</span> &amp;&amp; (oj[key.slice(<span class="number">1</span>)] != <span class="literal">null</span>))){
      oj.addProperty(oj.sandbox, key, {value: oj[key], writable: <span class="literal">false</span>})
    }
  })</pre></div></div>
            
        </li>
        
        
        <li id="section-408">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-408">&#182;</a>
              </div>
              <p>oj.use(plugin, settings): import a plugin of OJ with optional settings</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.use = <span class="keyword">function</span>(plugin, settings){
    settings = _d(settings, {})
    _v(<span class="string">'use'</span>, <span class="number">1</span>, plugin, <span class="string">'function'</span>)
    _v(<span class="string">'use'</span>, <span class="number">2</span>, settings, <span class="string">'object'</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-409">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-409">&#182;</a>
              </div>
              <p>Call plugin to gather extension map</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> pluginResult = plugin(oj, settings),
      pluginMap =  _clone(pluginResult),
      name, value</pre></div></div>
            
        </li>
        
        
        <li id="section-410">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-410">&#182;</a>
              </div>
              <p>Add _Type quiet types</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">for</span> (name <span class="keyword">in</span> pluginResult){
      value = pluginResult[name]
      <span class="keyword">if</span> (oj.isOJType(value))
        pluginMap[_getQuietTagName(name)] = _createQuietType(value.typeName)
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-411">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-411">&#182;</a>
              </div>
              <p>Extend all properties</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">for</span> (name <span class="keyword">in</span> pluginMap){
      value = pluginMap[name]</pre></div></div>
            
        </li>
        
        
        <li id="section-412">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-412">&#182;</a>
              </div>
              <p>Add to oj</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      oj[name] = value</pre></div></div>
            
        </li>
        
        
        <li id="section-413">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-413">&#182;</a>
              </div>
              <p>Add plugin to sandbox</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      oj.addProperty(oj.sandbox, name, {value: value, writable: <span class="literal">false</span>})
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-414">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-414">&#182;</a>
              </div>
              <p>_jqExtend(fn): Create a jquery plugin with the following options:
  option.get is called to retrieve value per element
  option.set is called when setting elements
  option.first:true means return only the first get,
    otherwise it is returned as an array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_jqExtend</span><span class="params">(options)</span>{</span>
    <span class="keyword">if</span> (options == <span class="literal">null</span>)
      options = {}

    options = _extend({
      get: pass,
      set: pass,
      first: <span class="literal">false</span>
    }, options)

    <span class="keyword">return</span> <span class="keyword">function</span>(){
      <span class="keyword">var</span> el, out, r, ix,
        args = _toArray(arguments),
        $els = jQuery(<span class="keyword">this</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-415">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-415">&#182;</a>
              </div>
              <p>Map over jquery selection if no arguments</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> ((oj.isFunction(options.get)) &amp;&amp; args.length === <span class="number">0</span>){
        out = []
        <span class="keyword">for</span> (ix = <span class="number">0</span>; ix &lt; $els.length; ix++){
          el = $els[ix]
          out.push(options.get(oj.$(el)))
          <span class="keyword">if</span> (options.first)
            <span class="keyword">return</span> out[<span class="number">0</span>]
        }
        <span class="keyword">return</span> out
      } <span class="keyword">else</span> <span class="keyword">if</span> (oj.isFunction(options.set)){</pre></div></div>
            
        </li>
        
        
        <li id="section-416">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-416">&#182;</a>
              </div>
              <p>By default return this for chaining</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        out = $els
        <span class="keyword">for</span> (ix = <span class="number">0</span>; ix &lt; $els.length; ix++){
          el = $els[ix]
          r = options.set(oj.$(el), args)</pre></div></div>
            
        </li>
        
        
        <li id="section-417">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-417">&#182;</a>
              </div>
              <p>Short circuit if anything is returned</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="keyword">if</span> (r != <span class="literal">null</span>)
            <span class="keyword">return</span> r
        }
        <span class="keyword">return</span> $els
      }
    }
  }

  <span class="function"><span class="keyword">function</span> <span class="title">_triggerInserted</span><span class="params">(types, inserts)</span>{</span>
    <span class="keyword">var</span> ix = <span class="number">0</span>
    <span class="keyword">for</span> (; ix &lt;  types.length; ix++)
      types[ix].inserted()
    <span class="keyword">if</span>(inserts) {
      <span class="keyword">for</span> (ix = <span class="number">0</span>; ix &lt; inserts.length; ix++)
        inserts[ix]()
    }
  }

  <span class="function"><span class="keyword">function</span> <span class="title">_insertStyles</span><span class="params">(pluginMap, options)</span>{</span>
    <span class="keyword">var</span> mediaMap, plugin
    <span class="keyword">for</span> (plugin <span class="keyword">in</span> pluginMap){
      mediaMap = pluginMap[plugin]</pre></div></div>
            
        </li>
        
        
        <li id="section-418">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-418">&#182;</a>
              </div>
              <p>Skip global css if options.global is true</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (plugin === <span class="string">'oj-style'</span> &amp;&amp; !(options != <span class="literal">null</span> ? options.global : <span class="number">0</span>))
        <span class="keyword">continue</span></pre></div></div>
            
        </li>
        
        
        <li id="section-419">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-419">&#182;</a>
              </div>
              <p>Create <style> tag for the plugin</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (oj.$(<span class="string">'.'</span> + _styleClassFromPlugin(plugin)).length === <span class="number">0</span>)
        oj.$(<span class="string">'head'</span>).append(oj._styleTagFromMediaObject(plugin, mediaMap))
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-420">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-420">&#182;</a>
              </div>
              <p>oj jquery plugin: Insert like innertHTML or get first instance</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.$.fn.oj = _jqExtend({</pre></div></div>
            
        </li>
        
        
        <li id="section-421">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-421">&#182;</a>
              </div>
              <p>Get returns the first instance</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    get: <span class="keyword">function</span>($el){<span class="keyword">return</span> $el[<span class="number">0</span>].oj},</pre></div></div>
            
        </li>
        
        
        <li id="section-422">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-422">&#182;</a>
              </div>
              <p>Set compiles and inserts in innerHTML</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    set: <span class="keyword">function</span>($el, args){</pre></div></div>
            
        </li>
        
        
        <li id="section-423">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-423">&#182;</a>
              </div>
              <p>No arguments return the first instance</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (args.length === <span class="number">0</span>)
        <span class="keyword">return</span> $el[<span class="number">0</span>].oj</pre></div></div>
            
        </li>
        
        
        <li id="section-424">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-424">&#182;</a>
              </div>
              <p>Compile ojml</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">var</span> r = oj.compile.apply(oj, [{dom: <span class="number">1</span>, html: <span class="number">0</span>, cssMap: <span class="number">1</span> }].concat(slice.call(args)))

      _insertStyles(r.cssMap, {global: <span class="number">0</span>})</pre></div></div>
            
        </li>
        
        
        <li id="section-425">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-425">&#182;</a>
              </div>
              <p>Reset content and append to dom</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $el.html(<span class="string">''</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-426">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-426">&#182;</a>
              </div>
              <p>Ensure r.dom is an array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (!oj.isArray(r.dom))
        r.dom = [r.dom]</pre></div></div>
            
        </li>
        
        
        <li id="section-427">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-427">&#182;</a>
              </div>
              <p>Append resulting dom elements</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">for</span> (<span class="keyword">var</span> ix = <span class="number">0</span>; ix &lt; r.dom.length; ix++)
        $el.append(r.dom[ix])</pre></div></div>
            
        </li>
        
        
        <li id="section-428">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-428">&#182;</a>
              </div>
              <p>Trigger inserted events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      _triggerInserted(r.types, r.inserts)
    }
  })</pre></div></div>
            
        </li>
        
        
        <li id="section-429">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-429">&#182;</a>
              </div>
              <p>jQuery.ojBody plugin: replace body with ojml.
Global css is rebuilt when using this method.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.$.ojBody = <span class="keyword">function</span>(ojml){</pre></div></div>
            
        </li>
        
        
        <li id="section-430">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-430">&#182;</a>
              </div>
              <p>Compile only the body and below</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> bodyOnly = {html: <span class="number">1</span>, <span class="string">'!DOCTYPE'</span>: <span class="number">1</span>, body: <span class="number">1</span>, head: <span class="string">'deep'</span>, meta: <span class="number">1</span>, title: <span class="string">'deep'</span>, link: <span class="string">'deep'</span>, script: <span class="string">'deep'</span>}

    <span class="keyword">try</span> {
      <span class="keyword">var</span> r = oj.compile({dom: <span class="number">1</span>, html: <span class="number">0</span>, css: <span class="number">0</span>, cssMap: <span class="number">1</span>, ignore: bodyOnly }, ojml)
    } <span class="keyword">catch</span> (e){
      <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">"oj.compile: "</span> + e.message)
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-431">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-431">&#182;</a>
              </div>
              <p>Clear body and insert dom elements</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (r.dom != <span class="literal">null</span>)
      oj.$(<span class="string">'body'</span>).html(r.dom)

    _insertStyles(r.cssMap, {global:<span class="number">1</span>})

    _triggerInserted(r.types, r.inserts)
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-432">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-432">&#182;</a>
              </div>
              <p>Helper method that abstracts getting oj values</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_jqGetValue</span><span class="params">($el, args)</span>{</span>
    <span class="keyword">var</span> el = $el[<span class="number">0</span>],
      child = el.firstChild</pre></div></div>
            
        </li>
        
        
        <li id="section-433">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-433">&#182;</a>
              </div>
              <p>Parse the text to turn it into bool, number, or string</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (oj.isDOMText(child))
      <span class="keyword">return</span> oj.parse(child.nodeValue)</pre></div></div>
            
        </li>
        
        
        <li id="section-434">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-434">&#182;</a>
              </div>
              <p>Get elements as oj instances or elements</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">else</span> <span class="keyword">if</span> (oj.isDOMElement(child))
      <span class="keyword">return</span> _d(_getInstanceOnElement(child), child)
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-435">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-435">&#182;</a>
              </div>
              <p>jQuery.fn.ojValue: Get the first value of the selected contents</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.$.fn.ojValue = _jqExtend({first: <span class="literal">true</span>, set: <span class="literal">null</span>, get: _jqGetValue })</pre></div></div>
            
        </li>
        
        
        <li id="section-436">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-436">&#182;</a>
              </div>
              <p>jQuery.fn.ojValues: Get values as an array of the selected element&#39;s contents</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj.$.fn.ojValues = _jqExtend({first: <span class="literal">false</span>, set: <span class="literal">null</span>, get: _jqGetValue})</pre></div></div>
            
        </li>
        
        
        <li id="section-437">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-437">&#182;</a>
              </div>
              <p>jQuery.fn.ojAfter, ojBefore, etc: oj insertion plugins to jquery</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="keyword">var</span> jqFromOJ = {
    ojAfter: <span class="string">'after'</span>,
    ojBefore: <span class="string">'before'</span>,
    ojAppend: <span class="string">'append'</span>,
    ojPrepend: <span class="string">'prepend'</span>,
    ojReplaceWith: <span class="string">'replaceWith'</span>,
    ojWrap: <span class="string">'wrap'</span>,
    ojWrapInner: <span class="string">'wrapInner'</span>
  }
  <span class="keyword">for</span> (<span class="keyword">var</span> ojName <span class="keyword">in</span> jqFromOJ){
    <span class="keyword">var</span> jqName = jqFromOJ[ojName]
    ;(<span class="keyword">function</span>(ojName, jqName){
      oj.$.fn[ojName] = _jqExtend({
        set: <span class="keyword">function</span>($el, args){</pre></div></div>
            
        </li>
        
        
        <li id="section-438">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-438">&#182;</a>
              </div>
              <p>Compile ojml for each one to separate references</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="keyword">var</span> opts = {dom:<span class="number">1</span>,html:<span class="number">0</span>,css:<span class="number">0</span>,cssMap:<span class="number">1</span>},
            r = oj.compile.apply(oj, [opts].concat(slice.call(args)))
          _insertStyles(r.cssMap, {global: <span class="number">0</span>})</pre></div></div>
            
        </li>
        
        
        <li id="section-439">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-439">&#182;</a>
              </div>
              <p>Append to the dom</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          $el[jqName](r.dom)
          _triggerInserted(r.types, r.inserts)
        },
        get: <span class="literal">null</span>
      })
    })(ojName, jqName)
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-440">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-440">&#182;</a>
              </div>
              <p>Minify Helpers that hook into server-side minification</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  oj._minifyJS = pass
  oj._minifyCSS = pass</pre></div></div>
            
        </li>
        
        
        <li id="section-441">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-441">&#182;</a>
              </div>
              <p>Path Helpers: Used to implement require client side
Simplified from: github.com/joyent/node/lib/path.js</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="keyword">var</span> _pathRx = <span class="regexp">/^(\/?)([\s\S]+\/(?!$)|\/)?((?:\.{1,2}$|[\s\S]+?)?(\.[^.\/]*)?)$/</span>

  <span class="function"><span class="keyword">function</span> <span class="title">_pathSplit</span><span class="params">(fname)</span>{</span>
    <span class="keyword">var</span> result = _pathRx.exec(fname)
    <span class="keyword">return</span> [result[<span class="number">1</span>] || <span class="string">''</span>, result[<span class="number">2</span>] || <span class="string">''</span>, result[<span class="number">3</span>] || <span class="string">''</span>, result[<span class="number">4</span>] || <span class="string">''</span>]
  }

  <span class="function"><span class="keyword">function</span> <span class="title">_pathNormArray</span><span class="params">(parts, allowAboveRoot)</span>{</span>
    <span class="keyword">var</span> up = <span class="number">0</span>,
      i = parts.length - <span class="number">1</span>,
      last
    <span class="keyword">while</span> (i &gt;= <span class="number">0</span>){
      last = parts[i]
      <span class="keyword">if</span> (last === <span class="string">'.'</span>)
        parts.splice(i, <span class="number">1</span>)
      <span class="keyword">else</span> <span class="keyword">if</span> (last === <span class="string">'..'</span>){
        parts.splice(i, <span class="number">1</span>)
        up++
      } <span class="keyword">else</span> <span class="keyword">if</span> (up){
        parts.splice(i, <span class="number">1</span>)
        up--
      }
      i--
    }
    <span class="keyword">if</span> (allowAboveRoot)
      <span class="keyword">while</span> (up--)
        parts.unshift(<span class="string">'..'</span>)
    <span class="keyword">return</span> parts
  }

  oj._pathResolve = <span class="keyword">function</span>(){
    <span class="keyword">var</span> resolvedPath = <span class="string">''</span>,
      isAbsolute = <span class="literal">false</span>,
      i = arguments.length - <span class="number">1</span>,
      path
    <span class="keyword">while</span> (i &gt;= -<span class="number">1</span> &amp;&amp; !isAbsolute){
      path = i &gt;= <span class="number">0</span> ? arguments[i] : process.cwd()
      <span class="keyword">if</span> ((<span class="keyword">typeof</span> path !== <span class="string">'string'</span>) || !path)
        <span class="keyword">continue</span>
      resolvedPath = path + <span class="string">'/'</span> + resolvedPath
      isAbsolute = path.charAt(<span class="number">0</span>) === <span class="string">'/'</span>
      i--
    }
    resolvedPath = _pathNormArray(resolvedPath.split(<span class="string">'/'</span>).filter(<span class="keyword">function</span>(p){
      <span class="keyword">return</span> !!p
    }), !isAbsolute).join(<span class="string">'/'</span>)
    <span class="keyword">return</span> ((isAbsolute ? <span class="string">'/'</span> : <span class="string">''</span>) + resolvedPath) || <span class="string">'.'</span>
  }

  oj._pathNormalize = <span class="keyword">function</span>(path){
    <span class="keyword">var</span> isAbsolute = path.charAt(<span class="number">0</span>) === <span class="string">'/'</span>,
    trailingSlash = path.substr(-<span class="number">1</span>) === <span class="string">'/'</span>
    path = _pathNormArray(path.split(<span class="string">'/'</span>).filter(<span class="keyword">function</span>(p){
      <span class="keyword">return</span> !!p
    }), !isAbsolute).join(<span class="string">'/'</span>)
    <span class="keyword">if</span> (!path &amp;&amp; !isAbsolute)
      path = <span class="string">'.'</span>
    <span class="keyword">if</span> (path &amp;&amp; trailingSlash)
      path += <span class="string">'/'</span>
    <span class="keyword">return</span> (isAbsolute ? <span class="string">'/'</span> : <span class="string">''</span>) + path
  }

  oj._pathJoin = <span class="keyword">function</span>(){
    <span class="keyword">var</span> paths = slice.call(arguments, <span class="number">0</span>)
    <span class="keyword">return</span> oj._pathNormalize(paths.filter(<span class="keyword">function</span>(p, index){
      <span class="keyword">return</span> p &amp;&amp; <span class="keyword">typeof</span> p === <span class="string">'string'</span>
    }).join(<span class="string">'/'</span>))
  }

  oj._pathDirname = <span class="keyword">function</span>(path){
    <span class="keyword">var</span> result = _pathSplit(path),
    root = result[<span class="number">0</span>],
    dir = result[<span class="number">1</span>]
    <span class="keyword">if</span> (!root &amp;&amp; !dir)
      <span class="keyword">return</span> <span class="string">'.'</span>
    <span class="keyword">if</span> (dir)
      dir = dir.substr(<span class="number">0</span>, dir.length - <span class="number">1</span>)
    <span class="keyword">return</span> root + dir
  }

  <span class="keyword">return</span> oj
}));</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
