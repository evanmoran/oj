// oj.min.js v0.1.3 | Copyright 2013 Evan Moran | ojjs.org/license
(function(){var ArrayP,FuncP,ObjP,concat,dhp,exports,jqName,jqueryEvents,key,oj,ojName,pass,plugins,root,slice,strict4,strict5,t,unshift,w3,_argsStack,_attributeCMeansClassAndAllowsArrays,_attributeOmitFalsyValues,_attributeStyleAllowsObject,_attributesBindEventsToDOM,_attributesFilterOutEvents,_attributesFromObject,_attributesProcessedForOJ,_boundOrThrow,_breaker,_chars,_clone,_compileAny,_compileDeeper,_compileTag,_contains,_cssFromMediaObject,_cssFromPluginObject,_dasherize,_decamelize,_defaults,_doctypes,_each,_extend,_flatten,_flattenCSSMap,_flattenCSSMap_,_fn,_fn1,_getInstanceOnElement,_getTagName,_has,_i,_identity,_indexOf,_inherit,_insertStyles,_isCapitalLetter,_isEmpty,_j,_jqGetValue,_jqueryExtend,_keys,_len,_len1,_omit,_onLoadQueue,_pathNormalizeArray,_pathSplit,_pathSplitRe,_randomInteger,_reduce,_ref,_ref1,_ref2,_setInstanceOnElement,_setObject,_setTagName,_some,_sortedIndex,_splitAndTrim,_styleClassFromPlugin,_styleFromObject,_toArray,_triggerTypes,_uniqueSort,_uniqueSortedUnion,_values,__slice=[].slice;oj=function(){var e;return oj._argsPush(),e=oj.emit.apply(this,arguments),oj._argsPop(),e},root=this,oj.version="0.1.3",oj.isClient=!(typeof process!="undefined"&&process!==null?(_ref=process.versions)!=null?_ref.node:void 0:void 0),typeof module!="undefined"?exports=module.exports=oj:root.oj=oj,oj.oj=oj,oj.load=function(e){return jQuery(function(){return $.ojBody(require(e)),oj.onload()})},_onLoadQueue={queue:[],loaded:!1},oj.onload=function(e){if(oj.isUndefined(e)){_onLoadQueue.loaded=!0;while(e=_onLoadQueue.queue.shift())e()}else _onLoadQueue.loaded?e():_onLoadQueue.queue.push(e)},oj.emit=function(){var e;return e=oj.tag.apply(oj,["oj"].concat(__slice.call(arguments)))},oj.id=function(e,t){return"oj"+oj.guid(e,t)},_randomInteger=function(e,t){var n,r;return e===null||t===null||e>t?null:(n=t-e,r=Math.floor(Math.random()*(n+1)),r+e)},_chars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),oj.guid=function(e,t){var n,r,i,s,o,u,a,f,l;e==null&&(e=8),t==null&&(t=_chars),n=t.length,i=Math.floor(Math.log(Math.pow(2,31)-1)/Math.log(n)),f=0,a=Math.pow(n,i)-1,o="";for(s=l=0;0<=e?l<e:l>e;s=0<=e?++l:--l)s%i===0&&(u=_randomInteger(f,a)),r=t[u%n],o+=r,u=Math.floor(u/n);return o},ArrayP=Array.prototype,FuncP=Function.prototype,ObjP=Object.prototype,slice=ArrayP.slice,unshift=ArrayP.unshift,concat=ArrayP.concat,oj.isOJ=function(e){return e!=null?!!e.isOJ:!!void 0},oj.isEvent=function(e){return!!(e&&e.on&&e.off&&e.trigger)},oj.isDOM=function(e){return!!e&&e.nodeType!=null},oj.isDOMElement=function(e){return!!e&&e.nodeType===1},oj.isDOMAttribute=function(e){return!!e&&e.nodeType===2},oj.isDOMText=function(e){return!!e&&e.nodeType===3},oj.isjQuery=function(e){return!!e&&!!e.jquery},oj.isUndefined=function(e){return e===void 0},oj.isBoolean=function(e){return e===!0||e===!1||ObjP.toString.call(e)==="[object Boolean]"},oj.isNumber=function(e){return!!(e===0||e&&e.toExponential&&e.toFixed)},oj.isString=function(e){return!!(e===""||e&&e.charCodeAt&&e.substr)},oj.isDate=function(e){return!!(e&&e.getTimezoneOffset&&e.setUTCFullYear)},oj.isFunction=function(e){return typeof e=="function"},oj.isArray=Array.isArray||function(e){return ObjP.toString.call(e)==="[object Array]"},oj.isRegEx=function(e){return ObjP.toString.call(e)==="[object RegExp]"},oj.isArguments=function(e){return ObjP.toString.call(e)==="[object Arguments]"},oj.isDefined=function(e){return typeof e!="undefined"},oj.typeOf=function(e){var t;return e===null?"null":(t=typeof e,t==="object"&&(oj.isArray(e)?t="array":oj.isOJ(e)?t=e.typeName:oj.isRegEx(e)?t="regexp":oj.isDate(e)?t="date":oj.isDOMElement(e)?t="dom-element":oj.isDOMText(e)?t="dom-text":oj.isDOMAttribute(e)?t="dom-attribute":oj.isjQuery(e)?t="jquery":t="object"),t)},oj.parse=function(e){var t;return e==="undefined"?void 0:e==="null"?null:e==="true"?!0:e==="false"?!1:isNaN(t=parseFloat(e))?e:t},oj.isObject=function(e){return oj.typeOf(e)==="object"},_isCapitalLetter=function(e){return!!e.match(/[A-Z]/)},_identity=function(e){return e},_has=function(e,t){return ObjP.hasOwnProperty.call(e,t)},_keys=Object.keys||function(e){var t,n;if(e!==Object(e))throw"Invalid object";n=[];for(t in e)_has(e,t)&&(n[n.length]=t);return n},_values=function(e){var t;if(e!==Object(e))throw"Invalid object";return t=[],_each(e,function(e){return t.push(e)}),t},_flatten=function(e,t){return _reduce(e,function(e,n){return oj.isArray(n)?e.concat(t?n:_flatten(n)):(e[e.length]=n,e)},[])},_reduce=function(e,t,n,r){var i,s,o;e==null&&(e=[]),s=arguments.length>2;if(ArrayP.reduce&&e.reduce===ArrayP.reduce)return r&&(t=o(t,r)),s?e.reduce(t,n):e.reduce(t);_each(e,function(e,i,o){return s?n=t.call(r,n,e,i,o):(n=e,s=!0)});if(!s)throw new TypeError("Reduce of empty array with no initial value");return n,i=function(){},o=function(e,t){var n,r;return e.bind===FuncP.bind&&FuncP.bind?FuncP.bind.apply(e,slice.call(arguments,1)):(n=slice.call(arguments,2),r=function(){var s,o;return this instanceof r?(i.prototype=e.prototype,o=new i,s=e.apply(o,n.concat(slice.call(arguments))),Object(s)===s?s:o):e.apply(t,n.concat(slice.call(arguments)))})}},_sortedIndex=function(e,t,n){var r,i,s;n==null&&(n=_identity),i=0,r=e.length;while(i<r)s=i+r>>1,n(e[s])<n(t)?i=s+1:r=s;return i},_indexOf=function(e,t,n){var r;return e==null?-1:n?(r=_sortedIndex(e,t),e[r]===t?r:-1):ArrayP.indexOf&&e.indexOf===ArrayP.indexOf?e.indexOf(t):-1},_toArray=function(e){return e?oj.isArray(e)?slice.call(e):oj.isArguments(e)?slice.call(e):e.toArray&&oj.isFunction(e.toArray)?e.toArray():_values(e):[]},_isEmpty=function(e){var t;if(oj.isArray(e))return e.length===0;for(t in e)if(_has(e,t))return!1;return!0},_clone=function(e){return!oj.isArray(e)&&!oj.isObject(e)?e:oj.isArray(e)?e.slice():_extend({},e)},_contains=function(e,t){return e==null?!1:ArrayP.indexOf&&e.indexOf===ArrayP.indexOf?e.indexOf(t)!==-1:_some(e,function(e){return e===t})},_some=function(e,t,n){var r;return t==null&&(t=_identity),r=!1,e==null?r:ArrayP.some&&e.some===ArrayP.some?e.some(t,n):(_each(e,function(e,i,s){if(r||(r=t.call(n,e,i,s)))return breaker}),!!r)},_setObject=function(){var e,t,n,r,i,s,o,u,a;i=arguments[0],n=3<=arguments.length?__slice.call(arguments,1,o=arguments.length-1):(o=1,[]),s=arguments[o++],r=i;for(e=u=0,a=n.length;u<a;e=++u){t=n[e],typeof r[t]!="object"&&typeof r[t]!="object"&&(r[t]={});if(e===n.length-1){r[t]=s;break}r=r[t]}return i},_breaker={},_each=function(e,t,n){var r,i,s,o,u;if(e===null)return;if(ArrayP.forEach&&e.forEach===ArrayP.forEach)return e.forEach(t,n);if(oj.isArray(e))for(r=o=0,u=e.length;o<u;r=++o){s=e[r];if(t.call(n,s,r,e)===_breaker)return _breaker}else for(i in e){s=e[i];if(_has(e,i)&&t.call(n,s,i,e)===_breaker)return _breaker}},oj._map=function(e,t,n){var r,i,s,o,u,a,f,l;n==null&&(n={}),r=n.context,f=n.recurse,i=n.evaluate,s=t,f&&function(e){return s=function(n,r,i){var s;return s=_extend(_clone(e),{key:r,object:n}),oj._map(n,t,s)}}(n);if(oj.isFunction(e)){if(!i)return e;while(i&&oj.isFunction(e))e=e()}u=e;if(oj.isArray(e)){u=[];if(!e)return u;if(ArrayP.map&&e.map===ArrayP.map)return e.map(s,r);_each(e,function(e,t,n){return u[u.length]=s.call(r,e,t,n)}),e.length===+e.length&&(u.length=e.length)}else{if(!oj.isObject(e))return t.call(r,e,n.key,n.object);u={};if(!e)return u;for(o in e)l=e[o],(a=s.call(r,l,o,e))!==void 0&&(u[o]=a)}return u},_extend=function(e){return _each(slice.call(arguments,1),function(t){var n,r,i;i=[];for(n in t)r=t[n],i.push(e[n]=r);return i}),e},_defaults=function(e){return _each(slice.call(arguments,1),function(t){var n,r;r=[];for(n in t)e[n]==null?r.push(e[n]=t[n]):r.push(void 0);return r}),e},_omit=function(e){var t,n,r;t={},r=concat.apply(ArrayP,slice.call(arguments,1));for(n in e)_contains(r,n)||(t[n]=e[n]);return t},_uniqueSort=function(e,t){var n,r,i,s,o;t==null&&(t=!1),t||e.sort(),i=[];for(r=s=0,o=e.length;s<o;r=++s){n=e[r];if(r>0&&e[r-1]===e[r])continue;i.push(n)}return i},_uniqueSortedUnion=function(e,t){return _uniqueSort(e.concat(t))},_boundOrThrow=function(e,t,n,r){var i;i=e<0?e+t:e;if(0<=i&&i<t)return i;throw new Error("oj."+r+n+" is out of bounds ("+e+" in [0,"+(t-1)+"])")},_splitAndTrim=function(e,t,n){var r;return r=e.split(t,n),oj._map(r,function(e){return e.trim()})},_dasherize=function(e){return _decamelize(e).replace(/[ _]/g,"-")},_decamelize=function(e){return e.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase()},_pathSplitRe=/^(\/?)([\s\S]+\/(?!$)|\/)?((?:\.{1,2}$|[\s\S]+?)?(\.[^.\/]*)?)$/,_pathSplit=function(e){var t;return t=_pathSplitRe.exec(e),[t[1]||"",t[2]||"",t[3]||"",t[4]||""]},_pathNormalizeArray=function(e,t){var n,r,i;i=0,n=e.length-1;while(n>=0)r=e[n],r==="."?e.splice(n,1):r===".."?(e.splice(n,1),i++):i&&(e.splice(n,1),i--),n--;if(t)while(i--)e.unshift("..");return e},oj._pathResolve=function(){var e,t,n,r;r="",n=!1,e=arguments.length-1;while(e>=-1&&!n){t=e>=0?arguments[e]:process.cwd();if(typeof t!="string"||!t)continue;r=t+"/"+r,n=t.charAt(0)==="/",e--}return r=_pathNormalizeArray(r.split("/").filter(function(e){return!!e}),!n).join("/"),(n?"/":"")+r||"."},oj._pathNormalize=function(e){var t,n;return t=e.charAt(0)==="/",n=e.substr(-1)==="/",e=_pathNormalizeArray(e.split("/").filter(function(e){return!!e}),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e},oj._pathJoin=function(){var e;return e=ArrayP.slice.call(arguments,0),oj._pathNormalize(e.filter(function(e,t){return e&&typeof e=="string"}).join("/"))},oj._pathDirname=function(e){var t,n;return n=_pathSplit(e),root=n[0],t=n[1],!root&&!t?".":(t&&(t=t.substr(0,t.length-1)),root+t)},oj.dependency=function(e){var t;t=oj.isClient?window[e]:global[e];if(!oj.isDefined(t))throw new Error("oj: "+e+" dependency is missing")},oj.dependency("jQuery"),oj.addMethods=function(e,t){var n,r;for(r in t)n=t[r],oj.addMethod(e,r,n)},oj.addMethod=function(e,t,n){if(!oj.isString(t))throw"oj.addMethod: string expected for second argument";if(!oj.isFunction(n))throw"oj.addMethod: function expected for thrid argument";Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!1,configurable:!0})},oj.removeMethod=function(e,t){if(!oj.isString(t))throw"oj.removeMethod: string expected for second argument"},oj.addProperties=function(e,t){var n,r;for(r in t)n=t[r],(n!=null?n.get:void 0)==null&&(n!=null?n.value:void 0)==null&&(n={value:n,writable:!0}),oj.addProperty(e,r,n)},oj.addProperty=function(e,t,n){if(!oj.isString(t))throw new Error("oj.addProperty: string expected for second argument");if(!oj.isObject(n))throw new Error("oj.addProperty: object expected for third argument");_defaults(n,{enumerable:!0,configurable:!0}),Object.getOwnPropertyDescriptor(e,t)!=null&&oj.removeProperty(e,t),Object.defineProperty(e,t,n)},oj.removeProperty=function(e,t){if(!oj.isString(t))throw new Error("oj.addProperty: string expected for second argument");return delete e[t]},oj.isProperty=function(e,t){if(!oj.isString(t))throw new Error("oj.isProperty: string expected for second argument");return Object.getOwnPropertyDescriptor(e,t).get!=null},oj.copyProperty=function(e,t,n){var r;return r=Object.getOwnPropertyDescriptor(t,n),r.value!=null&&(r.value=_clone(r.value)),Object.defineProperty(e,n,r)},_argsStack=[],oj._argsTop=function(){return _argsStack.length?_argsStack[_argsStack.length-1]:null},oj._argsPush=function(e){e==null&&(e=[]),_argsStack.push(e)},oj._argsPop=function(){return _argsStack.length?_argsStack.pop():null},oj._argsAppend=function(e){var t;t=oj._argsTop(),t!=null&&t.push(e)},oj.tag=function(){var e,t,n,r,i,s,o,u,a,f,l;i=arguments[0],t=2<=arguments.length?__slice.call(arguments,1):[];if(!oj.isString(i))throw"oj.tag error: argument 1 is not a string (expected tag name)";s=[i],n={};for(u=0,f=t.length;u<f;u++)e=t[u],oj.isObject(e)&&_extend(n,e);_isEmpty(n)||s.push(n),oj._argsPush(s);for(a=0,l=t.length;a<l;a++){e=t[a];if(oj.isObject(e))continue;oj.isFunction(e)?(r=oj._argsTop().length,o=e(),r===oj._argsTop().length&&o!=null&&oj._argsAppend(o)):oj._argsAppend(e)}return oj._argsPop(),oj._argsAppend(s),s},oj.tag.elements={closed:"a abbr acronym address applet article aside audio b bdo big blockquote body button canvas caption center cite code colgroup command datalist dd del details dfn dir div dl dt em embed fieldset figcaption figure font footer form frameset h1 h2 h3 h4 h5 h6 head header hgroup html i iframe ins keygen kbd label legend li map mark menu meter nav noframes noscript object ol optgroup option output p pre progress q rp rt ruby s samp script section select small source span strike strong style sub summary sup table tbody td textarea tfoot th thead time title tr tt u ul var video wbr xmp".split(" "),open:"area base br col command css !DOCTYPE embed hr img input keygen link meta param source track wbr".split(" ")},oj.tag.elements.all=oj.tag.elements.closed.concat(oj.tag.elements.open).sort(),oj.tag.isClosed=function(e){return _indexOf(oj.tag.elements.open,e,!0)===-1},_setTagName=function(e,t){e!=null&&(e.tagName=t)},_getTagName=function(e){return e.tagName},_setInstanceOnElement=function(e,t){e!=null&&(e.oj=t)},_getInstanceOnElement=function(e){return(e!=null?e.oj:void 0)!=null?e.oj:null},_ref1=oj.tag.elements.all,_fn=function(e){return oj[e]=function(){return oj.tag.apply(oj,[e].concat(__slice.call(arguments)))},_setTagName(oj[e],e)};for(_i=0,_len=_ref1.length;_i<_len;_i++)t=_ref1[_i],_fn(t);dhp='HTML PUBLIC "-//W3C//DTD HTML 4.01',w3='"http://www.w3.org/TR/html4/',strict5="html",strict4=dhp+'//EN" '+w3+'strict.dtd"',_doctypes={5:strict5,"HTML 5":strict5,4:strict4,"HTML 4.01 Strict":strict4,"HTML 4.01 Frameset":dhp+' Frameset//EN" '+w3+'frameset.dtd"',"HTML 4.01 Transitional":dhp+' Transitional//EN" '+w3+'loose.dtd"'},oj.doctype=function(e){var t,n;return e==null&&(e="5"),t=(n=_doctypes[e])!=null?n:e,oj["!DOCTYPE"](t)},oj.useGlobally=oj.extendInto=function(e){var t,n,r;e==null&&(e=root),n={};for(t in oj)r=oj[t],t[0]!=="_"&&t!=="extendInto"&&t!=="useGlobally"&&(n[t]=r);return _extend(e,n)},oj.compile=function(e,t){var n,r,i,s,o,u,a;return t==null&&(t=e,e={}),e=_defaults({},e,{html:!0,dom:!1,css:!1,cssMap:!1,minify:!1,ignore:{}}),_extend(e.ignore,{oj:1,css:1}),n=_clone(e),n.html=e.html?[]:null,n.dom=e.dom&&typeof document!="undefined"&&document!==null?document.createElement("OJ"):null,n.css=e.css||e.cssMap?{}:null,n.indent="",e.dom&&(n.types=[]),n.tags={},_compileAny(t,n),n.css!=null&&(a=_flattenCSSMap(n.css)),e.cssMap&&(i=a),e.css&&(r=_cssFromPluginObject(a,{minify:e.minify,tags:0})),e.html&&(o=n.html.join("")),e.dom&&(s=n.dom.childNodes,s.length!=null&&(s=_toArray(s),s=s.filter(function(e){return oj.isDOM(e)})),s.length===0?s=null:s.length===1&&(s=s[0])),u={html:o,dom:s,css:r,cssMap:i,types:n.types,tags:n.tags},u},_styleFromObject=function(e,t){var n,r,i,s,o,u,a,f,l,c,h;t==null&&(t={}),_defaults(t,{inline:!0,indent:""}),t.semi=!t.inline,a="",o=_keys(e).sort(),n=(h=t.indent)!=null?h:"",u=t.inline?"":"\n";for(r=l=0,c=o.length;l<c;r=++l)s=o[r],f=t.semi||r!==o.length-1?";":"",i=_dasherize(s),a+=""+n+i+":"+e[s]+f+u;return a},_attributesFromObject=function(e){var t,n,r,i,s,o,u;if(!oj.isObject(e))return e;n="",r="",u=_keys(e).sort();for(s=0,o=u.length;s<o;s++)t=u[s],i=e[t],i===!0?n+=""+r+t:n+=""+r+t+'="'+i+'"',r=" ";return n},_flattenCSSMap=function(e){var t,n,r;n={};for(r in e)t=e[r],_flattenCSSMap_(t,n,[""],[""],r);return n},_flattenCSSMap_=function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k;l={widescreen:"only screen and (min-width: 1200px)",monitor:"",tablet:"only screen and (min-width: 768px) and (max-width: 959px)",phone:"only screen and (max-width: 767px)"};for(m in e){h=e[m];if(typeof h=="object"){if(m.indexOf("@media")===0){b=n,m=m.slice("@media".length).trim(),a=_splitAndTrim(m,","),a=oj._map(a,function(e){return l[e]!=null?l[e]:e}),c=[];for(w=0,x=r.length;w<x;w++){u=r[w];for(E=0,T=a.length;E<T;E++)o=a[E],s=o,o.indexOf("&")===-1&&u!==""&&(s="& and "+o),c.push(s.replace(/&/g,u))}}else{c=r,g=_splitAndTrim(m,","),b=[];for(S=0,N=n.length;S<N;S++){v=n[S];for(k=0,C=g.length;k<C;k++)d=g[k],p=d,d.indexOf("&")===-1&&v!==""&&(p="& "+d),b.push(p.replace(/&/g,v))}}_flattenCSSMap_(h,t,b,c,i)}else y=n.sort().join(","),f=r.sort().join(","),f!==""&&(f="@media "+f),_setObject(t,i,f,y,m,h)}},_styleClassFromPlugin=function(e){return""+e+"-style"},oj._styleTagFromMediaObject=function(e,t,n){var r,i;return i=(n!=null?n.minify:void 0)?"":"\n",r=_cssFromMediaObject(t,n),'<style class="'+_styleClassFromPlugin(e)+'">'+i+r+"</style>"},oj._minifyJS=function(e,t){return e},oj._minifyCSS=function(e,t){return e},_cssFromMediaObject=function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g;t==null&&(t={}),a=(m=t.minify)!=null?m:0,v=(g=t.tags)!=null?g:0,f=a?"":"\n",p=a?"":" ",o=a,n="";for(u in e){h=e[u],u&&(u=u.replace(/,/g,","+p),n+=""+u+p+"{"+f);for(c in h)d=h[c],i=!a&&u?"	":"",c=c.replace(/,/g,","+f),n+=""+i+c+p+"{"+f,s=a?i:i+"	",l=_styleFromObject(d,{inline:o,indent:s}),n+=l+i+"}"+f;u!==""&&(n+="}"+f)}try{n=oj._minifyCSS(n,t)}catch(y){throw r=y,new Error("css minification error: "+r.message+"\nCould not minify:\n"+n)}return n},_cssFromPluginObject=function(e,t){var n,r,i,s,o,u,a,f,l,c;t==null&&(t={}),s=(l=t.minify)!=null?l:0,f=(c=t.tags)!=null?c:0,o=s?"":"\n",a=s?"":" ",r=s,n="";for(u in e)i=e[u],f&&(n+='<style class="'+u+'-style">'+o),n+=_cssFromMediaObject(i,t),f&&(n+=""+o+"</style>"+o);return n},_compileDeeper=function(e,t,n){var r;return r=n.indent,n.indent+="	",e(t,n),n.indent=r},pass=function(){},_compileAny=function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d;switch(oj.typeOf(e)){case"array":_compileTag(e,t);break;case"jquery":(u=t.html)!=null&&u.push(e.html()),(a=t.dom)!=null&&a.concat(e.get());break;case"string":(f=t.html)!=null&&f.push(e),e.length>0&&e[0]==="<"?(root=document.createElement("div"),root.innerHTML=e,n=root.childNodes,(l=t.dom)!=null&&l.appendChild(root)):(c=t.dom)!=null&&c.appendChild(document.createTextNode(e));break;case"boolean":case"number":(h=t.html)!=null&&h.push(""+e),(p=t.dom)!=null&&p.appendChild(document.createTextNode(""+e));break;case"function":_compileAny(oj(e),t);break;case"date":(d=t.html)!=null&&d.push(""+e.toLocaleString()),(r=t.dom)!=null&&r.appendChild(document.createTextNode(""+e.toLocaleString()));break;case"null":break;case"undefined":break;case"object":break;default:oj.isOJ(e)&&((i=t.types)!=null&&i.push(e),(s=t.html)!=null&&s.push(e.toHTML(t)),(o=t.dom)!=null&&o.appendChild(e.toDOM(t)),t.css!=null&&_extend(t.css,e.toCSSMap(t)))}},_compileTag=function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L;if(e.length===0)return;d=e[0],v=typeof d,d=v!=="function"&&v!=="object"||_getTagName(d)==null?d:_getTagName(d);if(!(oj.isString(d)&&d.length>0))throw new Error("oj.compile: tag name is missing");t.tags[d]=!0;if(_isCapitalLetter(d[0]))return _compileDeeper(_compileAny,new oj[d](e.slice(1)),t);o=null,oj.isObject(e[1])&&(o=e[1]),a=o?e.slice(2):e.slice(1);if(t.css&&d==="css")for(c in o)p=o[c],(S=(m=t.css)["oj"])==null&&(m.oj={}),(x=(g=t.css["oj"])[c])==null&&(g[c]={}),_extend(t.css.oj[c],p);if(d==="!DOCTYPE"){if(!oj.isString(e[1]))throw new Error("oj.compile: doctype expects string as first argument");t.ignore[d]||t.html&&t.html.push("<"+d+" "+e[1]+">");return}if(!t.ignore[d]){l=_attributesProcessedForOJ(o);if(t.dom&&typeof document!="undefined"&&document!==null){f=document.createElement(d),oj.isDOMElement(t.dom)&&t.dom.appendChild(f),t.dom=f;if(oj.isObject(o)){T=_keys(o).sort();for(y=0,w=T.length;y<w;y++)i=T[y],s=o[i],s===!0?(n=document.createAttribute(i),f.setAttributeNode(n)):f.setAttribute(i,s)}_attributesBindEventsToDOM(l,f)}t.html&&(r=(N=_attributesFromObject(o))!=null?N:"",h=r===""?"":" ",t.html.push("<"+d+h+r+">"))}if(t.ignore[d]!=="deep")for(b=0,E=a.length;b<E;b++)u=a[b],!t.minify&&a.length>1&&(C=t.html)!=null&&C.push("\n	"+t.indent),_compileDeeper(_compileAny,u,t);!t.minify&&a.length>1&&(k=t.html)!=null&&k.push("\n"+t.indent),t.ignore[d]||(t.html&&(a.length>0||oj.tag.isClosed(d))&&(L=t.html)!=null&&L.push("</"+d+">"),t.dom&&(t.dom=t.dom.parentNode))},_attributeStyleAllowsObject=function(e){oj.isObject(e!=null?e.style:void 0)&&(e.style=_styleFromObject(e.style,{inline:!0}))},_attributeCMeansClassAndAllowsArrays=function(e){oj.isArray(e!=null?e.c:void 0)&&(e.c=e.c.join(" ")),oj.isArray(e!=null?e["class"]:void 0)&&(e["class"]=e["class"].join(" ")),(e!=null?e.c:void 0)!=null&&((e!=null?e["class"]:void 0)!=null?e["class"]+=" "+e.c:e["class"]=e.c,delete e.c)},_attributeOmitFalsyValues=function(e){var t,n,r;if(oj.isObject(e)){r=[];for(t in e)n=e[t],n===null||n===void 0||n===!1?r.push(delete e[t]):r.push(void 0);return r}},jqueryEvents={bind:1,on:1,off:1,live:1,blur:1,change:1,click:1,dblclick:1,focus:1,focusin:1,focusout:1,hover:1,keydown:1,keypress:1,keyup:1,mousedown:1,mouseenter:1,mouseleave:1,mousemove:1,mouseout:1,mouseup:1,ready:1,resize:1,scroll:1,select:1},_attributesFilterOutEvents=function(e){var t,n,r;n={};if(oj.isObject(e))for(t in e)r=e[t],jqueryEvents[t]!=null&&(n[t]=r,delete e[t]);return n},_attributesProcessedForOJ=function(e){var t;return _attributeCMeansClassAndAllowsArrays(e),_attributeStyleAllowsObject(e),_attributeOmitFalsyValues(e),t=_attributesFilterOutEvents(e),t},_attributesBindEventsToDOM=function(e,t){var n,r,i;i=[];for(n in e)r=e[n],typeof $!="undefined"&&$!==null?oj.isArray(r)?i.push($(t)[n].apply(this,r)):i.push($(t)[n](r)):i.push(console.error("oj: jquery is missing when binding a '"+n+"' event"));return i},oj.toHTML=function(e,t){return oj.isObject(e)||(t=e,e={}),_extend(e,{dom:0,js:0,html:1,css:0}),oj.compile(e,t).html},oj.toCSS=function(e,t){return oj.isObject(e)||(t=e,e={}),_extend(e,{dom:0,js:0,html:0,css:1}),oj.compile(e,t).css},_inherit=function(e,t){var n,r;for(r in t)oj.copyProperty(e,t,r);n=function(){},n.prototype=t.prototype,e.prototype=new n,e.base=t.prototype},oj.argumentShift=function(e,t){var n;return oj.isObject(e)&&t!=null&&e[t]!=null&&(n=e[t],delete e[t]),n},oj.createType=function(e,t){var n,r,i,s,o,u,a,f,l;t==null&&(t={});if(!oj.isString(e))throw"oj.createType: string expected for first argument";if(!oj.isObject(t))throw"oj.createType: object expected for second argument";return(f=t.methods)==null&&(t.methods={}),(l=t.properties)==null&&(t.properties={}),r="__DELAYED__",n=(new Function("return function "+e+"(){\n  var _this = this;\n  if ( !(this instanceof "+e+") ) {\n    _this = new "+e+"('"+r+"');\n    _this.__autonew__ = true;\n  }\n\n  if (arguments && arguments[0] != '"+r+"')\n    "+e+".prototype.constructor.apply(_this, arguments);\n\n  return _this;\n}"))(),t.base!=null&&(t.constructor==null||!t.hasOwnProperty("constructor"))&&(t.constructor=function(){var e;return(e=n.base)!=null?e.constructor.apply(this,arguments):void 0}),t.base!=null&&_inherit(n,t.base),oj.addMethod(n.prototype,"constructor",t.constructor),a={type:{value:n,writable:!1,enumerable:!1},typeName:{value:e,writable:!1,enumerable:!1},isOJ:{value:!0,writable:!1,enumerable:!1}},oj.addProperties(n,a),oj.addProperties(n.prototype,a),o=_keys(t.properties).sort(),n.prototype.properties!=null&&(o=_uniqueSortedUnion(n.prototype.properties,o)),u={value:o,writable:!1,enumerable:!1},oj.addProperty(n.prototype,"properties",u),i=_keys(t.methods).sort(),n.prototype.methods!=null&&(i=_uniqueSortedUnion(n.prototype.methods,i)),s={value:i,writable:!1,enumerable:!1},oj.addProperty(n.prototype,"methods",s),_extend(t.methods,{get:function(e){var t,n,r,i,s;if(oj.isString(e))return this.has(e)?this[e]:void 0;t={},s=this.properties;for(r=0,i=s.length;r<i;r++)n=s[r],t[n]=this[n];return t},set:function(e,t){var n,r,i;r=e,oj.isObject(e)||(r={},r[e]=t);for(n in r)i=r[n],this.has(n)&&(this[n]=i)},has:function(e){return _some(this.properties,function(t){return t===e})},can:function(e){return _some(this.methods,function(t){return t===e})},toJSON:function(){var e,t,n,r,i;e={},i=this.properties;for(n=0,r=i.length;n<r;n++)t=i[n],e[t]=this[t];return e}}),oj.addMethods(n.prototype,t.methods),oj.addProperties(n.prototype,t.properties),n},oj.unionArguments=function(e){var t,n,r,i,s;n={},t=[];for(i=0,s=e.length;i<s;i++)r=e[i],oj.isObject(r)?n=_extend(n,r):t.push(r);return{options:n,args:t}},oj["enum"]=function(e,t){throw"NYI"},oj.View=oj.createType("View",{constructor:function(e){var t;e==null&&(e={});if(!oj.isDOM(this.el))throw new Error("oj."+this.typeName+": constructor failed to set this.el");return _setInstanceOnElement(this.el,this),this.__autonew__&&this.emit(),(t=e.id)==null&&(e.id=oj.id()),this.$el.addClass("oj-"+this.typeName),this.set(e),e=_omit.apply(null,[e].concat(__slice.call(this.properties))),this.addAttributes(e),this._isConstructed=!0},properties:{el:{get:function(){return this._el},set:function(e){oj.isDOMElement(e)?(this._el=e,this._$el=null):this._el=oj.compile({css:0,cssMap:0,dom:1,html:0},e).dom}},$el:{get:function(){var e;return(e=this._$el)!=null?e:this._$el=$(this.el)}},id:{get:function(){return this.$el.attr("id")},set:function(e){return this.$el.attr("id",e)}},attributes:{get:function(){var e;return e={},$.each(this.el.attributes,function(t,n){return e[n.name]=n.value}),e}},themes:{get:function(){var e;return e={},$.each(this.el.attributes,function(t,n){return e[n.name]=n.value}),e}},isConstructed:{get:function(){var e;return(e=this._isConstructed)!=null?e:!1}},isInserted:{get:function(){var e;return(e=this._isInserted)!=null?e:!1}}},methods:{$:function(){var e;return(e=this.$el).find.apply(e,arguments)},addAttribute:function(e,t){var n;n={},n[e]=t,this.addAttributes(n)},addAttributes:function(e){var t,n,r,i,s;n=_clone(e),r=_attributesProcessedForOJ(n);if(oj.isObject(n))for(i in n)s=n[i],i==="class"?this.addClass(s):s===!0?(t=document.createAttribute(i),this.el.setAttributeNode(t)):this.$el.attr(i,s);r!=null&&_attributesBindEventsToDOM(r,this.el)},removeAttribute:function(e){this.$el.removeAttr(e)},removeAttributes:function(e){var t,n,r;for(n=0,r=e.length;n<r;n++)t=e[n],this.removeAttribute(t)},addClass:function(e){this.$el.addClass(e)},removeClass:function(e){this.$el.removeClass(e)},addTheme:function(e){this.addClass("theme-"+e)},removeTheme:function(e){this.removeClass("theme-"+e)},clearThemes:function(e){var t;this.$el.removeClass("theme-"+e),t=this.$el.attr("class").split(" "),_each(t,function(e){})},emit:function(){oj._argsAppend(this)},toHTML:function(e){return this.el.outerHTML+((e!=null?e.minify:void 0)?"":"\n")},toDOM:function(){return this.el},toCSS:function(e){return _cssFromPluginObject(_flattenCSSMap(this.cssMap),_extend({},{minify:e.minify,tags:0}))},toCSSMap:function(){return this.type.cssMap},toString:function(){return this.toHTML()},inserted:function(){return this._isInserted=!0}}}),oj.View.css=function(e){var t,n,r,i,s,o,u;if(!oj.isString(e)&&!oj.isObject(e))throw new Error("oj."+this.typeName+".css: object or string expected for first argument");oj.isString(e)?((o=(n=this.cssMap)[i="oj-"+this.typeName])==null&&(n[i]=""),this.cssMap["oj-"+this.typeName]+=e):((u=(r=this.cssMap)[s="oj-"+this.typeName])==null&&(r[s]={}),t=_setObject({},".oj-"+this.typeName,e),_extend(this.cssMap["oj-"+this.typeName],t))},oj.View.theme=function(e,t){var n,r,i,s,o;if(!oj.isString(e))throw new Error("oj."+this.typeName+".theme: string expected for first argument (theme name)");if(!oj.isObject(t))throw new Error("oj."+this.typeName+".css: object expected for second argument");(o=(i=this.cssMap)[s="oj-"+this.typeName])==null&&(i[s]={}),r=_dasherize(e),n=_setObject({},".oj-"+this.typeName+".theme-"+r,t),_extend(this.cssMap["oj-"+this.typeName],n),this.themes.push(r)},oj.View.cssMap={},oj.View.themes=[],oj.CollectionView=oj.createType("CollectionView",{base:oj.View,constructor:function(e){return(e!=null?e.each:void 0)!=null&&(this.each=oj.argumentShift(e,"each")),(e!=null?e.models:void 0)!=null&&(this.models=oj.argumentShift(e,"models")),oj.CollectionView.base.constructor.apply(this,arguments),this.make()},properties:{each:{get:function(){return this._each},set:function(e){this._each=e,this.isConstructed&&this.make()}},collection:{get:function(){return this.models},set:function(e){return this.models=e}},models:{get:function(){return this._models},set:function(e){var t,n;oj.isFunction((t=this._models)!=null?t.off:void 0)&&this._models.off("add remove change reset destroy",null,this),this._models=e,oj.isFunction((n=this._models)!=null?n.on:void 0)&&(this._models.on("add",this.collectionModelAdded,this),this._models.on("remove",this.collectionModelRemoved,this),this._models.on("change",this.collectionModelChanged,this),this._models.on("destroy",this.collectionModelDestroyed,this),this._models.on("reset",this.collectionReset,this)),this.isConstructed&&this.make()}}},methods:{make:function(){throw new Error("oj."+this.typeName+": `make` method not implemented by custom view")},collectionModelAdded:function(e,t){return this.make()},collectionModelRemoved:function(e,t,n){return this.make()},collectionModelChanged:function(e,t,n){},collectionModelDestroyed:function(e,t){return this.make()},collectionReset:function(e,t){return this.make()}}}),oj.ModelView=oj.createType("ModelView",{base:oj.View,constructor:function(e){return(e!=null?e.value:void 0)!=null&&(this.value=oj.argumentShift(e,"value")),(e!=null?e.model:void 0)!=null&&(this.model=oj.argumentShift(e,"model")),oj.ModelView.base.constructor.apply(this,arguments)},properties:{model:{get:function(){return this._model},set:function(e){oj.isEvent(this._model)&&this._model.off("change",null,this),this._model=e,oj.isEvent(this._model)&&this._model.on("change",this.modelChanged,this),this.modelChanged()}}},methods:{modelChanged:function(){var e=this;return this.$el.oj(function(){return e.make(e.mode)})},make:function(e){throw"oj."+this.typeName+": `make` method not implemented on custom view"}}}),oj.ModelKeyView=oj.createType("ModelKeyView",{base:oj.ModelView,constructor:function(e){return(e!=null?e.key:void 0)!=null&&(this.key=oj.argumentShift(e,"key")),oj.ModelKeyView.base.constructor.apply(this,arguments)},properties:{key:null,value:{get:function(){throw""+this.typeName+" value getter not implemented"},set:function(e){throw""+this.typeName+" value setter not implemented"}}},methods:{modelChanged:function(){this.model!=null&&this.key!=null&&(this._viewUpdatedModel||(this.value=this.model.get(this.key)))},viewChanged:function(){var e=this;setTimeout(function(){e.model!=null&&e.key!=null&&(e._viewUpdatedModel=!0,e.model.set(e.key,e.value),e._viewUpdatedModel=!1)},10)}}}),oj.TextBox=oj.createType("TextBox",{base:oj.ModelKeyView,constructor:function(){var e,t,n,r=this;return n=oj.unionArguments(arguments),t=n.options,e=n.args,this.el=oj(function(){return oj.input({type:"text"},{keydown:function(){r.live&&setTimeout(function(){return r.$el.change()},10)},keyup:function(){r.live&&setTimeout(function(){return r.$el.change()},10)},change:function(){r.viewChanged()}})}),e.length>0&&(this.value=e[0]),(t!=null?t.live:void 0)!=null&&(this.live=oj.argumentShift(t,"live")),oj.TextBox.base.constructor.apply(this,[t])},properties:{value:{get:function(){var e;e=this.el.value;if(e==null||e==="undefined")e="";return e},set:function(e){this.el.value=e}},live:!0}}),oj.CheckBox=oj.createType("CheckBox",{base:oj.ModelKeyView,constructor:function(){var e,t,n,r=this;return n=oj.unionArguments(arguments),t=n.options,e=n.args,this.el=oj(function(){return oj.input({type:"checkbox"},{change:function(){r.viewChanged()}})}),e.length>0&&(this.value=e[0]),oj.CheckBox.base.constructor.call(this,t)},properties:{value:{get:function(){return this.el.checked},set:function(e){e=!!e,this.el.checked=e,e?this.$el.attr("checked","checked"):this.$el.removeAttr("checked")}}}}),oj.Text=oj.createType("Text",{base:oj.ModelKeyView,constructor:function(){var e,t,n,r=this;return n=oj.unionArguments(arguments),t=n.options,e=n.args,this._tagName=oj.argumentShift(t,"tagName"),this.el=oj(function(){return oj[r.tagName]()}),e.length>0&&(this.value=e[0]),oj.Text.base.constructor.call(this,t)},properties:{value:{get:function(){return this.$el.ojValue()},set:function(e){this.$el.oj(e)}},tagName:{get:function(){var e;return(e=this._tagName)!=null?e:"div"}}}}),oj.TextArea=oj.createType("TextArea",{base:oj.ModelKeyView,constructor:function(){var e,t,n,r=this;return n=oj.unionArguments(arguments),t=n.options,e=n.args,this.el=oj(function(){return oj.textarea({keydown:function(){r.live&&setTimeout(function(){return r.$el.change()},10)},keyup:function(){r.live&&setTimeout(function(){return r.$el.change()},10)},change:function(){r.viewChanged()}})}),this.value=oj.argumentShift(t,"value")||e.join("\n"),oj.TextArea.base.constructor.call(this,t)},properties:{value:{get:function(){return this.el.value},set:function(e){this.el.value=e}},live:!0}}),oj.ListBox=oj.createType("ListBox",{base:oj.ModelKeyView,constructor:function(){var e,t,n,r=this;return n=oj.unionArguments(arguments),t=n.options,e=n.args,this.el=oj(function(){return oj.select({change:function(){r.viewChanged()}})}),this.options=oj.argumentShift(t,"options"),e.length>0&&(this.value=e[0]),oj.ListBox.base.constructor.apply(this,[t])},properties:{value:{get:function(){return this.$el.val()},set:function(e){this.$el.val(e)}},options:{get:function(){return this._options},set:function(e){if(!oj.isArray(e))throw new Error("oj."+this.typeName+".options array is missing");this._options=e,this.$el.oj(function(){var t,n,r;for(n=0,r=e.length;n<r;n++)t=e[n],oj.option(t)})}}}}),oj.Button=oj.createType("Button",{base:oj.View,constructor:function(){var e,t,n,r,i=this;return r=oj.unionArguments(arguments),t=r.options,e=r.args,n="",e.length>0&&(n=e[0]),t.title!=null&&(n=oj.argumentShift(t,"title")),this.el=oj(function(){return oj.button(n)}),oj.Button.base.constructor.apply(this,[t]),this.title=n},properties:{title:{get:function(){var e;return(e=this._title)!=null?e:""},set:function(e){this.$el.oj(this._title=e)}}},methods:{click:function(){var e;return arguments.length>0?(e=this.$el).click.apply(e,arguments):this.$el.click()}}}),oj.List=oj.createType("List",{base:oj.CollectionView,constructor:function(){var e,t,n,r,i,s=this;return r=oj.unionArguments(arguments),n=r.options,e=r.args,this._tagName=oj.argumentShift(n,"tagName"),this.itemTagName=oj.argumentShift(n,"itemTagName"),this.el=oj(function(){return oj[s.tagName]()}),n.el!=null&&(this.el=oj.argumentShift(n,"el")),(i=n.each)==null&&(n.each=function(e){return oj.isString(e)||oj.isNumber(e)||oj.isBoolean(e)?e:JSON.stringify(e)}),oj.List.base.constructor.apply(this,[n]),t=e.length>0?e:null,this.items=n.items!=null?oj.argumentShift(n,"items"):t},properties:{items:{get:function(){var e;return this._items!=null?this._items:e=this.$items.ojValues()},set:function(e){this._items=e,this.make()}},count:{get:function(){return this.$items.length}},tagName:{get:function(){var e;return(e=this._tagName)!=null?e:"div"}},itemTagName:{get:function(){var e;return(e=this._itemTagName)!=null?e:"div"},set:function(e){this._itemTagName=e,this.make()}},$items:{get:function(){var e;return(e=this._$items)!=null?e:this._$items=this.$("> "+this.itemTagName)}}},methods:{item:function(e,t){e=this._bound(e,this.count,".item: index");if(t==null)return this.$item(e).ojValue();this.$item(e).oj(t)},$item:function(e){return e=this._bound(e,this.count,".$item: index"),this.$items.eq(e)},make:function(){var e,t,n,r,i,s=this;if(!this.isConstructed)return;n=[];if(this.models!=null&&this.each!=null){t=oj.isEvent(this.models)?this.models.models:this.models;for(r=0,i=t.length;r<i;r++)e=t[r],n.push(this._itemFromModel(e))}else this.items!=null&&(n=this.items);this.$el.oj(function(){var e,t,r,i;i=[];for(t=0,r=n.length;t<r;t++)e=n[t],i.push(s._itemElFromItem(e));return i}),this.itemsChanged()},collectionModelAdded:function(e,t){var n,r;r=t.indexOf(e),n=this._itemFromModel(e),this.add(r,n)},collectionModelRemoved:function(e,t,n){this.remove(n.index)},collectionReset:function(){this.make()},_itemFromModel:function(e){var t=this;return oj(function(){return t.each(e)})},_itemElFromItem:function(e){return oj[this.itemTagName](e)},_bound:function(e,t,n){return _boundOrThrow(e,t,n,this.typeName)},itemsChanged:function(){this._items=null,this._$items=null},add:function(e,t){var n;e=this._bound(e,this.count+1,".add: index"),n=this.itemTagName,this.count===0?this.$el.oj(function(){return oj[n](t)}):e===this.count?this.$item(e-1).ojAfter(function(){return oj[n](t)}):this.$item(e).ojBefore(function(){return oj[n](t)}),this.itemsChanged()},remove:function(e){var t;return e=this._bound(e,this.count,".remove: index"),t=this.item(e),this.$item(e).remove(),this.itemsChanged(),t},move:function(e,t){t==null&&(t=-1);if(e===t)return;e=this._bound(e,this.count,".move: fromIndex"),t=this._bound(t,this.count,".move: toIndex"),t>e?this.$item(e).insertAfter(this.$item(t)):this.$item(e).insertBefore(this.$item(t)),this.itemsChanged()},swap:function(e,t){var n,r;if(e===t)return;e=this._bound(e,this.count,".swap: firstIndex"),t=this._bound(t,this.count,".swap: secondIndex"),Math.abs(e-t)===1?this.move(e,t):(r=Math.min(e,t),n=Math.max(e,t),this.move(n,r),this.move(r+1,n)),this.itemsChanged()},unshift:function(e){this.add(0,e)},shift:function(){return this.remove(0)},push:function(e){this.add(this.count,e)},pop:function(){return this.remove(-1)},clear:function(){this.$items.remove(),this.itemsChanged()}}}),oj.NumberList=oj.createType("NumberList",{base:oj.List,constructor:function(){var e;return e=[{tagName:"ol",itemTagName:"li"}].concat(__slice.call(arguments)),oj.NumberList.base.constructor.apply(this,e)}}),oj.BulletList=oj.createType("BulletList",{base:oj.List,constructor:function(){var e;return e=[{tagName:"ul",itemTagName:"li"}].concat(__slice.call(arguments)),oj.BulletList.base.constructor.apply(this,e)}}),oj.Table=oj.createType("Table",{base:oj.CollectionView,constructor:function(){var e,t,n,r,i,s,o,u,a,f=this;o=oj.unionArguments(arguments),n=o.options,t=o.args,this.el=oj(function(){return oj.table()}),n.el!=null&&(this.el=oj.argumentShift(n,"el")),(u=n.each)==null&&(n.each=function(e,t){var n,r,i,s,o;r=oj.isString(e)||oj.isNumber(e)||oj.isBoolean(e)?[e]:oj.isEvent(e)&&typeof e.attributes=="object"?_values(e.attributes):_values(e),o=[];for(i=0,s=r.length;i<s;i++)n=r[i],o.push(t(n));return o}),oj.Table.base.constructor.apply(this,[n]);for(i=0,s=t.length;i<s;i++){e=t[i];if(!oj.isArray(e))throw new Error("oj.Table: array expected for row arguments")}r=(a=oj.argumentShift(n,"rows"))!=null?a:t;if(r.length>0)return this.rows=r},properties:{rowCount:{get:function(){return this.$trs.length}},columnCount:{get:function(){var e,t,n;return(n=this.$tr(0).find("> td").length)>0?n:(t=this.$theadTR.find("> th").length)>0?t:(e=this.$tfootTR.find("> td").length)>0?e:0}},rows:{get:function(){var e,t,n,r;if(this._rows!=null)return this._rows;this._rows=[];for(t=n=0,r=this.rowCount;n<r;t=n+=1)e=oj._map(this.$tdsRow(t),function(e){return e.ojValues()}),this._rows.push(e);return this._rows},set:function(e){if(!(e!=null&&e.length>0))return this.clearBody();this._rows=e,this.make()}},header:{get:function(){return this.$theadTR.find("> th").ojValues()},set:function(e){var t=this;if(!oj.isArray(e))throw new Error("oj.Table.header: array expected for first argument");return e!=null&&e.length>0?this.$theadTRMake.oj(function(){var t,n,r,i;i=[];for(n=0,r=e.length;n<r;n++)t=e[n],i.push(oj.th(t));return i}):this.clearHeader()}},footer:{get:function(){return this.$tfootTR.find("> td").ojValues()},set:function(e){var t=this;if(!oj.isArray(e))throw new Error("oj.Table.footer: array expected for first argument");return e!=null&&e.length>0?this.$tfootTRMake.oj(function(){var t,n,r,i;i=[];for(n=0,r=e.length;n<r;n++)t=e[n],i.push(oj.td(t));return i}):this.clearFooter()}},caption:{get:function(){return this.$caption.ojValue()},set:function(e){this.$captionMake.oj(e)}},$table:{get:function(){return this.$el}},$caption:{get:function(){return this.$("> caption")}},$colgroup:{get:function(){return this.$("> colgroup")}},$thead:{get:function(){return this.$("> thead")}},$tfoot:{get:function(){return this.$("> tfoot")}},$tbody:{get:function(){return this.$("> tbody")}},$theadTR:{get:function(){return this.$thead.find("> tr")}},$tfootTR:{get:function(){return this.$tfoot.find("> tr")}},$ths:{get:function(){return this.$theadTR.find("> th")}},$trs:{get:function(){var e;return(e=this._$trs)!=null?e:this._$trs=this.$("> tbody > tr")}},$colgroupMake:{get:function(){return this.$colgroup.length>0?this.$colgroup:(t="<colgroup></colgroup>",this.$caption.length>0?this.$caption.insertAfter(t):this.$table.append(t),this.$tbody)}},$captionMake:{get:function(){return this.$caption.length>0?this.$caption:(this.$table.prepend("<caption></caption>"),this.$caption)}},$tfootMake:{get:function(){return this.$tfoot.length>0?this.$tfoot:(t="<tfoot></tfoot>",this.$tfoot.length>0?this.$tfoot.insertBefore(t):this.$table.append(t),this.$tfoot)}},$theadMake:{get:function(){return this.$thead.length>0?this.$thead:(t="<thead></thead>",this.$colgroup.length>0?this.$colgroup.insertAfter(t):this.$caption.length>0?this.$caption.insertAfter(t):this.$table.prepend(t),this.$thead)}},$tbodyMake:{get:function(){return this.$tbody.length>0?this.$tbody:(this.$table.append("<tbody></tbody>"),this.$tbody)}},$theadTRMake:{get:function(){return this.$theadTR.length>0?this.$theadTR:(this.$theadMake.html("<tr></tr>"),this.$theadTR)}},$tfootTRMake:{get:function(){return this.$tfootTR.length>0?this.$tfootTR:(this.$tfootMake.html("<tr></tr>"),this.$tfootTR)}}},methods:{make:function(){var e,t,n,r,i,s,o,u,a,f=this;if(!this.isConstructed)return;r=[];if(this.models!=null&&this.each!=null){t=oj.isEvent(this.models)?this.models.models:this._models;for(i=0,o=t.length;i<o;i++)e=t[i],r.push(this._rowFromModel(e))}else if(this.rows!=null){a=this.rows;for(s=0,u=a.length;s<u;s++)n=a[s],r.push(oj(function(){var e,t,r,i;i=[];for(t=0,r=n.length;t<r;t++)e=n[t],i.push(oj.td(e));return i}))}r.length>0&&this.$tbodyMake.oj(function(){var e,t,n,i;i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(oj.tr(e));return i}),this.bodyChanged()},collectionModelAdded:function(e,t){var n,r;r=t.indexOf(e),n=this._rowFromModel(e),this._addRowTR(r,oj(function(){return oj.tr(n)}))},collectionModelRemoved:function(e,t,n){this.removeRow(n.index)},collectionReset:function(){this.make()},$tr:function(e){return e=e<0?e+count:e,this.$trs.eq(e)},$tdsRow:function(e){return e=e<0?e+count:e,this.$tr(e).find("> td")},$td:function(e,t){return e=e<0?e+this.rowCount:e,t=t<0?t+this.columnCount:t,this.$tdsRow(e).eq(t)},row:function(e,t){var n,r,i,s;e=this._bound(e,this.rowCount,".row: rx");if(t==null)return this.$tdsRow(e).ojValues();if(t.length!==cellCount(e))throw new Error("oj."+this.typeName+": array expected for second argument with length length cellCount("+e+")");for(n=i=0,s=t.length;i<s;n=++i)r=t[n],this.$td(e,n).oj(r)},cell:function(e,t,n){return n!=null?this.$td(e,t).oj(n):this.$td(e,t).ojValue()},addRow:function(e,t){var n;if(arguments.length!==2)throw new Error("oj.addRow: expected two arguments");e=this._bound(e,this.rowCount+1,".addRow: rx"),n=function(){return oj.tr(function(){var e,n,r,i;i=[];for(n=0,r=t.length;n<r;n++)e=t[n],i.push(oj.td(e));return i})},this._addRowTR(e,n)},_addRowTR:function(e,t){this.rowCount===0?this.$el.oj(t):e===this.rowCount?this.$tr(e-1).ojAfter(t):this.$tr(e).ojBefore(t),this.bodyChanged()},removeRow:function(e){var t;if(arguments.length!==1)throw new Error("oj.removeRow: expected one argument");return e=this._bound(e,this.rowCount,".removeRow: index"),t=this.row(e),this.$tr(e).remove(),this.bodyChanged(),t},moveRow:function(e,t){var n;if(e===t)return;e=this._bound(e,this.rowCount,".moveRow: fromIndex"),t=this._bound(t,this.rowCount,".moveRow: toIndex"),n=t>e?"insertAfter":"insertBefore",this.$tr(e)[n](this.$tr(t)),this.bodyChanged()},swapRow:function(e,t){var n,r;if(e===t)return;e=this._bound(e,this.rowCount,".swap: firstIndex"),t=this._bound(t,this.rowCount,".swap: secondIndex"),Math.abs(e-t)===1?this.moveRow(e,t):(r=Math.min(e,t),n=Math.max(e,t),this.moveRow(n,r),this.moveRow(r+1,n)),this.bodyChanged()},unshiftRow:function(e){this.addRow(0,e)},shiftRow:function(){return this.removeRow(0)},pushRow:function(e){this.addRow(this.rowCount,e)},popRow:function(){return this.removeRow(-1)},clearColgroup:function(){this.$colgroup.remove()},clearBody:function(){console.log("clearing body: oj.litcoffee:2930"),this.$tbody.remove(),this.bodyChanged()},clearHeader:function(){this.$thead.remove(),this.headerChanged()},clearFooter:function(){this.$tfoot.remove(),this.footerChanged()},clearCaption:function(){this.$capation.remove()},clear:function(){return this.clearBody(),this.clearHeader(),this.clearFooter(),this.$caption.remove()},bodyChanged:function(){this._rows=null,this._columns=null,this._$trs=null},headerChanged:function(){this._header=null},footerChanged:function(){this._footer=null},_rowFromModel:function(e){var t=this;return oj(function(){return t.each(e,oj.td)})},_rowElFromItem:function(e){return oj[this.rowTagName](e)},_bound:function(e,t,n){return _boundOrThrow(e,t,n,this.typeName)}}}),oj.sandbox={},_ref2=_keys(oj);for(_j=0,_len1=_ref2.length;_j<_len1;_j++)key=_ref2[_j],key.length>0&&key[0]!=="_"&&oj.addProperty(oj.sandbox,key,{value:oj[key],writable:!1});oj.use=function(e,t){var n,r,i,s;t==null&&(t={});if(arguments.length===0)return oj.useGlobally();if(!oj.isFunction(e))throw new Error("oj.use: function expected for first argument");if(!oj.isObject(t))throw new Error("oj.use: object expected for second argument");r=e(oj,t),s=[];for(n in r)i=r[n],oj[n]=i,s.push(oj.addProperty(oj.sandbox,n,{value:i,writable:!1}));return s},_jqueryExtend=function(e){return e==null&&(e={}),_defaults(e,{get:_identity,set:_identity,first:!1}),function(){var t,n,r,i,s,o,u,a,f;n=_toArray(arguments),t=jQuery(this);if(oj.isFunction(e.get)&&n.length===0){i=[];for(o=0,a=t.length;o<a;o++){r=t[o],i.push(e.get($(r)));if(e.first)return i[0]}return i}if(oj.isFunction(e.set)){i=t;for(u=0,f=t.length;u<f;u++){r=t[u],s=e.set($(r),n);if(s!=null)return s}return t}}},_triggerTypes=function(e){var t,n,r;for(n=0,r=e.length;n<r;n++)t=e[n],t.inserted()},_insertStyles=function(e,t){var n,r;for(r in e){n=e[r];if(r==="oj-style"&&(t!=null?!t.global:!void 0))continue;$("."+_styleClassFromPlugin(r)).length===0&&$("head").append(oj._styleTagFromMediaObject(r,n))}},jQuery.fn.oj=_jqueryExtend({set:function($el,args){var cssMap,d,dom,types,_k,_len2,_ref3;if(args.length===0)return $el[0].oj;with(oj)_ref3=oj.compile.apply(oj,[{dom:1,html:0,cssMap:1}].concat(__slice.call(args))),dom=_ref3.dom,types=_ref3.types,cssMap=_ref3.cssMap;_insertStyles(cssMap,{global:0}),$el.html(""),oj.isArray(dom)||(dom=[dom]);for(_k=0,_len2=dom.length;_k<_len2;_k++)d=dom[_k],$el.append(d);_triggerTypes(types)},get:function(e){return e[0].oj}}),jQuery.ojBody=function(e){var t,n,r,i,s,o;t={html:1,"!DOCTYPE":1,body:1,head:"deep",meta:1,title:"deep",link:"deep",script:"deep"};try{o=oj.compile({dom:1,html:0,css:0,cssMap:1,ignore:t},e),r=o.dom,s=o.types,n=o.cssMap}catch(u){throw i=u,new Error("oj.compile: "+i.message)}return r!=null&&$("body").html(r),_insertStyles(n,{global:1}),_triggerTypes(s)},_jqGetValue=function(e,t){var n,r,i,s;r=e[0],n=r.firstChild;switch(oj.typeOf(n)){case"dom-text":return s=oj.parse(n.nodeValue);case"dom-element":return(i=_getInstanceOnElement(n))!=null?i:n}},jQuery.fn.ojValue=_jqueryExtend({first:!0,set:null,get:_jqGetValue}),jQuery.fn.ojValues=_jqueryExtend({first:!1,set:null,get:_jqGetValue}),plugins={ojAfter:"after",ojBefore:"before",ojAppend:"append",ojPrepend:"prepend",ojReplaceWith:"replaceWith",ojWrap:"wrap",ojWrapInner:"wrapInner"},_fn1=function(e,t){return jQuery.fn[e]=_jqueryExtend({set:function(e,n){var r,i,s,o;o=oj.compile.apply(oj,[{dom:1,html:0,css:0,cssMap:1}].concat(__slice.call(n))),i=o.dom,s=o.types,r=o.cssMap,_insertStyles(r,{global:0}),e[t](i),_triggerTypes(s)},get:null})};for(ojName in plugins)jqName=plugins[ojName],_fn1(ojName,jqName)}).call(this)